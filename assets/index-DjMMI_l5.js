(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Yp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gu={exports:{}},ss={},yu={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh;function P0(){if(Nh)return ae;Nh=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function k(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function M(N,R,oe){this.props=N,this.context=R,this.refs=C,this.updater=oe||v}M.prototype.isReactComponent={},M.prototype.setState=function(N,R){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,R,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function b(){}b.prototype=M.prototype;function _(N,R,oe){this.props=N,this.context=R,this.refs=C,this.updater=oe||v}var q=_.prototype=new b;q.constructor=_,w(q,M.prototype),q.isPureReactComponent=!0;var ee=Array.isArray,re=Object.prototype.hasOwnProperty,Q={current:null},ce={key:!0,ref:!0,__self:!0,__source:!0};function me(N,R,oe){var ue,de={},he=null,Se=null;if(R!=null)for(ue in R.ref!==void 0&&(Se=R.ref),R.key!==void 0&&(he=""+R.key),R)re.call(R,ue)&&!ce.hasOwnProperty(ue)&&(de[ue]=R[ue]);var ge=arguments.length-2;if(ge===1)de.children=oe;else if(1<ge){for(var Ce=Array(ge),Ct=0;Ct<ge;Ct++)Ce[Ct]=arguments[Ct+2];de.children=Ce}if(N&&N.defaultProps)for(ue in ge=N.defaultProps,ge)de[ue]===void 0&&(de[ue]=ge[ue]);return{$$typeof:n,type:N,key:he,ref:Se,props:de,_owner:Q.current}}function ie(N,R){return{$$typeof:n,type:N.type,key:R,ref:N.ref,props:N.props,_owner:N._owner}}function Be(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Dt(N){var R={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return R[oe]})}var At=/\/+/g;function xt(N,R){return typeof N=="object"&&N!==null&&N.key!=null?Dt(""+N.key):R.toString(36)}function jt(N,R,oe,ue,de){var he=typeof N;(he==="undefined"||he==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(he){case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case n:case e:Se=!0}}if(Se)return Se=N,de=de(Se),N=ue===""?"."+xt(Se,0):ue,ee(de)?(oe="",N!=null&&(oe=N.replace(At,"$&/")+"/"),jt(de,R,oe,"",function(Ct){return Ct})):de!=null&&(Be(de)&&(de=ie(de,oe+(!de.key||Se&&Se.key===de.key?"":(""+de.key).replace(At,"$&/")+"/")+N)),R.push(de)),1;if(Se=0,ue=ue===""?".":ue+":",ee(N))for(var ge=0;ge<N.length;ge++){he=N[ge];var Ce=ue+xt(he,ge);Se+=jt(he,R,oe,Ce,de)}else if(Ce=k(N),typeof Ce=="function")for(N=Ce.call(N),ge=0;!(he=N.next()).done;)he=he.value,Ce=ue+xt(he,ge++),Se+=jt(he,R,oe,Ce,de);else if(he==="object")throw R=String(N),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return Se}function Zt(N,R,oe){if(N==null)return N;var ue=[],de=0;return jt(N,ue,"","",function(he){return R.call(oe,he,de++)}),ue}function ft(N){if(N._status===-1){var R=N._result;R=R(),R.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=R)}if(N._status===1)return N._result.default;throw N._result}var Ne={current:null},F={transition:null},Z={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:F,ReactCurrentOwner:Q};function H(){throw Error("act(...) is not supported in production builds of React.")}return ae.Children={map:Zt,forEach:function(N,R,oe){Zt(N,function(){R.apply(this,arguments)},oe)},count:function(N){var R=0;return Zt(N,function(){R++}),R},toArray:function(N){return Zt(N,function(R){return R})||[]},only:function(N){if(!Be(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ae.Component=M,ae.Fragment=t,ae.Profiler=o,ae.PureComponent=_,ae.StrictMode=r,ae.Suspense=d,ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,ae.act=H,ae.cloneElement=function(N,R,oe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ue=w({},N.props),de=N.key,he=N.ref,Se=N._owner;if(R!=null){if(R.ref!==void 0&&(he=R.ref,Se=Q.current),R.key!==void 0&&(de=""+R.key),N.type&&N.type.defaultProps)var ge=N.type.defaultProps;for(Ce in R)re.call(R,Ce)&&!ce.hasOwnProperty(Ce)&&(ue[Ce]=R[Ce]===void 0&&ge!==void 0?ge[Ce]:R[Ce])}var Ce=arguments.length-2;if(Ce===1)ue.children=oe;else if(1<Ce){ge=Array(Ce);for(var Ct=0;Ct<Ce;Ct++)ge[Ct]=arguments[Ct+2];ue.children=ge}return{$$typeof:n,type:N.type,key:de,ref:he,props:ue,_owner:Se}},ae.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},ae.createElement=me,ae.createFactory=function(N){var R=me.bind(null,N);return R.type=N,R},ae.createRef=function(){return{current:null}},ae.forwardRef=function(N){return{$$typeof:c,render:N}},ae.isValidElement=Be,ae.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:ft}},ae.memo=function(N,R){return{$$typeof:p,type:N,compare:R===void 0?null:R}},ae.startTransition=function(N){var R=F.transition;F.transition={};try{N()}finally{F.transition=R}},ae.unstable_act=H,ae.useCallback=function(N,R){return Ne.current.useCallback(N,R)},ae.useContext=function(N){return Ne.current.useContext(N)},ae.useDebugValue=function(){},ae.useDeferredValue=function(N){return Ne.current.useDeferredValue(N)},ae.useEffect=function(N,R){return Ne.current.useEffect(N,R)},ae.useId=function(){return Ne.current.useId()},ae.useImperativeHandle=function(N,R,oe){return Ne.current.useImperativeHandle(N,R,oe)},ae.useInsertionEffect=function(N,R){return Ne.current.useInsertionEffect(N,R)},ae.useLayoutEffect=function(N,R){return Ne.current.useLayoutEffect(N,R)},ae.useMemo=function(N,R){return Ne.current.useMemo(N,R)},ae.useReducer=function(N,R,oe){return Ne.current.useReducer(N,R,oe)},ae.useRef=function(N){return Ne.current.useRef(N)},ae.useState=function(N){return Ne.current.useState(N)},ae.useSyncExternalStore=function(N,R,oe){return Ne.current.useSyncExternalStore(N,R,oe)},ae.useTransition=function(){return Ne.current.useTransition()},ae.version="18.3.1",ae}var Oh;function cc(){return Oh||(Oh=1,yu.exports=P0()),yu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function R0(){if(Dh)return ss;Dh=1;var n=cc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,p){var g,y={},k=null,v=null;p!==void 0&&(k=""+p),d.key!==void 0&&(k=""+d.key),d.ref!==void 0&&(v=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:c,key:k,ref:v,props:y,_owner:o.current}}return ss.Fragment=t,ss.jsx=a,ss.jsxs=a,ss}var Ah;function I0(){return Ah||(Ah=1,gu.exports=R0()),gu.exports}var Gt=I0(),kt=cc();const st=Yp(kt);var Bo={},ku={exports:{}},yt={},Su={exports:{}},vu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function z0(){return bh||(bh=1,function(n){function e(F,Z){var H=F.length;F.push(Z);e:for(;0<H;){var N=H-1>>>1,R=F[N];if(0<o(R,Z))F[N]=Z,F[H]=R,H=N;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Z=F[0],H=F.pop();if(H!==Z){F[0]=H;e:for(var N=0,R=F.length,oe=R>>>1;N<oe;){var ue=2*(N+1)-1,de=F[ue],he=ue+1,Se=F[he];if(0>o(de,H))he<R&&0>o(Se,de)?(F[N]=Se,F[he]=H,N=he):(F[N]=de,F[ue]=H,N=ue);else if(he<R&&0>o(Se,H))F[N]=Se,F[he]=H,N=he;else break e}}return Z}function o(F,Z){var H=F.sortIndex-Z.sortIndex;return H!==0?H:F.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var d=[],p=[],g=1,y=null,k=3,v=!1,w=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(F){for(var Z=t(p);Z!==null;){if(Z.callback===null)r(p);else if(Z.startTime<=F)r(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function ee(F){if(C=!1,q(F),!w)if(t(d)!==null)w=!0,ft(re);else{var Z=t(p);Z!==null&&Ne(ee,Z.startTime-F)}}function re(F,Z){w=!1,C&&(C=!1,b(me),me=-1),v=!0;var H=k;try{for(q(Z),y=t(d);y!==null&&(!(y.expirationTime>Z)||F&&!Dt());){var N=y.callback;if(typeof N=="function"){y.callback=null,k=y.priorityLevel;var R=N(y.expirationTime<=Z);Z=n.unstable_now(),typeof R=="function"?y.callback=R:y===t(d)&&r(d),q(Z)}else r(d);y=t(d)}if(y!==null)var oe=!0;else{var ue=t(p);ue!==null&&Ne(ee,ue.startTime-Z),oe=!1}return oe}finally{y=null,k=H,v=!1}}var Q=!1,ce=null,me=-1,ie=5,Be=-1;function Dt(){return!(n.unstable_now()-Be<ie)}function At(){if(ce!==null){var F=n.unstable_now();Be=F;var Z=!0;try{Z=ce(!0,F)}finally{Z?xt():(Q=!1,ce=null)}}else Q=!1}var xt;if(typeof _=="function")xt=function(){_(At)};else if(typeof MessageChannel<"u"){var jt=new MessageChannel,Zt=jt.port2;jt.port1.onmessage=At,xt=function(){Zt.postMessage(null)}}else xt=function(){M(At,0)};function ft(F){ce=F,Q||(Q=!0,xt())}function Ne(F,Z){me=M(function(){F(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,ft(re))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return k},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(F){switch(k){case 1:case 2:case 3:var Z=3;break;default:Z=k}var H=k;k=Z;try{return F()}finally{k=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,Z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=k;k=F;try{return Z()}finally{k=H}},n.unstable_scheduleCallback=function(F,Z,H){var N=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?N+H:N):H=N,F){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=H+R,F={id:g++,callback:Z,priorityLevel:F,startTime:H,expirationTime:R,sortIndex:-1},H>N?(F.sortIndex=H,e(p,F),t(d)===null&&F===t(p)&&(C?(b(me),me=-1):C=!0,Ne(ee,H-N))):(F.sortIndex=R,e(d,F),w||v||(w=!0,ft(re))),F},n.unstable_shouldYield=Dt,n.unstable_wrapCallback=function(F){var Z=k;return function(){var H=k;k=Z;try{return F.apply(this,arguments)}finally{k=H}}}}(vu)),vu}var Ph;function L0(){return Ph||(Ph=1,Su.exports=z0()),Su.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh;function B0(){if(Rh)return yt;Rh=1;var n=cc(),e=L0();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(i,s){a(i,s),a(i+"Capture",s)}function a(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function k(i){return d.call(y,i)?!0:d.call(g,i)?!1:p.test(i)?y[i]=!0:(g[i]=!0,!1)}function v(i,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,s,u,f){if(s===null||typeof s>"u"||v(i,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(i,s,u,f,h,m,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=h,this.mustUseProperty=u,this.propertyName=i,this.type=s,this.sanitizeURL=m,this.removeEmptyString=S}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){M[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];M[s]=new C(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){M[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){M[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){M[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){M[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){M[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){M[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){M[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(b,_);M[s]=new C(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(b,_);M[s]=new C(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(b,_);M[s]=new C(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){M[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),M.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){M[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function q(i,s,u,f){var h=M.hasOwnProperty(s)?M[s]:null;(h!==null?h.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(w(s,u,h,f)&&(u=null),f||h===null?k(s)&&(u===null?i.removeAttribute(s):i.setAttribute(s,""+u)):h.mustUseProperty?i[h.propertyName]=u===null?h.type===3?!1:"":u:(s=h.attributeName,f=h.attributeNamespace,u===null?i.removeAttribute(s):(h=h.type,u=h===3||h===4&&u===!0?"":""+u,f?i.setAttributeNS(f,s,u):i.setAttribute(s,u))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),Q=Symbol.for("react.portal"),ce=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),Be=Symbol.for("react.provider"),Dt=Symbol.for("react.context"),At=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),jt=Symbol.for("react.suspense_list"),Zt=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),F=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var H=Object.assign,N;function R(i){if(N===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+i}var oe=!1;function ue(i,s){if(!i||oe)return"";oe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(A){var f=A}Reflect.construct(i,[],s)}else{try{s.call()}catch(A){f=A}i.call(s.prototype)}else{try{throw Error()}catch(A){f=A}i()}}catch(A){if(A&&f&&typeof A.stack=="string"){for(var h=A.stack.split(`
`),m=f.stack.split(`
`),S=h.length-1,x=m.length-1;1<=S&&0<=x&&h[S]!==m[x];)x--;for(;1<=S&&0<=x;S--,x--)if(h[S]!==m[x]){if(S!==1||x!==1)do if(S--,x--,0>x||h[S]!==m[x]){var E=`
`+h[S].replace(" at new "," at ");return i.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",i.displayName)),E}while(1<=S&&0<=x);break}}}finally{oe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?R(i):""}function de(i){switch(i.tag){case 5:return R(i.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return i=ue(i.type,!1),i;case 11:return i=ue(i.type.render,!1),i;case 1:return i=ue(i.type,!0),i;default:return""}}function he(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ce:return"Fragment";case Q:return"Portal";case ie:return"Profiler";case me:return"StrictMode";case xt:return"Suspense";case jt:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Dt:return(i.displayName||"Context")+".Consumer";case Be:return(i._context.displayName||"Context")+".Provider";case At:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Zt:return s=i.displayName||null,s!==null?s:he(i.type)||"Memo";case ft:s=i._payload,i=i._init;try{return he(i(s))}catch{}}return null}function Se(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(s);case 8:return s===me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ge(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ce(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ct(i){var s=Ce(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),f=""+i[s];if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return h.call(this)},set:function(S){f=""+S,m.call(this,S)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Ts(i){i._valueTracker||(i._valueTracker=Ct(i))}function Pc(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return i&&(f=Ce(i)?i.checked?"true":"false":i.value),i=f,i!==u?(s.setValue(i),!0):!1}function Ns(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Cl(i,s){var u=s.checked;return H({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Rc(i,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=ge(s.value!=null?s.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ic(i,s){s=s.checked,s!=null&&q(i,"checked",s,!1)}function El(i,s){Ic(i,s);var u=ge(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?Ml(i,s.type,u):s.hasOwnProperty("defaultValue")&&Ml(i,s.type,ge(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function zc(i,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,u||s===i.value||(i.value=s),i.defaultValue=s}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Ml(i,s,u){(s!=="number"||Ns(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var vi=Array.isArray;function Pr(i,s,u,f){if(i=i.options,s){s={};for(var h=0;h<u.length;h++)s["$"+u[h]]=!0;for(u=0;u<i.length;u++)h=s.hasOwnProperty("$"+i[u].value),i[u].selected!==h&&(i[u].selected=h),h&&f&&(i[u].defaultSelected=!0)}else{for(u=""+ge(u),s=null,h=0;h<i.length;h++){if(i[h].value===u){i[h].selected=!0,f&&(i[h].defaultSelected=!0);return}s!==null||i[h].disabled||(s=i[h])}s!==null&&(s.selected=!0)}}function Tl(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Lc(i,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(vi(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}i._wrapperState={initialValue:ge(u)}}function Bc(i,s){var u=ge(s.value),f=ge(s.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),s.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function _c(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function Fc(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nl(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?Fc(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Os,Vc=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,h){MSApp.execUnsafeLocalFunction(function(){return i(s,u,f,h)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(Os=Os||document.createElement("div"),Os.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Os.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function wi(i,s){if(s){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=s;return}}i.textContent=s}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bg=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(i){Bg.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),xi[s]=xi[i]})});function $c(i,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||xi.hasOwnProperty(i)&&xi[i]?(""+s).trim():s+"px"}function jc(i,s){i=i.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,h=$c(u,s[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,h):i[u]=h}}var _g=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ol(i,s){if(s){if(_g[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Dl(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Al=null;function bl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pl=null,Rr=null,Ir=null;function Hc(i){if(i=Wi(i)){if(typeof Pl!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Ys(s),Pl(i.stateNode,i.type,s))}}function Wc(i){Rr?Ir?Ir.push(i):Ir=[i]:Rr=i}function Uc(){if(Rr){var i=Rr,s=Ir;if(Ir=Rr=null,Hc(i),s)for(i=0;i<s.length;i++)Hc(s[i])}}function Kc(i,s){return i(s)}function Jc(){}var Rl=!1;function qc(i,s,u){if(Rl)return i(s,u);Rl=!0;try{return Kc(i,s,u)}finally{Rl=!1,(Rr!==null||Ir!==null)&&(Jc(),Uc())}}function Ci(i,s){var u=i.stateNode;if(u===null)return null;var f=Ys(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var Il=!1;if(c)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Il=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Il=!1}function Fg(i,s,u,f,h,m,S,x,E){var A=Array.prototype.slice.call(arguments,3);try{s.apply(u,A)}catch(I){this.onError(I)}}var Mi=!1,Ds=null,As=!1,zl=null,Vg={onError:function(i){Mi=!0,Ds=i}};function $g(i,s,u,f,h,m,S,x,E){Mi=!1,Ds=null,Fg.apply(Vg,arguments)}function jg(i,s,u,f,h,m,S,x,E){if($g.apply(this,arguments),Mi){if(Mi){var A=Ds;Mi=!1,Ds=null}else throw Error(t(198));As||(As=!0,zl=A)}}function sr(i){var s=i,u=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(u=s.return),i=s.return;while(i)}return s.tag===3?u:null}function Qc(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Gc(i){if(sr(i)!==i)throw Error(t(188))}function Hg(i){var s=i.alternate;if(!s){if(s=sr(i),s===null)throw Error(t(188));return s!==i?null:i}for(var u=i,f=s;;){var h=u.return;if(h===null)break;var m=h.alternate;if(m===null){if(f=h.return,f!==null){u=f;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===u)return Gc(h),i;if(m===f)return Gc(h),s;m=m.sibling}throw Error(t(188))}if(u.return!==f.return)u=h,f=m;else{for(var S=!1,x=h.child;x;){if(x===u){S=!0,u=h,f=m;break}if(x===f){S=!0,f=h,u=m;break}x=x.sibling}if(!S){for(x=m.child;x;){if(x===u){S=!0,u=m,f=h;break}if(x===f){S=!0,f=m,u=h;break}x=x.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:s}function Yc(i){return i=Hg(i),i!==null?Xc(i):null}function Xc(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=Xc(i);if(s!==null)return s;i=i.sibling}return null}var Zc=e.unstable_scheduleCallback,ef=e.unstable_cancelCallback,Wg=e.unstable_shouldYield,Ug=e.unstable_requestPaint,Ae=e.unstable_now,Kg=e.unstable_getCurrentPriorityLevel,Ll=e.unstable_ImmediatePriority,tf=e.unstable_UserBlockingPriority,bs=e.unstable_NormalPriority,Jg=e.unstable_LowPriority,nf=e.unstable_IdlePriority,Ps=null,en=null;function qg(i){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Ps,i,void 0,(i.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Yg,Qg=Math.log,Gg=Math.LN2;function Yg(i){return i>>>=0,i===0?32:31-(Qg(i)/Gg|0)|0}var Rs=64,Is=4194304;function Ti(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function zs(i,s){var u=i.pendingLanes;if(u===0)return 0;var f=0,h=i.suspendedLanes,m=i.pingedLanes,S=u&268435455;if(S!==0){var x=S&~h;x!==0?f=Ti(x):(m&=S,m!==0&&(f=Ti(m)))}else S=u&~h,S!==0?f=Ti(S):m!==0&&(f=Ti(m));if(f===0)return 0;if(s!==0&&s!==f&&!(s&h)&&(h=f&-f,m=s&-s,h>=m||h===16&&(m&4194240)!==0))return s;if(f&4&&(f|=u&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=f;0<s;)u=31-Ht(s),h=1<<u,f|=i[u],s&=~h;return f}function Xg(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zg(i,s){for(var u=i.suspendedLanes,f=i.pingedLanes,h=i.expirationTimes,m=i.pendingLanes;0<m;){var S=31-Ht(m),x=1<<S,E=h[S];E===-1?(!(x&u)||x&f)&&(h[S]=Xg(x,s)):E<=s&&(i.expiredLanes|=x),m&=~x}}function Bl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function rf(){var i=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),i}function _l(i){for(var s=[],u=0;31>u;u++)s.push(i);return s}function Ni(i,s,u){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Ht(s),i[s]=u}function ey(i,s){var u=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var h=31-Ht(u),m=1<<h;s[h]=0,f[h]=-1,i[h]=-1,u&=~m}}function Fl(i,s){var u=i.entangledLanes|=s;for(i=i.entanglements;u;){var f=31-Ht(u),h=1<<f;h&s|i[f]&s&&(i[f]|=s),u&=~h}}var ye=0;function sf(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var of,Vl,lf,af,uf,$l=!1,Ls=[],En=null,Mn=null,Tn=null,Oi=new Map,Di=new Map,Nn=[],ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cf(i,s){switch(i){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Oi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(s.pointerId)}}function Ai(i,s,u,f,h,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:m,targetContainers:[h]},s!==null&&(s=Wi(s),s!==null&&Vl(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),i)}function ny(i,s,u,f,h){switch(s){case"focusin":return En=Ai(En,i,s,u,f,h),!0;case"dragenter":return Mn=Ai(Mn,i,s,u,f,h),!0;case"mouseover":return Tn=Ai(Tn,i,s,u,f,h),!0;case"pointerover":var m=h.pointerId;return Oi.set(m,Ai(Oi.get(m)||null,i,s,u,f,h)),!0;case"gotpointercapture":return m=h.pointerId,Di.set(m,Ai(Di.get(m)||null,i,s,u,f,h)),!0}return!1}function ff(i){var s=or(i.target);if(s!==null){var u=sr(s);if(u!==null){if(s=u.tag,s===13){if(s=Qc(u),s!==null){i.blockedOn=s,uf(i.priority,function(){lf(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bs(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var u=Hl(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Al=f,u.target.dispatchEvent(f),Al=null}else return s=Wi(u),s!==null&&Vl(s),i.blockedOn=u,!1;s.shift()}return!0}function df(i,s,u){Bs(i)&&u.delete(s)}function ry(){$l=!1,En!==null&&Bs(En)&&(En=null),Mn!==null&&Bs(Mn)&&(Mn=null),Tn!==null&&Bs(Tn)&&(Tn=null),Oi.forEach(df),Di.forEach(df)}function bi(i,s){i.blockedOn===s&&(i.blockedOn=null,$l||($l=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ry)))}function Pi(i){function s(h){return bi(h,i)}if(0<Ls.length){bi(Ls[0],i);for(var u=1;u<Ls.length;u++){var f=Ls[u];f.blockedOn===i&&(f.blockedOn=null)}}for(En!==null&&bi(En,i),Mn!==null&&bi(Mn,i),Tn!==null&&bi(Tn,i),Oi.forEach(s),Di.forEach(s),u=0;u<Nn.length;u++)f=Nn[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Nn.length&&(u=Nn[0],u.blockedOn===null);)ff(u),u.blockedOn===null&&Nn.shift()}var zr=ee.ReactCurrentBatchConfig,_s=!0;function iy(i,s,u,f){var h=ye,m=zr.transition;zr.transition=null;try{ye=1,jl(i,s,u,f)}finally{ye=h,zr.transition=m}}function sy(i,s,u,f){var h=ye,m=zr.transition;zr.transition=null;try{ye=4,jl(i,s,u,f)}finally{ye=h,zr.transition=m}}function jl(i,s,u,f){if(_s){var h=Hl(i,s,u,f);if(h===null)oa(i,s,f,Fs,u),cf(i,f);else if(ny(h,i,s,u,f))f.stopPropagation();else if(cf(i,f),s&4&&-1<ty.indexOf(i)){for(;h!==null;){var m=Wi(h);if(m!==null&&of(m),m=Hl(i,s,u,f),m===null&&oa(i,s,f,Fs,u),m===h)break;h=m}h!==null&&f.stopPropagation()}else oa(i,s,f,null,u)}}var Fs=null;function Hl(i,s,u,f){if(Fs=null,i=bl(f),i=or(i),i!==null)if(s=sr(i),s===null)i=null;else if(u=s.tag,u===13){if(i=Qc(s),i!==null)return i;i=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return Fs=i,null}function hf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kg()){case Ll:return 1;case tf:return 4;case bs:case Jg:return 16;case nf:return 536870912;default:return 16}default:return 16}}var On=null,Wl=null,Vs=null;function pf(){if(Vs)return Vs;var i,s=Wl,u=s.length,f,h="value"in On?On.value:On.textContent,m=h.length;for(i=0;i<u&&s[i]===h[i];i++);var S=u-i;for(f=1;f<=S&&s[u-f]===h[m-f];f++);return Vs=h.slice(i,1<f?1-f:void 0)}function $s(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function js(){return!0}function mf(){return!1}function Et(i){function s(u,f,h,m,S){this._reactName=u,this._targetInst=h,this.type=f,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(u=i[x],this[x]=u?u(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?js:mf,this.isPropagationStopped=mf,this}return H(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),s}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Et(Lr),Ri=H({},Lr,{view:0,detail:0}),oy=Et(Ri),Kl,Jl,Ii,Hs=H({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ii&&(Ii&&i.type==="mousemove"?(Kl=i.screenX-Ii.screenX,Jl=i.screenY-Ii.screenY):Jl=Kl=0,Ii=i),Kl)},movementY:function(i){return"movementY"in i?i.movementY:Jl}}),gf=Et(Hs),ly=H({},Hs,{dataTransfer:0}),ay=Et(ly),uy=H({},Ri,{relatedTarget:0}),ql=Et(uy),cy=H({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),fy=Et(cy),dy=H({},Lr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hy=Et(dy),py=H({},Lr,{data:0}),yf=Et(py),my={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ky(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=yy[i])?!!s[i]:!1}function Ql(){return ky}var Sy=H({},Ri,{key:function(i){if(i.key){var s=my[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=$s(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gy[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(i){return i.type==="keypress"?$s(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?$s(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),vy=Et(Sy),wy=H({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kf=Et(wy),xy=H({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),Cy=Et(xy),Ey=H({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),My=Et(Ey),Ty=H({},Hs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ny=Et(Ty),Oy=[9,13,27,32],Gl=c&&"CompositionEvent"in window,zi=null;c&&"documentMode"in document&&(zi=document.documentMode);var Dy=c&&"TextEvent"in window&&!zi,Sf=c&&(!Gl||zi&&8<zi&&11>=zi),vf=" ",wf=!1;function xf(i,s){switch(i){case"keyup":return Oy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Br=!1;function Ay(i,s){switch(i){case"compositionend":return Cf(s);case"keypress":return s.which!==32?null:(wf=!0,vf);case"textInput":return i=s.data,i===vf&&wf?null:i;default:return null}}function by(i,s){if(Br)return i==="compositionend"||!Gl&&xf(i,s)?(i=pf(),Vs=Wl=On=null,Br=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Sf&&s.locale!=="ko"?null:s.data;default:return null}}var Py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Py[i.type]:s==="textarea"}function Mf(i,s,u,f){Wc(f),s=qs(s,"onChange"),0<s.length&&(u=new Ul("onChange","change",null,u,f),i.push({event:u,listeners:s}))}var Li=null,Bi=null;function Ry(i){Hf(i,0)}function Ws(i){var s=jr(i);if(Pc(s))return i}function Iy(i,s){if(i==="change")return s}var Tf=!1;if(c){var Yl;if(c){var Xl="oninput"in document;if(!Xl){var Nf=document.createElement("div");Nf.setAttribute("oninput","return;"),Xl=typeof Nf.oninput=="function"}Yl=Xl}else Yl=!1;Tf=Yl&&(!document.documentMode||9<document.documentMode)}function Of(){Li&&(Li.detachEvent("onpropertychange",Df),Bi=Li=null)}function Df(i){if(i.propertyName==="value"&&Ws(Bi)){var s=[];Mf(s,Bi,i,bl(i)),qc(Ry,s)}}function zy(i,s,u){i==="focusin"?(Of(),Li=s,Bi=u,Li.attachEvent("onpropertychange",Df)):i==="focusout"&&Of()}function Ly(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ws(Bi)}function By(i,s){if(i==="click")return Ws(s)}function _y(i,s){if(i==="input"||i==="change")return Ws(s)}function Fy(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Wt=typeof Object.is=="function"?Object.is:Fy;function _i(i,s){if(Wt(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var u=Object.keys(i),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var h=u[f];if(!d.call(s,h)||!Wt(i[h],s[h]))return!1}return!0}function Af(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bf(i,s){var u=Af(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=s&&f>=s)return{node:u,offset:s-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Af(u)}}function Pf(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Pf(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Rf(){for(var i=window,s=Ns();s instanceof i.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)i=s.contentWindow;else break;s=Ns(i.document)}return s}function Zl(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function Vy(i){var s=Rf(),u=i.focusedElem,f=i.selectionRange;if(s!==u&&u&&u.ownerDocument&&Pf(u.ownerDocument.documentElement,u)){if(f!==null&&Zl(u)){if(s=f.start,i=f.end,i===void 0&&(i=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(i,u.value.length);else if(i=(s=u.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var h=u.textContent.length,m=Math.min(f.start,h);f=f.end===void 0?m:Math.min(f.end,h),!i.extend&&m>f&&(h=f,f=m,m=h),h=bf(u,m);var S=bf(u,f);h&&S&&(i.rangeCount!==1||i.anchorNode!==h.node||i.anchorOffset!==h.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),i.removeAllRanges(),m>f?(i.addRange(s),i.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),i.addRange(s)))}}for(s=[],i=u;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)i=s[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var $y=c&&"documentMode"in document&&11>=document.documentMode,_r=null,ea=null,Fi=null,ta=!1;function If(i,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ta||_r==null||_r!==Ns(f)||(f=_r,"selectionStart"in f&&Zl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Fi&&_i(Fi,f)||(Fi=f,f=qs(ea,"onSelect"),0<f.length&&(s=new Ul("onSelect","select",null,s,u),i.push({event:s,listeners:f}),s.target=_r)))}function Us(i,s){var u={};return u[i.toLowerCase()]=s.toLowerCase(),u["Webkit"+i]="webkit"+s,u["Moz"+i]="moz"+s,u}var Fr={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionend:Us("Transition","TransitionEnd")},na={},zf={};c&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function Ks(i){if(na[i])return na[i];if(!Fr[i])return i;var s=Fr[i],u;for(u in s)if(s.hasOwnProperty(u)&&u in zf)return na[i]=s[u];return i}var Lf=Ks("animationend"),Bf=Ks("animationiteration"),_f=Ks("animationstart"),Ff=Ks("transitionend"),Vf=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(i,s){Vf.set(i,s),l(s,[i])}for(var ra=0;ra<$f.length;ra++){var ia=$f[ra],jy=ia.toLowerCase(),Hy=ia[0].toUpperCase()+ia.slice(1);Dn(jy,"on"+Hy)}Dn(Lf,"onAnimationEnd"),Dn(Bf,"onAnimationIteration"),Dn(_f,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(Ff,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function jf(i,s,u){var f=i.type||"unknown-event";i.currentTarget=u,jg(f,s,void 0,i),i.currentTarget=null}function Hf(i,s){s=(s&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],h=f.event;f=f.listeners;e:{var m=void 0;if(s)for(var S=f.length-1;0<=S;S--){var x=f[S],E=x.instance,A=x.currentTarget;if(x=x.listener,E!==m&&h.isPropagationStopped())break e;jf(h,x,A),m=E}else for(S=0;S<f.length;S++){if(x=f[S],E=x.instance,A=x.currentTarget,x=x.listener,E!==m&&h.isPropagationStopped())break e;jf(h,x,A),m=E}}}if(As)throw i=zl,As=!1,zl=null,i}function we(i,s){var u=s[da];u===void 0&&(u=s[da]=new Set);var f=i+"__bubble";u.has(f)||(Wf(s,i,2,!1),u.add(f))}function sa(i,s,u){var f=0;s&&(f|=4),Wf(u,i,f,s)}var Js="_reactListening"+Math.random().toString(36).slice(2);function $i(i){if(!i[Js]){i[Js]=!0,r.forEach(function(u){u!=="selectionchange"&&(Wy.has(u)||sa(u,!1,i),sa(u,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Js]||(s[Js]=!0,sa("selectionchange",!1,s))}}function Wf(i,s,u,f){switch(hf(s)){case 1:var h=iy;break;case 4:h=sy;break;default:h=jl}u=h.bind(null,s,u,i),h=void 0,!Il||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),f?h!==void 0?i.addEventListener(s,u,{capture:!0,passive:h}):i.addEventListener(s,u,!0):h!==void 0?i.addEventListener(s,u,{passive:h}):i.addEventListener(s,u,!1)}function oa(i,s,u,f,h){var m=f;if(!(s&1)&&!(s&2)&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var x=f.stateNode.containerInfo;if(x===h||x.nodeType===8&&x.parentNode===h)break;if(S===4)for(S=f.return;S!==null;){var E=S.tag;if((E===3||E===4)&&(E=S.stateNode.containerInfo,E===h||E.nodeType===8&&E.parentNode===h))return;S=S.return}for(;x!==null;){if(S=or(x),S===null)return;if(E=S.tag,E===5||E===6){f=m=S;continue e}x=x.parentNode}}f=f.return}qc(function(){var A=m,I=bl(u),L=[];e:{var P=Vf.get(i);if(P!==void 0){var $=Ul,W=i;switch(i){case"keypress":if($s(u)===0)break e;case"keydown":case"keyup":$=vy;break;case"focusin":W="focus",$=ql;break;case"focusout":W="blur",$=ql;break;case"beforeblur":case"afterblur":$=ql;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=ay;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Cy;break;case Lf:case Bf:case _f:$=fy;break;case Ff:$=My;break;case"scroll":$=oy;break;case"wheel":$=Ny;break;case"copy":case"cut":case"paste":$=hy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=kf}var K=(s&4)!==0,be=!K&&i==="scroll",O=K?P!==null?P+"Capture":null:P;K=[];for(var T=A,D;T!==null;){D=T;var B=D.stateNode;if(D.tag===5&&B!==null&&(D=B,O!==null&&(B=Ci(T,O),B!=null&&K.push(ji(T,B,D)))),be)break;T=T.return}0<K.length&&(P=new $(P,W,null,u,I),L.push({event:P,listeners:K}))}}if(!(s&7)){e:{if(P=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",P&&u!==Al&&(W=u.relatedTarget||u.fromElement)&&(or(W)||W[fn]))break e;if(($||P)&&(P=I.window===I?I:(P=I.ownerDocument)?P.defaultView||P.parentWindow:window,$?(W=u.relatedTarget||u.toElement,$=A,W=W?or(W):null,W!==null&&(be=sr(W),W!==be||W.tag!==5&&W.tag!==6)&&(W=null)):($=null,W=A),$!==W)){if(K=gf,B="onMouseLeave",O="onMouseEnter",T="mouse",(i==="pointerout"||i==="pointerover")&&(K=kf,B="onPointerLeave",O="onPointerEnter",T="pointer"),be=$==null?P:jr($),D=W==null?P:jr(W),P=new K(B,T+"leave",$,u,I),P.target=be,P.relatedTarget=D,B=null,or(I)===A&&(K=new K(O,T+"enter",W,u,I),K.target=D,K.relatedTarget=be,B=K),be=B,$&&W)t:{for(K=$,O=W,T=0,D=K;D;D=Vr(D))T++;for(D=0,B=O;B;B=Vr(B))D++;for(;0<T-D;)K=Vr(K),T--;for(;0<D-T;)O=Vr(O),D--;for(;T--;){if(K===O||O!==null&&K===O.alternate)break t;K=Vr(K),O=Vr(O)}K=null}else K=null;$!==null&&Uf(L,P,$,K,!1),W!==null&&be!==null&&Uf(L,be,W,K,!0)}}e:{if(P=A?jr(A):window,$=P.nodeName&&P.nodeName.toLowerCase(),$==="select"||$==="input"&&P.type==="file")var J=Iy;else if(Ef(P))if(Tf)J=_y;else{J=Ly;var G=zy}else($=P.nodeName)&&$.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(J=By);if(J&&(J=J(i,A))){Mf(L,J,u,I);break e}G&&G(i,P,A),i==="focusout"&&(G=P._wrapperState)&&G.controlled&&P.type==="number"&&Ml(P,"number",P.value)}switch(G=A?jr(A):window,i){case"focusin":(Ef(G)||G.contentEditable==="true")&&(_r=G,ea=A,Fi=null);break;case"focusout":Fi=ea=_r=null;break;case"mousedown":ta=!0;break;case"contextmenu":case"mouseup":case"dragend":ta=!1,If(L,u,I);break;case"selectionchange":if($y)break;case"keydown":case"keyup":If(L,u,I)}var Y;if(Gl)e:{switch(i){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else Br?xf(i,u)&&(te="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(te="onCompositionStart");te&&(Sf&&u.locale!=="ko"&&(Br||te!=="onCompositionStart"?te==="onCompositionEnd"&&Br&&(Y=pf()):(On=I,Wl="value"in On?On.value:On.textContent,Br=!0)),G=qs(A,te),0<G.length&&(te=new yf(te,i,null,u,I),L.push({event:te,listeners:G}),Y?te.data=Y:(Y=Cf(u),Y!==null&&(te.data=Y)))),(Y=Dy?Ay(i,u):by(i,u))&&(A=qs(A,"onBeforeInput"),0<A.length&&(I=new yf("onBeforeInput","beforeinput",null,u,I),L.push({event:I,listeners:A}),I.data=Y))}Hf(L,s)})}function ji(i,s,u){return{instance:i,listener:s,currentTarget:u}}function qs(i,s){for(var u=s+"Capture",f=[];i!==null;){var h=i,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=Ci(i,u),m!=null&&f.unshift(ji(i,m,h)),m=Ci(i,s),m!=null&&f.push(ji(i,m,h))),i=i.return}return f}function Vr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Uf(i,s,u,f,h){for(var m=s._reactName,S=[];u!==null&&u!==f;){var x=u,E=x.alternate,A=x.stateNode;if(E!==null&&E===f)break;x.tag===5&&A!==null&&(x=A,h?(E=Ci(u,m),E!=null&&S.unshift(ji(u,E,x))):h||(E=Ci(u,m),E!=null&&S.push(ji(u,E,x)))),u=u.return}S.length!==0&&i.push({event:s,listeners:S})}var Uy=/\r\n?/g,Ky=/\u0000|\uFFFD/g;function Kf(i){return(typeof i=="string"?i:""+i).replace(Uy,`
`).replace(Ky,"")}function Qs(i,s,u){if(s=Kf(s),Kf(i)!==s&&u)throw Error(t(425))}function Gs(){}var la=null,aa=null;function ua(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ca=typeof setTimeout=="function"?setTimeout:void 0,Jy=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,qy=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(i){return Jf.resolve(null).then(i).catch(Qy)}:ca;function Qy(i){setTimeout(function(){throw i})}function fa(i,s){var u=s,f=0;do{var h=u.nextSibling;if(i.removeChild(u),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(f===0){i.removeChild(h),Pi(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=h}while(u);Pi(s)}function An(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function qf(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return i;s--}else u==="/$"&&s++}i=i.previousSibling}return null}var $r=Math.random().toString(36).slice(2),tn="__reactFiber$"+$r,Hi="__reactProps$"+$r,fn="__reactContainer$"+$r,da="__reactEvents$"+$r,Gy="__reactListeners$"+$r,Yy="__reactHandles$"+$r;function or(i){var s=i[tn];if(s)return s;for(var u=i.parentNode;u;){if(s=u[fn]||u[tn]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(i=qf(i);i!==null;){if(u=i[tn])return u;i=qf(i)}return s}i=u,u=i.parentNode}return null}function Wi(i){return i=i[tn]||i[fn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function jr(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ys(i){return i[Hi]||null}var ha=[],Hr=-1;function bn(i){return{current:i}}function xe(i){0>Hr||(i.current=ha[Hr],ha[Hr]=null,Hr--)}function ve(i,s){Hr++,ha[Hr]=i.current,i.current=s}var Pn={},Ge=bn(Pn),dt=bn(!1),lr=Pn;function Wr(i,s){var u=i.type.contextTypes;if(!u)return Pn;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in u)h[m]=s[m];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=h),h}function ht(i){return i=i.childContextTypes,i!=null}function Xs(){xe(dt),xe(Ge)}function Qf(i,s,u){if(Ge.current!==Pn)throw Error(t(168));ve(Ge,s),ve(dt,u)}function Gf(i,s,u){var f=i.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var h in f)if(!(h in s))throw Error(t(108,Se(i)||"Unknown",h));return H({},u,f)}function Zs(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Pn,lr=Ge.current,ve(Ge,i),ve(dt,dt.current),!0}function Yf(i,s,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=Gf(i,s,lr),f.__reactInternalMemoizedMergedChildContext=i,xe(dt),xe(Ge),ve(Ge,i)):xe(dt),ve(dt,u)}var dn=null,eo=!1,pa=!1;function Xf(i){dn===null?dn=[i]:dn.push(i)}function Xy(i){eo=!0,Xf(i)}function Rn(){if(!pa&&dn!==null){pa=!0;var i=0,s=ye;try{var u=dn;for(ye=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}dn=null,eo=!1}catch(h){throw dn!==null&&(dn=dn.slice(i+1)),Zc(Ll,Rn),h}finally{ye=s,pa=!1}}return null}var Ur=[],Kr=0,to=null,no=0,bt=[],Pt=0,ar=null,hn=1,pn="";function ur(i,s){Ur[Kr++]=no,Ur[Kr++]=to,to=i,no=s}function Zf(i,s,u){bt[Pt++]=hn,bt[Pt++]=pn,bt[Pt++]=ar,ar=i;var f=hn;i=pn;var h=32-Ht(f)-1;f&=~(1<<h),u+=1;var m=32-Ht(s)+h;if(30<m){var S=h-h%5;m=(f&(1<<S)-1).toString(32),f>>=S,h-=S,hn=1<<32-Ht(s)+h|u<<h|f,pn=m+i}else hn=1<<m|u<<h|f,pn=i}function ma(i){i.return!==null&&(ur(i,1),Zf(i,1,0))}function ga(i){for(;i===to;)to=Ur[--Kr],Ur[Kr]=null,no=Ur[--Kr],Ur[Kr]=null;for(;i===ar;)ar=bt[--Pt],bt[Pt]=null,pn=bt[--Pt],bt[Pt]=null,hn=bt[--Pt],bt[Pt]=null}var Mt=null,Tt=null,Ee=!1,Ut=null;function ed(i,s){var u=Lt(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=i,s=i.deletions,s===null?(i.deletions=[u],i.flags|=16):s.push(u)}function td(i,s){switch(i.tag){case 5:var u=i.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Mt=i,Tt=An(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Mt=i,Tt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=ar!==null?{id:hn,overflow:pn}:null,i.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Lt(18,null,null,0),u.stateNode=s,u.return=i,i.child=u,Mt=i,Tt=null,!0):!1;default:return!1}}function ya(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ka(i){if(Ee){var s=Tt;if(s){var u=s;if(!td(i,s)){if(ya(i))throw Error(t(418));s=An(u.nextSibling);var f=Mt;s&&td(i,s)?ed(f,u):(i.flags=i.flags&-4097|2,Ee=!1,Mt=i)}}else{if(ya(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ee=!1,Mt=i}}}function nd(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Mt=i}function ro(i){if(i!==Mt)return!1;if(!Ee)return nd(i),Ee=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!ua(i.type,i.memoizedProps)),s&&(s=Tt)){if(ya(i))throw rd(),Error(t(418));for(;s;)ed(i,s),s=An(s.nextSibling)}if(nd(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(s===0){Tt=An(i.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}i=i.nextSibling}Tt=null}}else Tt=Mt?An(i.stateNode.nextSibling):null;return!0}function rd(){for(var i=Tt;i;)i=An(i.nextSibling)}function Jr(){Tt=Mt=null,Ee=!1}function Sa(i){Ut===null?Ut=[i]:Ut.push(i)}var Zy=ee.ReactCurrentBatchConfig;function Ui(i,s,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var h=f,m=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(S){var x=h.refs;S===null?delete x[m]:x[m]=S},s._stringRef=m,s)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function io(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function id(i){var s=i._init;return s(i._payload)}function sd(i){function s(O,T){if(i){var D=O.deletions;D===null?(O.deletions=[T],O.flags|=16):D.push(T)}}function u(O,T){if(!i)return null;for(;T!==null;)s(O,T),T=T.sibling;return null}function f(O,T){for(O=new Map;T!==null;)T.key!==null?O.set(T.key,T):O.set(T.index,T),T=T.sibling;return O}function h(O,T){return O=$n(O,T),O.index=0,O.sibling=null,O}function m(O,T,D){return O.index=D,i?(D=O.alternate,D!==null?(D=D.index,D<T?(O.flags|=2,T):D):(O.flags|=2,T)):(O.flags|=1048576,T)}function S(O){return i&&O.alternate===null&&(O.flags|=2),O}function x(O,T,D,B){return T===null||T.tag!==6?(T=cu(D,O.mode,B),T.return=O,T):(T=h(T,D),T.return=O,T)}function E(O,T,D,B){var J=D.type;return J===ce?I(O,T,D.props.children,B,D.key):T!==null&&(T.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===ft&&id(J)===T.type)?(B=h(T,D.props),B.ref=Ui(O,T,D),B.return=O,B):(B=Do(D.type,D.key,D.props,null,O.mode,B),B.ref=Ui(O,T,D),B.return=O,B)}function A(O,T,D,B){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=fu(D,O.mode,B),T.return=O,T):(T=h(T,D.children||[]),T.return=O,T)}function I(O,T,D,B,J){return T===null||T.tag!==7?(T=yr(D,O.mode,B,J),T.return=O,T):(T=h(T,D),T.return=O,T)}function L(O,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return T=cu(""+T,O.mode,D),T.return=O,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case re:return D=Do(T.type,T.key,T.props,null,O.mode,D),D.ref=Ui(O,null,T),D.return=O,D;case Q:return T=fu(T,O.mode,D),T.return=O,T;case ft:var B=T._init;return L(O,B(T._payload),D)}if(vi(T)||Z(T))return T=yr(T,O.mode,D,null),T.return=O,T;io(O,T)}return null}function P(O,T,D,B){var J=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return J!==null?null:x(O,T,""+D,B);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case re:return D.key===J?E(O,T,D,B):null;case Q:return D.key===J?A(O,T,D,B):null;case ft:return J=D._init,P(O,T,J(D._payload),B)}if(vi(D)||Z(D))return J!==null?null:I(O,T,D,B,null);io(O,D)}return null}function $(O,T,D,B,J){if(typeof B=="string"&&B!==""||typeof B=="number")return O=O.get(D)||null,x(T,O,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case re:return O=O.get(B.key===null?D:B.key)||null,E(T,O,B,J);case Q:return O=O.get(B.key===null?D:B.key)||null,A(T,O,B,J);case ft:var G=B._init;return $(O,T,D,G(B._payload),J)}if(vi(B)||Z(B))return O=O.get(D)||null,I(T,O,B,J,null);io(T,B)}return null}function W(O,T,D,B){for(var J=null,G=null,Y=T,te=T=0,Ve=null;Y!==null&&te<D.length;te++){Y.index>te?(Ve=Y,Y=null):Ve=Y.sibling;var pe=P(O,Y,D[te],B);if(pe===null){Y===null&&(Y=Ve);break}i&&Y&&pe.alternate===null&&s(O,Y),T=m(pe,T,te),G===null?J=pe:G.sibling=pe,G=pe,Y=Ve}if(te===D.length)return u(O,Y),Ee&&ur(O,te),J;if(Y===null){for(;te<D.length;te++)Y=L(O,D[te],B),Y!==null&&(T=m(Y,T,te),G===null?J=Y:G.sibling=Y,G=Y);return Ee&&ur(O,te),J}for(Y=f(O,Y);te<D.length;te++)Ve=$(Y,O,te,D[te],B),Ve!==null&&(i&&Ve.alternate!==null&&Y.delete(Ve.key===null?te:Ve.key),T=m(Ve,T,te),G===null?J=Ve:G.sibling=Ve,G=Ve);return i&&Y.forEach(function(jn){return s(O,jn)}),Ee&&ur(O,te),J}function K(O,T,D,B){var J=Z(D);if(typeof J!="function")throw Error(t(150));if(D=J.call(D),D==null)throw Error(t(151));for(var G=J=null,Y=T,te=T=0,Ve=null,pe=D.next();Y!==null&&!pe.done;te++,pe=D.next()){Y.index>te?(Ve=Y,Y=null):Ve=Y.sibling;var jn=P(O,Y,pe.value,B);if(jn===null){Y===null&&(Y=Ve);break}i&&Y&&jn.alternate===null&&s(O,Y),T=m(jn,T,te),G===null?J=jn:G.sibling=jn,G=jn,Y=Ve}if(pe.done)return u(O,Y),Ee&&ur(O,te),J;if(Y===null){for(;!pe.done;te++,pe=D.next())pe=L(O,pe.value,B),pe!==null&&(T=m(pe,T,te),G===null?J=pe:G.sibling=pe,G=pe);return Ee&&ur(O,te),J}for(Y=f(O,Y);!pe.done;te++,pe=D.next())pe=$(Y,O,te,pe.value,B),pe!==null&&(i&&pe.alternate!==null&&Y.delete(pe.key===null?te:pe.key),T=m(pe,T,te),G===null?J=pe:G.sibling=pe,G=pe);return i&&Y.forEach(function(b0){return s(O,b0)}),Ee&&ur(O,te),J}function be(O,T,D,B){if(typeof D=="object"&&D!==null&&D.type===ce&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case re:e:{for(var J=D.key,G=T;G!==null;){if(G.key===J){if(J=D.type,J===ce){if(G.tag===7){u(O,G.sibling),T=h(G,D.props.children),T.return=O,O=T;break e}}else if(G.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===ft&&id(J)===G.type){u(O,G.sibling),T=h(G,D.props),T.ref=Ui(O,G,D),T.return=O,O=T;break e}u(O,G);break}else s(O,G);G=G.sibling}D.type===ce?(T=yr(D.props.children,O.mode,B,D.key),T.return=O,O=T):(B=Do(D.type,D.key,D.props,null,O.mode,B),B.ref=Ui(O,T,D),B.return=O,O=B)}return S(O);case Q:e:{for(G=D.key;T!==null;){if(T.key===G)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){u(O,T.sibling),T=h(T,D.children||[]),T.return=O,O=T;break e}else{u(O,T);break}else s(O,T);T=T.sibling}T=fu(D,O.mode,B),T.return=O,O=T}return S(O);case ft:return G=D._init,be(O,T,G(D._payload),B)}if(vi(D))return W(O,T,D,B);if(Z(D))return K(O,T,D,B);io(O,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,T!==null&&T.tag===6?(u(O,T.sibling),T=h(T,D),T.return=O,O=T):(u(O,T),T=cu(D,O.mode,B),T.return=O,O=T),S(O)):u(O,T)}return be}var qr=sd(!0),od=sd(!1),so=bn(null),oo=null,Qr=null,va=null;function wa(){va=Qr=oo=null}function xa(i){var s=so.current;xe(so),i._currentValue=s}function Ca(i,s,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===u)break;i=i.return}}function Gr(i,s){oo=i,va=Qr=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(pt=!0),i.firstContext=null)}function Rt(i){var s=i._currentValue;if(va!==i)if(i={context:i,memoizedValue:s,next:null},Qr===null){if(oo===null)throw Error(t(308));Qr=i,oo.dependencies={lanes:0,firstContext:i}}else Qr=Qr.next=i;return s}var cr=null;function Ea(i){cr===null?cr=[i]:cr.push(i)}function ld(i,s,u,f){var h=s.interleaved;return h===null?(u.next=u,Ea(s)):(u.next=h.next,h.next=u),s.interleaved=u,mn(i,f)}function mn(i,s){i.lanes|=s;var u=i.alternate;for(u!==null&&(u.lanes|=s),u=i,i=i.return;i!==null;)i.childLanes|=s,u=i.alternate,u!==null&&(u.childLanes|=s),u=i,i=i.return;return u.tag===3?u.stateNode:null}var In=!1;function Ma(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ad(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gn(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function zn(i,s,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,fe&2){var h=f.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),f.pending=s,mn(i,u)}return h=f.interleaved,h===null?(s.next=s,Ea(f)):(s.next=h.next,h.next=s),f.interleaved=s,mn(i,u)}function lo(i,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=i.pendingLanes,u|=f,s.lanes=u,Fl(i,u)}}function ud(i,s){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var h=null,m=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};m===null?h=m=S:m=m.next=S,u=u.next}while(u!==null);m===null?h=m=s:m=m.next=s}else h=m=s;u={baseState:f.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=s:i.next=s,u.lastBaseUpdate=s}function ao(i,s,u,f){var h=i.updateQueue;In=!1;var m=h.firstBaseUpdate,S=h.lastBaseUpdate,x=h.shared.pending;if(x!==null){h.shared.pending=null;var E=x,A=E.next;E.next=null,S===null?m=A:S.next=A,S=E;var I=i.alternate;I!==null&&(I=I.updateQueue,x=I.lastBaseUpdate,x!==S&&(x===null?I.firstBaseUpdate=A:x.next=A,I.lastBaseUpdate=E))}if(m!==null){var L=h.baseState;S=0,I=A=E=null,x=m;do{var P=x.lane,$=x.eventTime;if((f&P)===P){I!==null&&(I=I.next={eventTime:$,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var W=i,K=x;switch(P=s,$=u,K.tag){case 1:if(W=K.payload,typeof W=="function"){L=W.call($,L,P);break e}L=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=K.payload,P=typeof W=="function"?W.call($,L,P):W,P==null)break e;L=H({},L,P);break e;case 2:In=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,P=h.effects,P===null?h.effects=[x]:P.push(x))}else $={eventTime:$,lane:P,tag:x.tag,payload:x.payload,callback:x.callback,next:null},I===null?(A=I=$,E=L):I=I.next=$,S|=P;if(x=x.next,x===null){if(x=h.shared.pending,x===null)break;P=x,x=P.next,P.next=null,h.lastBaseUpdate=P,h.shared.pending=null}}while(!0);if(I===null&&(E=L),h.baseState=E,h.firstBaseUpdate=A,h.lastBaseUpdate=I,s=h.shared.interleaved,s!==null){h=s;do S|=h.lane,h=h.next;while(h!==s)}else m===null&&(h.shared.lanes=0);hr|=S,i.lanes=S,i.memoizedState=L}}function cd(i,s,u){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var f=i[s],h=f.callback;if(h!==null){if(f.callback=null,f=u,typeof h!="function")throw Error(t(191,h));h.call(f)}}}var Ki={},nn=bn(Ki),Ji=bn(Ki),qi=bn(Ki);function fr(i){if(i===Ki)throw Error(t(174));return i}function Ta(i,s){switch(ve(qi,s),ve(Ji,i),ve(nn,Ki),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Nl(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=Nl(s,i)}xe(nn),ve(nn,s)}function Yr(){xe(nn),xe(Ji),xe(qi)}function fd(i){fr(qi.current);var s=fr(nn.current),u=Nl(s,i.type);s!==u&&(ve(Ji,i),ve(nn,u))}function Na(i){Ji.current===i&&(xe(nn),xe(Ji))}var Me=bn(0);function uo(i){for(var s=i;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Oa=[];function Da(){for(var i=0;i<Oa.length;i++)Oa[i]._workInProgressVersionPrimary=null;Oa.length=0}var co=ee.ReactCurrentDispatcher,Aa=ee.ReactCurrentBatchConfig,dr=0,Te=null,Ie=null,_e=null,fo=!1,Qi=!1,Gi=0,e0=0;function Ye(){throw Error(t(321))}function ba(i,s){if(s===null)return!1;for(var u=0;u<s.length&&u<i.length;u++)if(!Wt(i[u],s[u]))return!1;return!0}function Pa(i,s,u,f,h,m){if(dr=m,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,co.current=i===null||i.memoizedState===null?i0:s0,i=u(f,h),Qi){m=0;do{if(Qi=!1,Gi=0,25<=m)throw Error(t(301));m+=1,_e=Ie=null,s.updateQueue=null,co.current=o0,i=u(f,h)}while(Qi)}if(co.current=mo,s=Ie!==null&&Ie.next!==null,dr=0,_e=Ie=Te=null,fo=!1,s)throw Error(t(300));return i}function Ra(){var i=Gi!==0;return Gi=0,i}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?Te.memoizedState=_e=i:_e=_e.next=i,_e}function It(){if(Ie===null){var i=Te.alternate;i=i!==null?i.memoizedState:null}else i=Ie.next;var s=_e===null?Te.memoizedState:_e.next;if(s!==null)_e=s,Ie=i;else{if(i===null)throw Error(t(310));Ie=i,i={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},_e===null?Te.memoizedState=_e=i:_e=_e.next=i}return _e}function Yi(i,s){return typeof s=="function"?s(i):s}function Ia(i){var s=It(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=Ie,h=f.baseQueue,m=u.pending;if(m!==null){if(h!==null){var S=h.next;h.next=m.next,m.next=S}f.baseQueue=h=m,u.pending=null}if(h!==null){m=h.next,f=f.baseState;var x=S=null,E=null,A=m;do{var I=A.lane;if((dr&I)===I)E!==null&&(E=E.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),f=A.hasEagerState?A.eagerState:i(f,A.action);else{var L={lane:I,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};E===null?(x=E=L,S=f):E=E.next=L,Te.lanes|=I,hr|=I}A=A.next}while(A!==null&&A!==m);E===null?S=f:E.next=x,Wt(f,s.memoizedState)||(pt=!0),s.memoizedState=f,s.baseState=S,s.baseQueue=E,u.lastRenderedState=f}if(i=u.interleaved,i!==null){h=i;do m=h.lane,Te.lanes|=m,hr|=m,h=h.next;while(h!==i)}else h===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function za(i){var s=It(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,h=u.pending,m=s.memoizedState;if(h!==null){u.pending=null;var S=h=h.next;do m=i(m,S.action),S=S.next;while(S!==h);Wt(m,s.memoizedState)||(pt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),u.lastRenderedState=m}return[m,f]}function dd(){}function hd(i,s){var u=Te,f=It(),h=s(),m=!Wt(f.memoizedState,h);if(m&&(f.memoizedState=h,pt=!0),f=f.queue,La(gd.bind(null,u,f,i),[i]),f.getSnapshot!==s||m||_e!==null&&_e.memoizedState.tag&1){if(u.flags|=2048,Xi(9,md.bind(null,u,f,h,s),void 0,null),Fe===null)throw Error(t(349));dr&30||pd(u,s,h)}return h}function pd(i,s,u){i.flags|=16384,i={getSnapshot:s,value:u},s=Te.updateQueue,s===null?(s={lastEffect:null,stores:null},Te.updateQueue=s,s.stores=[i]):(u=s.stores,u===null?s.stores=[i]:u.push(i))}function md(i,s,u,f){s.value=u,s.getSnapshot=f,yd(s)&&kd(i)}function gd(i,s,u){return u(function(){yd(s)&&kd(i)})}function yd(i){var s=i.getSnapshot;i=i.value;try{var u=s();return!Wt(i,u)}catch{return!0}}function kd(i){var s=mn(i,1);s!==null&&Qt(s,i,1,-1)}function Sd(i){var s=rn();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:i},s.queue=i,i=i.dispatch=r0.bind(null,Te,i),[s.memoizedState,i]}function Xi(i,s,u,f){return i={tag:i,create:s,destroy:u,deps:f,next:null},s=Te.updateQueue,s===null?(s={lastEffect:null,stores:null},Te.updateQueue=s,s.lastEffect=i.next=i):(u=s.lastEffect,u===null?s.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,s.lastEffect=i)),i}function vd(){return It().memoizedState}function ho(i,s,u,f){var h=rn();Te.flags|=i,h.memoizedState=Xi(1|s,u,void 0,f===void 0?null:f)}function po(i,s,u,f){var h=It();f=f===void 0?null:f;var m=void 0;if(Ie!==null){var S=Ie.memoizedState;if(m=S.destroy,f!==null&&ba(f,S.deps)){h.memoizedState=Xi(s,u,m,f);return}}Te.flags|=i,h.memoizedState=Xi(1|s,u,m,f)}function wd(i,s){return ho(8390656,8,i,s)}function La(i,s){return po(2048,8,i,s)}function xd(i,s){return po(4,2,i,s)}function Cd(i,s){return po(4,4,i,s)}function Ed(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Md(i,s,u){return u=u!=null?u.concat([i]):null,po(4,4,Ed.bind(null,s,i),u)}function Ba(){}function Td(i,s){var u=It();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&ba(s,f[1])?f[0]:(u.memoizedState=[i,s],i)}function Nd(i,s){var u=It();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&ba(s,f[1])?f[0]:(i=i(),u.memoizedState=[i,s],i)}function Od(i,s,u){return dr&21?(Wt(u,s)||(u=rf(),Te.lanes|=u,hr|=u,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,pt=!0),i.memoizedState=u)}function t0(i,s){var u=ye;ye=u!==0&&4>u?u:4,i(!0);var f=Aa.transition;Aa.transition={};try{i(!1),s()}finally{ye=u,Aa.transition=f}}function Dd(){return It().memoizedState}function n0(i,s,u){var f=Fn(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Ad(i))bd(s,u);else if(u=ld(i,s,u,f),u!==null){var h=it();Qt(u,i,f,h),Pd(u,s,f)}}function r0(i,s,u){var f=Fn(i),h={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ad(i))bd(s,h);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var S=s.lastRenderedState,x=m(S,u);if(h.hasEagerState=!0,h.eagerState=x,Wt(x,S)){var E=s.interleaved;E===null?(h.next=h,Ea(s)):(h.next=E.next,E.next=h),s.interleaved=h;return}}catch{}finally{}u=ld(i,s,h,f),u!==null&&(h=it(),Qt(u,i,f,h),Pd(u,s,f))}}function Ad(i){var s=i.alternate;return i===Te||s!==null&&s===Te}function bd(i,s){Qi=fo=!0;var u=i.pending;u===null?s.next=s:(s.next=u.next,u.next=s),i.pending=s}function Pd(i,s,u){if(u&4194240){var f=s.lanes;f&=i.pendingLanes,u|=f,s.lanes=u,Fl(i,u)}}var mo={readContext:Rt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},i0={readContext:Rt,useCallback:function(i,s){return rn().memoizedState=[i,s===void 0?null:s],i},useContext:Rt,useEffect:wd,useImperativeHandle:function(i,s,u){return u=u!=null?u.concat([i]):null,ho(4194308,4,Ed.bind(null,s,i),u)},useLayoutEffect:function(i,s){return ho(4194308,4,i,s)},useInsertionEffect:function(i,s){return ho(4,2,i,s)},useMemo:function(i,s){var u=rn();return s=s===void 0?null:s,i=i(),u.memoizedState=[i,s],i},useReducer:function(i,s,u){var f=rn();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},f.queue=i,i=i.dispatch=n0.bind(null,Te,i),[f.memoizedState,i]},useRef:function(i){var s=rn();return i={current:i},s.memoizedState=i},useState:Sd,useDebugValue:Ba,useDeferredValue:function(i){return rn().memoizedState=i},useTransition:function(){var i=Sd(!1),s=i[0];return i=t0.bind(null,i[1]),rn().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,u){var f=Te,h=rn();if(Ee){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),Fe===null)throw Error(t(349));dr&30||pd(f,s,u)}h.memoizedState=u;var m={value:u,getSnapshot:s};return h.queue=m,wd(gd.bind(null,f,m,i),[i]),f.flags|=2048,Xi(9,md.bind(null,f,m,u,s),void 0,null),u},useId:function(){var i=rn(),s=Fe.identifierPrefix;if(Ee){var u=pn,f=hn;u=(f&~(1<<32-Ht(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=Gi++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=e0++,s=":"+s+"r"+u.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},s0={readContext:Rt,useCallback:Td,useContext:Rt,useEffect:La,useImperativeHandle:Md,useInsertionEffect:xd,useLayoutEffect:Cd,useMemo:Nd,useReducer:Ia,useRef:vd,useState:function(){return Ia(Yi)},useDebugValue:Ba,useDeferredValue:function(i){var s=It();return Od(s,Ie.memoizedState,i)},useTransition:function(){var i=Ia(Yi)[0],s=It().memoizedState;return[i,s]},useMutableSource:dd,useSyncExternalStore:hd,useId:Dd,unstable_isNewReconciler:!1},o0={readContext:Rt,useCallback:Td,useContext:Rt,useEffect:La,useImperativeHandle:Md,useInsertionEffect:xd,useLayoutEffect:Cd,useMemo:Nd,useReducer:za,useRef:vd,useState:function(){return za(Yi)},useDebugValue:Ba,useDeferredValue:function(i){var s=It();return Ie===null?s.memoizedState=i:Od(s,Ie.memoizedState,i)},useTransition:function(){var i=za(Yi)[0],s=It().memoizedState;return[i,s]},useMutableSource:dd,useSyncExternalStore:hd,useId:Dd,unstable_isNewReconciler:!1};function Kt(i,s){if(i&&i.defaultProps){s=H({},s),i=i.defaultProps;for(var u in i)s[u]===void 0&&(s[u]=i[u]);return s}return s}function _a(i,s,u,f){s=i.memoizedState,u=u(f,s),u=u==null?s:H({},s,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var go={isMounted:function(i){return(i=i._reactInternals)?sr(i)===i:!1},enqueueSetState:function(i,s,u){i=i._reactInternals;var f=it(),h=Fn(i),m=gn(f,h);m.payload=s,u!=null&&(m.callback=u),s=zn(i,m,h),s!==null&&(Qt(s,i,h,f),lo(s,i,h))},enqueueReplaceState:function(i,s,u){i=i._reactInternals;var f=it(),h=Fn(i),m=gn(f,h);m.tag=1,m.payload=s,u!=null&&(m.callback=u),s=zn(i,m,h),s!==null&&(Qt(s,i,h,f),lo(s,i,h))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var u=it(),f=Fn(i),h=gn(u,f);h.tag=2,s!=null&&(h.callback=s),s=zn(i,h,f),s!==null&&(Qt(s,i,f,u),lo(s,i,f))}};function Rd(i,s,u,f,h,m,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,m,S):s.prototype&&s.prototype.isPureReactComponent?!_i(u,f)||!_i(h,m):!0}function Id(i,s,u){var f=!1,h=Pn,m=s.contextType;return typeof m=="object"&&m!==null?m=Rt(m):(h=ht(s)?lr:Ge.current,f=s.contextTypes,m=(f=f!=null)?Wr(i,h):Pn),s=new s(u,m),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=go,i.stateNode=s,s._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=h,i.__reactInternalMemoizedMaskedChildContext=m),s}function zd(i,s,u,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==i&&go.enqueueReplaceState(s,s.state,null)}function Fa(i,s,u,f){var h=i.stateNode;h.props=u,h.state=i.memoizedState,h.refs={},Ma(i);var m=s.contextType;typeof m=="object"&&m!==null?h.context=Rt(m):(m=ht(s)?lr:Ge.current,h.context=Wr(i,m)),h.state=i.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(_a(i,s,m,u),h.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&go.enqueueReplaceState(h,h.state,null),ao(i,u,h,f),h.state=i.memoizedState),typeof h.componentDidMount=="function"&&(i.flags|=4194308)}function Xr(i,s){try{var u="",f=s;do u+=de(f),f=f.return;while(f);var h=u}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:i,source:s,stack:h,digest:null}}function Va(i,s,u){return{value:i,source:null,stack:u??null,digest:s??null}}function $a(i,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var l0=typeof WeakMap=="function"?WeakMap:Map;function Ld(i,s,u){u=gn(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){Co||(Co=!0,nu=f),$a(i,s)},u}function Bd(i,s,u){u=gn(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var h=s.value;u.payload=function(){return f(h)},u.callback=function(){$a(i,s)}}var m=i.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(u.callback=function(){$a(i,s),typeof f!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function _d(i,s,u){var f=i.pingCache;if(f===null){f=i.pingCache=new l0;var h=new Set;f.set(s,h)}else h=f.get(s),h===void 0&&(h=new Set,f.set(s,h));h.has(u)||(h.add(u),i=w0.bind(null,i,s,u),s.then(i,i))}function Fd(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function Vd(i,s,u,f,h){return i.mode&1?(i.flags|=65536,i.lanes=h,i):(i===s?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=gn(-1,1),s.tag=2,zn(u,s,1))),u.lanes|=1),i)}var a0=ee.ReactCurrentOwner,pt=!1;function rt(i,s,u,f){s.child=i===null?od(s,null,u,f):qr(s,i.child,u,f)}function $d(i,s,u,f,h){u=u.render;var m=s.ref;return Gr(s,h),f=Pa(i,s,u,f,m,h),u=Ra(),i!==null&&!pt?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~h,yn(i,s,h)):(Ee&&u&&ma(s),s.flags|=1,rt(i,s,f,h),s.child)}function jd(i,s,u,f,h){if(i===null){var m=u.type;return typeof m=="function"&&!uu(m)&&m.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=m,Hd(i,s,m,f,h)):(i=Do(u.type,null,f,s,s.mode,h),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!(i.lanes&h)){var S=m.memoizedProps;if(u=u.compare,u=u!==null?u:_i,u(S,f)&&i.ref===s.ref)return yn(i,s,h)}return s.flags|=1,i=$n(m,f),i.ref=s.ref,i.return=s,s.child=i}function Hd(i,s,u,f,h){if(i!==null){var m=i.memoizedProps;if(_i(m,f)&&i.ref===s.ref)if(pt=!1,s.pendingProps=f=m,(i.lanes&h)!==0)i.flags&131072&&(pt=!0);else return s.lanes=i.lanes,yn(i,s,h)}return ja(i,s,u,f,h)}function Wd(i,s,u){var f=s.pendingProps,h=f.children,m=i!==null?i.memoizedState:null;if(f.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ei,Nt),Nt|=u;else{if(!(u&1073741824))return i=m!==null?m.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,ve(ei,Nt),Nt|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=m!==null?m.baseLanes:u,ve(ei,Nt),Nt|=f}else m!==null?(f=m.baseLanes|u,s.memoizedState=null):f=u,ve(ei,Nt),Nt|=f;return rt(i,s,h,u),s.child}function Ud(i,s){var u=s.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function ja(i,s,u,f,h){var m=ht(u)?lr:Ge.current;return m=Wr(s,m),Gr(s,h),u=Pa(i,s,u,f,m,h),f=Ra(),i!==null&&!pt?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~h,yn(i,s,h)):(Ee&&f&&ma(s),s.flags|=1,rt(i,s,u,h),s.child)}function Kd(i,s,u,f,h){if(ht(u)){var m=!0;Zs(s)}else m=!1;if(Gr(s,h),s.stateNode===null)ko(i,s),Id(s,u,f),Fa(s,u,f,h),f=!0;else if(i===null){var S=s.stateNode,x=s.memoizedProps;S.props=x;var E=S.context,A=u.contextType;typeof A=="object"&&A!==null?A=Rt(A):(A=ht(u)?lr:Ge.current,A=Wr(s,A));var I=u.getDerivedStateFromProps,L=typeof I=="function"||typeof S.getSnapshotBeforeUpdate=="function";L||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==f||E!==A)&&zd(s,S,f,A),In=!1;var P=s.memoizedState;S.state=P,ao(s,f,S,h),E=s.memoizedState,x!==f||P!==E||dt.current||In?(typeof I=="function"&&(_a(s,u,I,f),E=s.memoizedState),(x=In||Rd(s,u,x,f,P,E,A))?(L||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=E),S.props=f,S.state=E,S.context=A,f=x):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,ad(i,s),x=s.memoizedProps,A=s.type===s.elementType?x:Kt(s.type,x),S.props=A,L=s.pendingProps,P=S.context,E=u.contextType,typeof E=="object"&&E!==null?E=Rt(E):(E=ht(u)?lr:Ge.current,E=Wr(s,E));var $=u.getDerivedStateFromProps;(I=typeof $=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==L||P!==E)&&zd(s,S,f,E),In=!1,P=s.memoizedState,S.state=P,ao(s,f,S,h);var W=s.memoizedState;x!==L||P!==W||dt.current||In?(typeof $=="function"&&(_a(s,u,$,f),W=s.memoizedState),(A=In||Rd(s,u,A,f,P,W,E)||!1)?(I||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,W,E),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,W,E)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&P===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&P===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=W),S.props=f,S.state=W,S.context=E,f=A):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&P===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&P===i.memoizedState||(s.flags|=1024),f=!1)}return Ha(i,s,u,f,m,h)}function Ha(i,s,u,f,h,m){Ud(i,s);var S=(s.flags&128)!==0;if(!f&&!S)return h&&Yf(s,u,!1),yn(i,s,m);f=s.stateNode,a0.current=s;var x=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,i!==null&&S?(s.child=qr(s,i.child,null,m),s.child=qr(s,null,x,m)):rt(i,s,x,m),s.memoizedState=f.state,h&&Yf(s,u,!0),s.child}function Jd(i){var s=i.stateNode;s.pendingContext?Qf(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Qf(i,s.context,!1),Ta(i,s.containerInfo)}function qd(i,s,u,f,h){return Jr(),Sa(h),s.flags|=256,rt(i,s,u,f),s.child}var Wa={dehydrated:null,treeContext:null,retryLane:0};function Ua(i){return{baseLanes:i,cachePool:null,transitions:null}}function Qd(i,s,u){var f=s.pendingProps,h=Me.current,m=!1,S=(s.flags&128)!==0,x;if((x=S)||(x=i!==null&&i.memoizedState===null?!1:(h&2)!==0),x?(m=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(h|=1),ve(Me,h&1),i===null)return ka(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=f.children,i=f.fallback,m?(f=s.mode,m=s.child,S={mode:"hidden",children:S},!(f&1)&&m!==null?(m.childLanes=0,m.pendingProps=S):m=Ao(S,f,0,null),i=yr(i,f,u,null),m.return=s,i.return=s,m.sibling=i,s.child=m,s.child.memoizedState=Ua(u),s.memoizedState=Wa,i):Ka(s,S));if(h=i.memoizedState,h!==null&&(x=h.dehydrated,x!==null))return u0(i,s,S,f,x,h,u);if(m){m=f.fallback,S=s.mode,h=i.child,x=h.sibling;var E={mode:"hidden",children:f.children};return!(S&1)&&s.child!==h?(f=s.child,f.childLanes=0,f.pendingProps=E,s.deletions=null):(f=$n(h,E),f.subtreeFlags=h.subtreeFlags&14680064),x!==null?m=$n(x,m):(m=yr(m,S,u,null),m.flags|=2),m.return=s,f.return=s,f.sibling=m,s.child=f,f=m,m=s.child,S=i.child.memoizedState,S=S===null?Ua(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},m.memoizedState=S,m.childLanes=i.childLanes&~u,s.memoizedState=Wa,f}return m=i.child,i=m.sibling,f=$n(m,{mode:"visible",children:f.children}),!(s.mode&1)&&(f.lanes=u),f.return=s,f.sibling=null,i!==null&&(u=s.deletions,u===null?(s.deletions=[i],s.flags|=16):u.push(i)),s.child=f,s.memoizedState=null,f}function Ka(i,s){return s=Ao({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function yo(i,s,u,f){return f!==null&&Sa(f),qr(s,i.child,null,u),i=Ka(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function u0(i,s,u,f,h,m,S){if(u)return s.flags&256?(s.flags&=-257,f=Va(Error(t(422))),yo(i,s,S,f)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(m=f.fallback,h=s.mode,f=Ao({mode:"visible",children:f.children},h,0,null),m=yr(m,h,S,null),m.flags|=2,f.return=s,m.return=s,f.sibling=m,s.child=f,s.mode&1&&qr(s,i.child,null,S),s.child.memoizedState=Ua(S),s.memoizedState=Wa,m);if(!(s.mode&1))return yo(i,s,S,null);if(h.data==="$!"){if(f=h.nextSibling&&h.nextSibling.dataset,f)var x=f.dgst;return f=x,m=Error(t(419)),f=Va(m,f,void 0),yo(i,s,S,f)}if(x=(S&i.childLanes)!==0,pt||x){if(f=Fe,f!==null){switch(S&-S){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(f.suspendedLanes|S)?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,mn(i,h),Qt(f,i,h,-1))}return au(),f=Va(Error(t(421))),yo(i,s,S,f)}return h.data==="$?"?(s.flags|=128,s.child=i.child,s=x0.bind(null,i),h._reactRetry=s,null):(i=m.treeContext,Tt=An(h.nextSibling),Mt=s,Ee=!0,Ut=null,i!==null&&(bt[Pt++]=hn,bt[Pt++]=pn,bt[Pt++]=ar,hn=i.id,pn=i.overflow,ar=s),s=Ka(s,f.children),s.flags|=4096,s)}function Gd(i,s,u){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Ca(i.return,s,u)}function Ja(i,s,u,f,h){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=f,m.tail=u,m.tailMode=h)}function Yd(i,s,u){var f=s.pendingProps,h=f.revealOrder,m=f.tail;if(rt(i,s,f.children,u),f=Me.current,f&2)f=f&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gd(i,u,s);else if(i.tag===19)Gd(i,u,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(ve(Me,f),!(s.mode&1))s.memoizedState=null;else switch(h){case"forwards":for(u=s.child,h=null;u!==null;)i=u.alternate,i!==null&&uo(i)===null&&(h=u),u=u.sibling;u=h,u===null?(h=s.child,s.child=null):(h=u.sibling,u.sibling=null),Ja(s,!1,h,u,m);break;case"backwards":for(u=null,h=s.child,s.child=null;h!==null;){if(i=h.alternate,i!==null&&uo(i)===null){s.child=h;break}i=h.sibling,h.sibling=u,u=h,h=i}Ja(s,!0,u,null,m);break;case"together":Ja(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ko(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function yn(i,s,u){if(i!==null&&(s.dependencies=i.dependencies),hr|=s.lanes,!(u&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,u=$n(i,i.pendingProps),s.child=u,u.return=s;i.sibling!==null;)i=i.sibling,u=u.sibling=$n(i,i.pendingProps),u.return=s;u.sibling=null}return s.child}function c0(i,s,u){switch(s.tag){case 3:Jd(s),Jr();break;case 5:fd(s);break;case 1:ht(s.type)&&Zs(s);break;case 4:Ta(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,h=s.memoizedProps.value;ve(so,f._currentValue),f._currentValue=h;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(ve(Me,Me.current&1),s.flags|=128,null):u&s.child.childLanes?Qd(i,s,u):(ve(Me,Me.current&1),i=yn(i,s,u),i!==null?i.sibling:null);ve(Me,Me.current&1);break;case 19:if(f=(u&s.childLanes)!==0,i.flags&128){if(f)return Yd(i,s,u);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ve(Me,Me.current),f)break;return null;case 22:case 23:return s.lanes=0,Wd(i,s,u)}return yn(i,s,u)}var Xd,qa,Zd,eh;Xd=function(i,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},qa=function(){},Zd=function(i,s,u,f){var h=i.memoizedProps;if(h!==f){i=s.stateNode,fr(nn.current);var m=null;switch(u){case"input":h=Cl(i,h),f=Cl(i,f),m=[];break;case"select":h=H({},h,{value:void 0}),f=H({},f,{value:void 0}),m=[];break;case"textarea":h=Tl(i,h),f=Tl(i,f),m=[];break;default:typeof h.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Gs)}Ol(u,f);var S;u=null;for(A in h)if(!f.hasOwnProperty(A)&&h.hasOwnProperty(A)&&h[A]!=null)if(A==="style"){var x=h[A];for(S in x)x.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(o.hasOwnProperty(A)?m||(m=[]):(m=m||[]).push(A,null));for(A in f){var E=f[A];if(x=h!=null?h[A]:void 0,f.hasOwnProperty(A)&&E!==x&&(E!=null||x!=null))if(A==="style")if(x){for(S in x)!x.hasOwnProperty(S)||E&&E.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in E)E.hasOwnProperty(S)&&x[S]!==E[S]&&(u||(u={}),u[S]=E[S])}else u||(m||(m=[]),m.push(A,u)),u=E;else A==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,x=x?x.__html:void 0,E!=null&&x!==E&&(m=m||[]).push(A,E)):A==="children"?typeof E!="string"&&typeof E!="number"||(m=m||[]).push(A,""+E):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(o.hasOwnProperty(A)?(E!=null&&A==="onScroll"&&we("scroll",i),m||x===E||(m=[])):(m=m||[]).push(A,E))}u&&(m=m||[]).push("style",u);var A=m;(s.updateQueue=A)&&(s.flags|=4)}},eh=function(i,s,u,f){u!==f&&(s.flags|=4)};function Zi(i,s){if(!Ee)switch(i.tailMode){case"hidden":s=i.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Xe(i){var s=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(s)for(var h=i.child;h!==null;)u|=h.lanes|h.childLanes,f|=h.subtreeFlags&14680064,f|=h.flags&14680064,h.return=i,h=h.sibling;else for(h=i.child;h!==null;)u|=h.lanes|h.childLanes,f|=h.subtreeFlags,f|=h.flags,h.return=i,h=h.sibling;return i.subtreeFlags|=f,i.childLanes=u,s}function f0(i,s,u){var f=s.pendingProps;switch(ga(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(s),null;case 1:return ht(s.type)&&Xs(),Xe(s),null;case 3:return f=s.stateNode,Yr(),xe(dt),xe(Ge),Da(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(ro(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ut!==null&&(su(Ut),Ut=null))),qa(i,s),Xe(s),null;case 5:Na(s);var h=fr(qi.current);if(u=s.type,i!==null&&s.stateNode!=null)Zd(i,s,u,f,h),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Xe(s),null}if(i=fr(nn.current),ro(s)){f=s.stateNode,u=s.type;var m=s.memoizedProps;switch(f[tn]=s,f[Hi]=m,i=(s.mode&1)!==0,u){case"dialog":we("cancel",f),we("close",f);break;case"iframe":case"object":case"embed":we("load",f);break;case"video":case"audio":for(h=0;h<Vi.length;h++)we(Vi[h],f);break;case"source":we("error",f);break;case"img":case"image":case"link":we("error",f),we("load",f);break;case"details":we("toggle",f);break;case"input":Rc(f,m),we("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!m.multiple},we("invalid",f);break;case"textarea":Lc(f,m),we("invalid",f)}Ol(u,m),h=null;for(var S in m)if(m.hasOwnProperty(S)){var x=m[S];S==="children"?typeof x=="string"?f.textContent!==x&&(m.suppressHydrationWarning!==!0&&Qs(f.textContent,x,i),h=["children",x]):typeof x=="number"&&f.textContent!==""+x&&(m.suppressHydrationWarning!==!0&&Qs(f.textContent,x,i),h=["children",""+x]):o.hasOwnProperty(S)&&x!=null&&S==="onScroll"&&we("scroll",f)}switch(u){case"input":Ts(f),zc(f,m,!0);break;case"textarea":Ts(f),_c(f);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(f.onclick=Gs)}f=h,s.updateQueue=f,f!==null&&(s.flags|=4)}else{S=h.nodeType===9?h:h.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Fc(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=S.createElement(u,{is:f.is}):(i=S.createElement(u),u==="select"&&(S=i,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):i=S.createElementNS(i,u),i[tn]=s,i[Hi]=f,Xd(i,s,!1,!1),s.stateNode=i;e:{switch(S=Dl(u,f),u){case"dialog":we("cancel",i),we("close",i),h=f;break;case"iframe":case"object":case"embed":we("load",i),h=f;break;case"video":case"audio":for(h=0;h<Vi.length;h++)we(Vi[h],i);h=f;break;case"source":we("error",i),h=f;break;case"img":case"image":case"link":we("error",i),we("load",i),h=f;break;case"details":we("toggle",i),h=f;break;case"input":Rc(i,f),h=Cl(i,f),we("invalid",i);break;case"option":h=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},h=H({},f,{value:void 0}),we("invalid",i);break;case"textarea":Lc(i,f),h=Tl(i,f),we("invalid",i);break;default:h=f}Ol(u,h),x=h;for(m in x)if(x.hasOwnProperty(m)){var E=x[m];m==="style"?jc(i,E):m==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Vc(i,E)):m==="children"?typeof E=="string"?(u!=="textarea"||E!=="")&&wi(i,E):typeof E=="number"&&wi(i,""+E):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?E!=null&&m==="onScroll"&&we("scroll",i):E!=null&&q(i,m,E,S))}switch(u){case"input":Ts(i),zc(i,f,!1);break;case"textarea":Ts(i),_c(i);break;case"option":f.value!=null&&i.setAttribute("value",""+ge(f.value));break;case"select":i.multiple=!!f.multiple,m=f.value,m!=null?Pr(i,!!f.multiple,m,!1):f.defaultValue!=null&&Pr(i,!!f.multiple,f.defaultValue,!0);break;default:typeof h.onClick=="function"&&(i.onclick=Gs)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Xe(s),null;case 6:if(i&&s.stateNode!=null)eh(i,s,i.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=fr(qi.current),fr(nn.current),ro(s)){if(f=s.stateNode,u=s.memoizedProps,f[tn]=s,(m=f.nodeValue!==u)&&(i=Mt,i!==null))switch(i.tag){case 3:Qs(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Qs(f.nodeValue,u,(i.mode&1)!==0)}m&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[tn]=s,s.stateNode=f}return Xe(s),null;case 13:if(xe(Me),f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ee&&Tt!==null&&s.mode&1&&!(s.flags&128))rd(),Jr(),s.flags|=98560,m=!1;else if(m=ro(s),f!==null&&f.dehydrated!==null){if(i===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[tn]=s}else Jr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Xe(s),m=!1}else Ut!==null&&(su(Ut),Ut=null),m=!0;if(!m)return s.flags&65536?s:null}return s.flags&128?(s.lanes=u,s):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(s.child.flags|=8192,s.mode&1&&(i===null||Me.current&1?ze===0&&(ze=3):au())),s.updateQueue!==null&&(s.flags|=4),Xe(s),null);case 4:return Yr(),qa(i,s),i===null&&$i(s.stateNode.containerInfo),Xe(s),null;case 10:return xa(s.type._context),Xe(s),null;case 17:return ht(s.type)&&Xs(),Xe(s),null;case 19:if(xe(Me),m=s.memoizedState,m===null)return Xe(s),null;if(f=(s.flags&128)!==0,S=m.rendering,S===null)if(f)Zi(m,!1);else{if(ze!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(S=uo(i),S!==null){for(s.flags|=128,Zi(m,!1),f=S.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)m=u,i=f,m.flags&=14680066,S=m.alternate,S===null?(m.childLanes=0,m.lanes=i,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=S.childLanes,m.lanes=S.lanes,m.child=S.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=S.memoizedProps,m.memoizedState=S.memoizedState,m.updateQueue=S.updateQueue,m.type=S.type,i=S.dependencies,m.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return ve(Me,Me.current&1|2),s.child}i=i.sibling}m.tail!==null&&Ae()>ti&&(s.flags|=128,f=!0,Zi(m,!1),s.lanes=4194304)}else{if(!f)if(i=uo(S),i!==null){if(s.flags|=128,f=!0,u=i.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),Zi(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!Ee)return Xe(s),null}else 2*Ae()-m.renderingStartTime>ti&&u!==1073741824&&(s.flags|=128,f=!0,Zi(m,!1),s.lanes=4194304);m.isBackwards?(S.sibling=s.child,s.child=S):(u=m.last,u!==null?u.sibling=S:s.child=S,m.last=S)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ae(),s.sibling=null,u=Me.current,ve(Me,f?u&1|2:u&1),s):(Xe(s),null);case 22:case 23:return lu(),f=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(s.flags|=8192),f&&s.mode&1?Nt&1073741824&&(Xe(s),s.subtreeFlags&6&&(s.flags|=8192)):Xe(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function d0(i,s){switch(ga(s),s.tag){case 1:return ht(s.type)&&Xs(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Yr(),xe(dt),xe(Ge),Da(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return Na(s),null;case 13:if(xe(Me),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Jr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return xe(Me),null;case 4:return Yr(),null;case 10:return xa(s.type._context),null;case 22:case 23:return lu(),null;case 24:return null;default:return null}}var So=!1,Ze=!1,h0=typeof WeakSet=="function"?WeakSet:Set,j=null;function Zr(i,s){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Oe(i,s,f)}else u.current=null}function Qa(i,s,u){try{u()}catch(f){Oe(i,s,f)}}var th=!1;function p0(i,s){if(la=_s,i=Rf(),Zl(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var h=f.anchorOffset,m=f.focusNode;f=f.focusOffset;try{u.nodeType,m.nodeType}catch{u=null;break e}var S=0,x=-1,E=-1,A=0,I=0,L=i,P=null;t:for(;;){for(var $;L!==u||h!==0&&L.nodeType!==3||(x=S+h),L!==m||f!==0&&L.nodeType!==3||(E=S+f),L.nodeType===3&&(S+=L.nodeValue.length),($=L.firstChild)!==null;)P=L,L=$;for(;;){if(L===i)break t;if(P===u&&++A===h&&(x=S),P===m&&++I===f&&(E=S),($=L.nextSibling)!==null)break;L=P,P=L.parentNode}L=$}u=x===-1||E===-1?null:{start:x,end:E}}else u=null}u=u||{start:0,end:0}}else u=null;for(aa={focusedElem:i,selectionRange:u},_s=!1,j=s;j!==null;)if(s=j,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,j=i;else for(;j!==null;){s=j;try{var W=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(W!==null){var K=W.memoizedProps,be=W.memoizedState,O=s.stateNode,T=O.getSnapshotBeforeUpdate(s.elementType===s.type?K:Kt(s.type,K),be);O.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var D=s.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(B){Oe(s,s.return,B)}if(i=s.sibling,i!==null){i.return=s.return,j=i;break}j=s.return}return W=th,th=!1,W}function es(i,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var h=f=f.next;do{if((h.tag&i)===i){var m=h.destroy;h.destroy=void 0,m!==void 0&&Qa(s,u,m)}h=h.next}while(h!==f)}}function vo(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function Ga(i){var s=i.ref;if(s!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof s=="function"?s(i):s.current=i}}function nh(i){var s=i.alternate;s!==null&&(i.alternate=null,nh(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[tn],delete s[Hi],delete s[da],delete s[Gy],delete s[Yy])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function rh(i){return i.tag===5||i.tag===3||i.tag===4}function ih(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||rh(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ya(i,s,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(i,s):u.insertBefore(i,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(i,u)):(s=u,s.appendChild(i)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Gs));else if(f!==4&&(i=i.child,i!==null))for(Ya(i,s,u),i=i.sibling;i!==null;)Ya(i,s,u),i=i.sibling}function Xa(i,s,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?u.insertBefore(i,s):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Xa(i,s,u),i=i.sibling;i!==null;)Xa(i,s,u),i=i.sibling}var Ue=null,Jt=!1;function Ln(i,s,u){for(u=u.child;u!==null;)sh(i,s,u),u=u.sibling}function sh(i,s,u){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Ps,u)}catch{}switch(u.tag){case 5:Ze||Zr(u,s);case 6:var f=Ue,h=Jt;Ue=null,Ln(i,s,u),Ue=f,Jt=h,Ue!==null&&(Jt?(i=Ue,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Ue.removeChild(u.stateNode));break;case 18:Ue!==null&&(Jt?(i=Ue,u=u.stateNode,i.nodeType===8?fa(i.parentNode,u):i.nodeType===1&&fa(i,u),Pi(i)):fa(Ue,u.stateNode));break;case 4:f=Ue,h=Jt,Ue=u.stateNode.containerInfo,Jt=!0,Ln(i,s,u),Ue=f,Jt=h;break;case 0:case 11:case 14:case 15:if(!Ze&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){h=f=f.next;do{var m=h,S=m.destroy;m=m.tag,S!==void 0&&(m&2||m&4)&&Qa(u,s,S),h=h.next}while(h!==f)}Ln(i,s,u);break;case 1:if(!Ze&&(Zr(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(x){Oe(u,s,x)}Ln(i,s,u);break;case 21:Ln(i,s,u);break;case 22:u.mode&1?(Ze=(f=Ze)||u.memoizedState!==null,Ln(i,s,u),Ze=f):Ln(i,s,u);break;default:Ln(i,s,u)}}function oh(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new h0),s.forEach(function(f){var h=C0.bind(null,i,f);u.has(f)||(u.add(f),f.then(h,h))})}}function qt(i,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var h=u[f];try{var m=i,S=s,x=S;e:for(;x!==null;){switch(x.tag){case 5:Ue=x.stateNode,Jt=!1;break e;case 3:Ue=x.stateNode.containerInfo,Jt=!0;break e;case 4:Ue=x.stateNode.containerInfo,Jt=!0;break e}x=x.return}if(Ue===null)throw Error(t(160));sh(m,S,h),Ue=null,Jt=!1;var E=h.alternate;E!==null&&(E.return=null),h.return=null}catch(A){Oe(h,s,A)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lh(s,i),s=s.sibling}function lh(i,s){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(qt(s,i),sn(i),f&4){try{es(3,i,i.return),vo(3,i)}catch(K){Oe(i,i.return,K)}try{es(5,i,i.return)}catch(K){Oe(i,i.return,K)}}break;case 1:qt(s,i),sn(i),f&512&&u!==null&&Zr(u,u.return);break;case 5:if(qt(s,i),sn(i),f&512&&u!==null&&Zr(u,u.return),i.flags&32){var h=i.stateNode;try{wi(h,"")}catch(K){Oe(i,i.return,K)}}if(f&4&&(h=i.stateNode,h!=null)){var m=i.memoizedProps,S=u!==null?u.memoizedProps:m,x=i.type,E=i.updateQueue;if(i.updateQueue=null,E!==null)try{x==="input"&&m.type==="radio"&&m.name!=null&&Ic(h,m),Dl(x,S);var A=Dl(x,m);for(S=0;S<E.length;S+=2){var I=E[S],L=E[S+1];I==="style"?jc(h,L):I==="dangerouslySetInnerHTML"?Vc(h,L):I==="children"?wi(h,L):q(h,I,L,A)}switch(x){case"input":El(h,m);break;case"textarea":Bc(h,m);break;case"select":var P=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var $=m.value;$!=null?Pr(h,!!m.multiple,$,!1):P!==!!m.multiple&&(m.defaultValue!=null?Pr(h,!!m.multiple,m.defaultValue,!0):Pr(h,!!m.multiple,m.multiple?[]:"",!1))}h[Hi]=m}catch(K){Oe(i,i.return,K)}}break;case 6:if(qt(s,i),sn(i),f&4){if(i.stateNode===null)throw Error(t(162));h=i.stateNode,m=i.memoizedProps;try{h.nodeValue=m}catch(K){Oe(i,i.return,K)}}break;case 3:if(qt(s,i),sn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Pi(s.containerInfo)}catch(K){Oe(i,i.return,K)}break;case 4:qt(s,i),sn(i);break;case 13:qt(s,i),sn(i),h=i.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(tu=Ae())),f&4&&oh(i);break;case 22:if(I=u!==null&&u.memoizedState!==null,i.mode&1?(Ze=(A=Ze)||I,qt(s,i),Ze=A):qt(s,i),sn(i),f&8192){if(A=i.memoizedState!==null,(i.stateNode.isHidden=A)&&!I&&i.mode&1)for(j=i,I=i.child;I!==null;){for(L=j=I;j!==null;){switch(P=j,$=P.child,P.tag){case 0:case 11:case 14:case 15:es(4,P,P.return);break;case 1:Zr(P,P.return);var W=P.stateNode;if(typeof W.componentWillUnmount=="function"){f=P,u=P.return;try{s=f,W.props=s.memoizedProps,W.state=s.memoizedState,W.componentWillUnmount()}catch(K){Oe(f,u,K)}}break;case 5:Zr(P,P.return);break;case 22:if(P.memoizedState!==null){ch(L);continue}}$!==null?($.return=P,j=$):ch(L)}I=I.sibling}e:for(I=null,L=i;;){if(L.tag===5){if(I===null){I=L;try{h=L.stateNode,A?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(x=L.stateNode,E=L.memoizedProps.style,S=E!=null&&E.hasOwnProperty("display")?E.display:null,x.style.display=$c("display",S))}catch(K){Oe(i,i.return,K)}}}else if(L.tag===6){if(I===null)try{L.stateNode.nodeValue=A?"":L.memoizedProps}catch(K){Oe(i,i.return,K)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===i)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===i)break e;for(;L.sibling===null;){if(L.return===null||L.return===i)break e;I===L&&(I=null),L=L.return}I===L&&(I=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:qt(s,i),sn(i),f&4&&oh(i);break;case 21:break;default:qt(s,i),sn(i)}}function sn(i){var s=i.flags;if(s&2){try{e:{for(var u=i.return;u!==null;){if(rh(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var h=f.stateNode;f.flags&32&&(wi(h,""),f.flags&=-33);var m=ih(i);Xa(i,m,h);break;case 3:case 4:var S=f.stateNode.containerInfo,x=ih(i);Ya(i,x,S);break;default:throw Error(t(161))}}catch(E){Oe(i,i.return,E)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function m0(i,s,u){j=i,ah(i)}function ah(i,s,u){for(var f=(i.mode&1)!==0;j!==null;){var h=j,m=h.child;if(h.tag===22&&f){var S=h.memoizedState!==null||So;if(!S){var x=h.alternate,E=x!==null&&x.memoizedState!==null||Ze;x=So;var A=Ze;if(So=S,(Ze=E)&&!A)for(j=h;j!==null;)S=j,E=S.child,S.tag===22&&S.memoizedState!==null?fh(h):E!==null?(E.return=S,j=E):fh(h);for(;m!==null;)j=m,ah(m),m=m.sibling;j=h,So=x,Ze=A}uh(i)}else h.subtreeFlags&8772&&m!==null?(m.return=h,j=m):uh(i)}}function uh(i){for(;j!==null;){var s=j;if(s.flags&8772){var u=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ze||vo(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Ze)if(u===null)f.componentDidMount();else{var h=s.elementType===s.type?u.memoizedProps:Kt(s.type,u.memoizedProps);f.componentDidUpdate(h,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&cd(s,m,f);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}cd(s,S,u)}break;case 5:var x=s.stateNode;if(u===null&&s.flags&4){u=x;var E=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&u.focus();break;case"img":E.src&&(u.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var A=s.alternate;if(A!==null){var I=A.memoizedState;if(I!==null){var L=I.dehydrated;L!==null&&Pi(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ze||s.flags&512&&Ga(s)}catch(P){Oe(s,s.return,P)}}if(s===i){j=null;break}if(u=s.sibling,u!==null){u.return=s.return,j=u;break}j=s.return}}function ch(i){for(;j!==null;){var s=j;if(s===i){j=null;break}var u=s.sibling;if(u!==null){u.return=s.return,j=u;break}j=s.return}}function fh(i){for(;j!==null;){var s=j;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{vo(4,s)}catch(E){Oe(s,u,E)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var h=s.return;try{f.componentDidMount()}catch(E){Oe(s,h,E)}}var m=s.return;try{Ga(s)}catch(E){Oe(s,m,E)}break;case 5:var S=s.return;try{Ga(s)}catch(E){Oe(s,S,E)}}}catch(E){Oe(s,s.return,E)}if(s===i){j=null;break}var x=s.sibling;if(x!==null){x.return=s.return,j=x;break}j=s.return}}var g0=Math.ceil,wo=ee.ReactCurrentDispatcher,Za=ee.ReactCurrentOwner,zt=ee.ReactCurrentBatchConfig,fe=0,Fe=null,Pe=null,Ke=0,Nt=0,ei=bn(0),ze=0,ts=null,hr=0,xo=0,eu=0,ns=null,mt=null,tu=0,ti=1/0,kn=null,Co=!1,nu=null,Bn=null,Eo=!1,_n=null,Mo=0,rs=0,ru=null,To=-1,No=0;function it(){return fe&6?Ae():To!==-1?To:To=Ae()}function Fn(i){return i.mode&1?fe&2&&Ke!==0?Ke&-Ke:Zy.transition!==null?(No===0&&(No=rf()),No):(i=ye,i!==0||(i=window.event,i=i===void 0?16:hf(i.type)),i):1}function Qt(i,s,u,f){if(50<rs)throw rs=0,ru=null,Error(t(185));Ni(i,u,f),(!(fe&2)||i!==Fe)&&(i===Fe&&(!(fe&2)&&(xo|=u),ze===4&&Vn(i,Ke)),gt(i,f),u===1&&fe===0&&!(s.mode&1)&&(ti=Ae()+500,eo&&Rn()))}function gt(i,s){var u=i.callbackNode;Zg(i,s);var f=zs(i,i===Fe?Ke:0);if(f===0)u!==null&&ef(u),i.callbackNode=null,i.callbackPriority=0;else if(s=f&-f,i.callbackPriority!==s){if(u!=null&&ef(u),s===1)i.tag===0?Xy(hh.bind(null,i)):Xf(hh.bind(null,i)),qy(function(){!(fe&6)&&Rn()}),u=null;else{switch(sf(f)){case 1:u=Ll;break;case 4:u=tf;break;case 16:u=bs;break;case 536870912:u=nf;break;default:u=bs}u=wh(u,dh.bind(null,i))}i.callbackPriority=s,i.callbackNode=u}}function dh(i,s){if(To=-1,No=0,fe&6)throw Error(t(327));var u=i.callbackNode;if(ni()&&i.callbackNode!==u)return null;var f=zs(i,i===Fe?Ke:0);if(f===0)return null;if(f&30||f&i.expiredLanes||s)s=Oo(i,f);else{s=f;var h=fe;fe|=2;var m=mh();(Fe!==i||Ke!==s)&&(kn=null,ti=Ae()+500,mr(i,s));do try{S0();break}catch(x){ph(i,x)}while(!0);wa(),wo.current=m,fe=h,Pe!==null?s=0:(Fe=null,Ke=0,s=ze)}if(s!==0){if(s===2&&(h=Bl(i),h!==0&&(f=h,s=iu(i,h))),s===1)throw u=ts,mr(i,0),Vn(i,f),gt(i,Ae()),u;if(s===6)Vn(i,f);else{if(h=i.current.alternate,!(f&30)&&!y0(h)&&(s=Oo(i,f),s===2&&(m=Bl(i),m!==0&&(f=m,s=iu(i,m))),s===1))throw u=ts,mr(i,0),Vn(i,f),gt(i,Ae()),u;switch(i.finishedWork=h,i.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:gr(i,mt,kn);break;case 3:if(Vn(i,f),(f&130023424)===f&&(s=tu+500-Ae(),10<s)){if(zs(i,0)!==0)break;if(h=i.suspendedLanes,(h&f)!==f){it(),i.pingedLanes|=i.suspendedLanes&h;break}i.timeoutHandle=ca(gr.bind(null,i,mt,kn),s);break}gr(i,mt,kn);break;case 4:if(Vn(i,f),(f&4194240)===f)break;for(s=i.eventTimes,h=-1;0<f;){var S=31-Ht(f);m=1<<S,S=s[S],S>h&&(h=S),f&=~m}if(f=h,f=Ae()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*g0(f/1960))-f,10<f){i.timeoutHandle=ca(gr.bind(null,i,mt,kn),f);break}gr(i,mt,kn);break;case 5:gr(i,mt,kn);break;default:throw Error(t(329))}}}return gt(i,Ae()),i.callbackNode===u?dh.bind(null,i):null}function iu(i,s){var u=ns;return i.current.memoizedState.isDehydrated&&(mr(i,s).flags|=256),i=Oo(i,s),i!==2&&(s=mt,mt=u,s!==null&&su(s)),i}function su(i){mt===null?mt=i:mt.push.apply(mt,i)}function y0(i){for(var s=i;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var h=u[f],m=h.getSnapshot;h=h.value;try{if(!Wt(m(),h))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vn(i,s){for(s&=~eu,s&=~xo,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var u=31-Ht(s),f=1<<u;i[u]=-1,s&=~f}}function hh(i){if(fe&6)throw Error(t(327));ni();var s=zs(i,0);if(!(s&1))return gt(i,Ae()),null;var u=Oo(i,s);if(i.tag!==0&&u===2){var f=Bl(i);f!==0&&(s=f,u=iu(i,f))}if(u===1)throw u=ts,mr(i,0),Vn(i,s),gt(i,Ae()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,gr(i,mt,kn),gt(i,Ae()),null}function ou(i,s){var u=fe;fe|=1;try{return i(s)}finally{fe=u,fe===0&&(ti=Ae()+500,eo&&Rn())}}function pr(i){_n!==null&&_n.tag===0&&!(fe&6)&&ni();var s=fe;fe|=1;var u=zt.transition,f=ye;try{if(zt.transition=null,ye=1,i)return i()}finally{ye=f,zt.transition=u,fe=s,!(fe&6)&&Rn()}}function lu(){Nt=ei.current,xe(ei)}function mr(i,s){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Jy(u)),Pe!==null)for(u=Pe.return;u!==null;){var f=u;switch(ga(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Xs();break;case 3:Yr(),xe(dt),xe(Ge),Da();break;case 5:Na(f);break;case 4:Yr();break;case 13:xe(Me);break;case 19:xe(Me);break;case 10:xa(f.type._context);break;case 22:case 23:lu()}u=u.return}if(Fe=i,Pe=i=$n(i.current,null),Ke=Nt=s,ze=0,ts=null,eu=xo=hr=0,mt=ns=null,cr!==null){for(s=0;s<cr.length;s++)if(u=cr[s],f=u.interleaved,f!==null){u.interleaved=null;var h=f.next,m=u.pending;if(m!==null){var S=m.next;m.next=h,f.next=S}u.pending=f}cr=null}return i}function ph(i,s){do{var u=Pe;try{if(wa(),co.current=mo,fo){for(var f=Te.memoizedState;f!==null;){var h=f.queue;h!==null&&(h.pending=null),f=f.next}fo=!1}if(dr=0,_e=Ie=Te=null,Qi=!1,Gi=0,Za.current=null,u===null||u.return===null){ze=1,ts=s,Pe=null;break}e:{var m=i,S=u.return,x=u,E=s;if(s=Ke,x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var A=E,I=x,L=I.tag;if(!(I.mode&1)&&(L===0||L===11||L===15)){var P=I.alternate;P?(I.updateQueue=P.updateQueue,I.memoizedState=P.memoizedState,I.lanes=P.lanes):(I.updateQueue=null,I.memoizedState=null)}var $=Fd(S);if($!==null){$.flags&=-257,Vd($,S,x,m,s),$.mode&1&&_d(m,A,s),s=$,E=A;var W=s.updateQueue;if(W===null){var K=new Set;K.add(E),s.updateQueue=K}else W.add(E);break e}else{if(!(s&1)){_d(m,A,s),au();break e}E=Error(t(426))}}else if(Ee&&x.mode&1){var be=Fd(S);if(be!==null){!(be.flags&65536)&&(be.flags|=256),Vd(be,S,x,m,s),Sa(Xr(E,x));break e}}m=E=Xr(E,x),ze!==4&&(ze=2),ns===null?ns=[m]:ns.push(m),m=S;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var O=Ld(m,E,s);ud(m,O);break e;case 1:x=E;var T=m.type,D=m.stateNode;if(!(m.flags&128)&&(typeof T.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Bn===null||!Bn.has(D)))){m.flags|=65536,s&=-s,m.lanes|=s;var B=Bd(m,x,s);ud(m,B);break e}}m=m.return}while(m!==null)}yh(u)}catch(J){s=J,Pe===u&&u!==null&&(Pe=u=u.return);continue}break}while(!0)}function mh(){var i=wo.current;return wo.current=mo,i===null?mo:i}function au(){(ze===0||ze===3||ze===2)&&(ze=4),Fe===null||!(hr&268435455)&&!(xo&268435455)||Vn(Fe,Ke)}function Oo(i,s){var u=fe;fe|=2;var f=mh();(Fe!==i||Ke!==s)&&(kn=null,mr(i,s));do try{k0();break}catch(h){ph(i,h)}while(!0);if(wa(),fe=u,wo.current=f,Pe!==null)throw Error(t(261));return Fe=null,Ke=0,ze}function k0(){for(;Pe!==null;)gh(Pe)}function S0(){for(;Pe!==null&&!Wg();)gh(Pe)}function gh(i){var s=vh(i.alternate,i,Nt);i.memoizedProps=i.pendingProps,s===null?yh(i):Pe=s,Za.current=null}function yh(i){var s=i;do{var u=s.alternate;if(i=s.return,s.flags&32768){if(u=d0(u,s),u!==null){u.flags&=32767,Pe=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ze=6,Pe=null;return}}else if(u=f0(u,s,Nt),u!==null){Pe=u;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=i}while(s!==null);ze===0&&(ze=5)}function gr(i,s,u){var f=ye,h=zt.transition;try{zt.transition=null,ye=1,v0(i,s,u,f)}finally{zt.transition=h,ye=f}return null}function v0(i,s,u,f){do ni();while(_n!==null);if(fe&6)throw Error(t(327));u=i.finishedWork;var h=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var m=u.lanes|u.childLanes;if(ey(i,m),i===Fe&&(Pe=Fe=null,Ke=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Eo||(Eo=!0,wh(bs,function(){return ni(),null})),m=(u.flags&15990)!==0,u.subtreeFlags&15990||m){m=zt.transition,zt.transition=null;var S=ye;ye=1;var x=fe;fe|=4,Za.current=null,p0(i,u),lh(u,i),Vy(aa),_s=!!la,aa=la=null,i.current=u,m0(u),Ug(),fe=x,ye=S,zt.transition=m}else i.current=u;if(Eo&&(Eo=!1,_n=i,Mo=h),m=i.pendingLanes,m===0&&(Bn=null),qg(u.stateNode),gt(i,Ae()),s!==null)for(f=i.onRecoverableError,u=0;u<s.length;u++)h=s[u],f(h.value,{componentStack:h.stack,digest:h.digest});if(Co)throw Co=!1,i=nu,nu=null,i;return Mo&1&&i.tag!==0&&ni(),m=i.pendingLanes,m&1?i===ru?rs++:(rs=0,ru=i):rs=0,Rn(),null}function ni(){if(_n!==null){var i=sf(Mo),s=zt.transition,u=ye;try{if(zt.transition=null,ye=16>i?16:i,_n===null)var f=!1;else{if(i=_n,_n=null,Mo=0,fe&6)throw Error(t(331));var h=fe;for(fe|=4,j=i.current;j!==null;){var m=j,S=m.child;if(j.flags&16){var x=m.deletions;if(x!==null){for(var E=0;E<x.length;E++){var A=x[E];for(j=A;j!==null;){var I=j;switch(I.tag){case 0:case 11:case 15:es(8,I,m)}var L=I.child;if(L!==null)L.return=I,j=L;else for(;j!==null;){I=j;var P=I.sibling,$=I.return;if(nh(I),I===A){j=null;break}if(P!==null){P.return=$,j=P;break}j=$}}}var W=m.alternate;if(W!==null){var K=W.child;if(K!==null){W.child=null;do{var be=K.sibling;K.sibling=null,K=be}while(K!==null)}}j=m}}if(m.subtreeFlags&2064&&S!==null)S.return=m,j=S;else e:for(;j!==null;){if(m=j,m.flags&2048)switch(m.tag){case 0:case 11:case 15:es(9,m,m.return)}var O=m.sibling;if(O!==null){O.return=m.return,j=O;break e}j=m.return}}var T=i.current;for(j=T;j!==null;){S=j;var D=S.child;if(S.subtreeFlags&2064&&D!==null)D.return=S,j=D;else e:for(S=T;j!==null;){if(x=j,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:vo(9,x)}}catch(J){Oe(x,x.return,J)}if(x===S){j=null;break e}var B=x.sibling;if(B!==null){B.return=x.return,j=B;break e}j=x.return}}if(fe=h,Rn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Ps,i)}catch{}f=!0}return f}finally{ye=u,zt.transition=s}}return!1}function kh(i,s,u){s=Xr(u,s),s=Ld(i,s,1),i=zn(i,s,1),s=it(),i!==null&&(Ni(i,1,s),gt(i,s))}function Oe(i,s,u){if(i.tag===3)kh(i,i,u);else for(;s!==null;){if(s.tag===3){kh(s,i,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Bn===null||!Bn.has(f))){i=Xr(u,i),i=Bd(s,i,1),s=zn(s,i,1),i=it(),s!==null&&(Ni(s,1,i),gt(s,i));break}}s=s.return}}function w0(i,s,u){var f=i.pingCache;f!==null&&f.delete(s),s=it(),i.pingedLanes|=i.suspendedLanes&u,Fe===i&&(Ke&u)===u&&(ze===4||ze===3&&(Ke&130023424)===Ke&&500>Ae()-tu?mr(i,0):eu|=u),gt(i,s)}function Sh(i,s){s===0&&(i.mode&1?(s=Is,Is<<=1,!(Is&130023424)&&(Is=4194304)):s=1);var u=it();i=mn(i,s),i!==null&&(Ni(i,s,u),gt(i,u))}function x0(i){var s=i.memoizedState,u=0;s!==null&&(u=s.retryLane),Sh(i,u)}function C0(i,s){var u=0;switch(i.tag){case 13:var f=i.stateNode,h=i.memoizedState;h!==null&&(u=h.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Sh(i,u)}var vh;vh=function(i,s,u){if(i!==null)if(i.memoizedProps!==s.pendingProps||dt.current)pt=!0;else{if(!(i.lanes&u)&&!(s.flags&128))return pt=!1,c0(i,s,u);pt=!!(i.flags&131072)}else pt=!1,Ee&&s.flags&1048576&&Zf(s,no,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;ko(i,s),i=s.pendingProps;var h=Wr(s,Ge.current);Gr(s,u),h=Pa(null,s,f,i,h,u);var m=Ra();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ht(f)?(m=!0,Zs(s)):m=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ma(s),h.updater=go,s.stateNode=h,h._reactInternals=s,Fa(s,f,i,u),s=Ha(null,s,f,!0,m,u)):(s.tag=0,Ee&&m&&ma(s),rt(null,s,h,u),s=s.child),s;case 16:f=s.elementType;e:{switch(ko(i,s),i=s.pendingProps,h=f._init,f=h(f._payload),s.type=f,h=s.tag=M0(f),i=Kt(f,i),h){case 0:s=ja(null,s,f,i,u);break e;case 1:s=Kd(null,s,f,i,u);break e;case 11:s=$d(null,s,f,i,u);break e;case 14:s=jd(null,s,f,Kt(f.type,i),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,h=s.pendingProps,h=s.elementType===f?h:Kt(f,h),ja(i,s,f,h,u);case 1:return f=s.type,h=s.pendingProps,h=s.elementType===f?h:Kt(f,h),Kd(i,s,f,h,u);case 3:e:{if(Jd(s),i===null)throw Error(t(387));f=s.pendingProps,m=s.memoizedState,h=m.element,ad(i,s),ao(s,f,null,u);var S=s.memoizedState;if(f=S.element,m.isDehydrated)if(m={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){h=Xr(Error(t(423)),s),s=qd(i,s,f,u,h);break e}else if(f!==h){h=Xr(Error(t(424)),s),s=qd(i,s,f,u,h);break e}else for(Tt=An(s.stateNode.containerInfo.firstChild),Mt=s,Ee=!0,Ut=null,u=od(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Jr(),f===h){s=yn(i,s,u);break e}rt(i,s,f,u)}s=s.child}return s;case 5:return fd(s),i===null&&ka(s),f=s.type,h=s.pendingProps,m=i!==null?i.memoizedProps:null,S=h.children,ua(f,h)?S=null:m!==null&&ua(f,m)&&(s.flags|=32),Ud(i,s),rt(i,s,S,u),s.child;case 6:return i===null&&ka(s),null;case 13:return Qd(i,s,u);case 4:return Ta(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=qr(s,null,f,u):rt(i,s,f,u),s.child;case 11:return f=s.type,h=s.pendingProps,h=s.elementType===f?h:Kt(f,h),$d(i,s,f,h,u);case 7:return rt(i,s,s.pendingProps,u),s.child;case 8:return rt(i,s,s.pendingProps.children,u),s.child;case 12:return rt(i,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,h=s.pendingProps,m=s.memoizedProps,S=h.value,ve(so,f._currentValue),f._currentValue=S,m!==null)if(Wt(m.value,S)){if(m.children===h.children&&!dt.current){s=yn(i,s,u);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var x=m.dependencies;if(x!==null){S=m.child;for(var E=x.firstContext;E!==null;){if(E.context===f){if(m.tag===1){E=gn(-1,u&-u),E.tag=2;var A=m.updateQueue;if(A!==null){A=A.shared;var I=A.pending;I===null?E.next=E:(E.next=I.next,I.next=E),A.pending=E}}m.lanes|=u,E=m.alternate,E!==null&&(E.lanes|=u),Ca(m.return,u,s),x.lanes|=u;break}E=E.next}}else if(m.tag===10)S=m.type===s.type?null:m.child;else if(m.tag===18){if(S=m.return,S===null)throw Error(t(341));S.lanes|=u,x=S.alternate,x!==null&&(x.lanes|=u),Ca(S,u,s),S=m.sibling}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===s){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}rt(i,s,h.children,u),s=s.child}return s;case 9:return h=s.type,f=s.pendingProps.children,Gr(s,u),h=Rt(h),f=f(h),s.flags|=1,rt(i,s,f,u),s.child;case 14:return f=s.type,h=Kt(f,s.pendingProps),h=Kt(f.type,h),jd(i,s,f,h,u);case 15:return Hd(i,s,s.type,s.pendingProps,u);case 17:return f=s.type,h=s.pendingProps,h=s.elementType===f?h:Kt(f,h),ko(i,s),s.tag=1,ht(f)?(i=!0,Zs(s)):i=!1,Gr(s,u),Id(s,f,h),Fa(s,f,h,u),Ha(null,s,f,!0,i,u);case 19:return Yd(i,s,u);case 22:return Wd(i,s,u)}throw Error(t(156,s.tag))};function wh(i,s){return Zc(i,s)}function E0(i,s,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(i,s,u,f){return new E0(i,s,u,f)}function uu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function M0(i){if(typeof i=="function")return uu(i)?1:0;if(i!=null){if(i=i.$$typeof,i===At)return 11;if(i===Zt)return 14}return 2}function $n(i,s){var u=i.alternate;return u===null?(u=Lt(i.tag,s,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=s,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,s=i.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Do(i,s,u,f,h,m){var S=2;if(f=i,typeof i=="function")uu(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case ce:return yr(u.children,h,m,s);case me:S=8,h|=8;break;case ie:return i=Lt(12,u,s,h|2),i.elementType=ie,i.lanes=m,i;case xt:return i=Lt(13,u,s,h),i.elementType=xt,i.lanes=m,i;case jt:return i=Lt(19,u,s,h),i.elementType=jt,i.lanes=m,i;case Ne:return Ao(u,h,m,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Be:S=10;break e;case Dt:S=9;break e;case At:S=11;break e;case Zt:S=14;break e;case ft:S=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=Lt(S,u,s,h),s.elementType=i,s.type=f,s.lanes=m,s}function yr(i,s,u,f){return i=Lt(7,i,f,s),i.lanes=u,i}function Ao(i,s,u,f){return i=Lt(22,i,f,s),i.elementType=Ne,i.lanes=u,i.stateNode={isHidden:!1},i}function cu(i,s,u){return i=Lt(6,i,null,s),i.lanes=u,i}function fu(i,s,u){return s=Lt(4,i.children!==null?i.children:[],i.key,s),s.lanes=u,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function T0(i,s,u,f,h){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=f,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function du(i,s,u,f,h,m,S,x,E){return i=new T0(i,s,u,x,E),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Lt(3,null,null,s),i.current=m,m.stateNode=i,m.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(m),i}function N0(i,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:f==null?null:""+f,children:i,containerInfo:s,implementation:u}}function xh(i){if(!i)return Pn;i=i._reactInternals;e:{if(sr(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ht(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(ht(u))return Gf(i,u,s)}return s}function Ch(i,s,u,f,h,m,S,x,E){return i=du(u,f,!0,i,h,m,S,x,E),i.context=xh(null),u=i.current,f=it(),h=Fn(u),m=gn(f,h),m.callback=s??null,zn(u,m,h),i.current.lanes=h,Ni(i,h,f),gt(i,f),i}function bo(i,s,u,f){var h=s.current,m=it(),S=Fn(h);return u=xh(u),s.context===null?s.context=u:s.pendingContext=u,s=gn(m,S),s.payload={element:i},f=f===void 0?null:f,f!==null&&(s.callback=f),i=zn(h,s,S),i!==null&&(Qt(i,h,S,m),lo(i,h,S)),S}function Po(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Eh(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<s?u:s}}function hu(i,s){Eh(i,s),(i=i.alternate)&&Eh(i,s)}var Mh=typeof reportError=="function"?reportError:function(i){console.error(i)};function pu(i){this._internalRoot=i}Ro.prototype.render=pu.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));bo(i,s,null,null)},Ro.prototype.unmount=pu.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;pr(function(){bo(null,i,null,null)}),s[fn]=null}};function Ro(i){this._internalRoot=i}Ro.prototype.unstable_scheduleHydration=function(i){if(i){var s=af();i={blockedOn:null,target:i,priority:s};for(var u=0;u<Nn.length&&s!==0&&s<Nn[u].priority;u++);Nn.splice(u,0,i),u===0&&ff(i)}};function mu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Io(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Th(){}function O0(i,s,u,f,h){if(h){if(typeof f=="function"){var m=f;f=function(){var A=Po(S);m.call(A)}}var S=Ch(s,f,i,0,null,!1,!1,"",Th);return i._reactRootContainer=S,i[fn]=S.current,$i(i.nodeType===8?i.parentNode:i),pr(),S}for(;h=i.lastChild;)i.removeChild(h);if(typeof f=="function"){var x=f;f=function(){var A=Po(E);x.call(A)}}var E=du(i,0,!1,null,null,!1,!1,"",Th);return i._reactRootContainer=E,i[fn]=E.current,$i(i.nodeType===8?i.parentNode:i),pr(function(){bo(s,E,u,f)}),E}function zo(i,s,u,f,h){var m=u._reactRootContainer;if(m){var S=m;if(typeof h=="function"){var x=h;h=function(){var E=Po(S);x.call(E)}}bo(s,S,i,h)}else S=O0(u,s,i,h,f);return Po(S)}of=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var u=Ti(s.pendingLanes);u!==0&&(Fl(s,u|1),gt(s,Ae()),!(fe&6)&&(ti=Ae()+500,Rn()))}break;case 13:pr(function(){var f=mn(i,1);if(f!==null){var h=it();Qt(f,i,1,h)}}),hu(i,1)}},Vl=function(i){if(i.tag===13){var s=mn(i,134217728);if(s!==null){var u=it();Qt(s,i,134217728,u)}hu(i,134217728)}},lf=function(i){if(i.tag===13){var s=Fn(i),u=mn(i,s);if(u!==null){var f=it();Qt(u,i,s,f)}hu(i,s)}},af=function(){return ye},uf=function(i,s){var u=ye;try{return ye=i,s()}finally{ye=u}},Pl=function(i,s,u){switch(s){case"input":if(El(i,u),s=u.name,u.type==="radio"&&s!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==i&&f.form===i.form){var h=Ys(f);if(!h)throw Error(t(90));Pc(f),El(f,h)}}}break;case"textarea":Bc(i,u);break;case"select":s=u.value,s!=null&&Pr(i,!!u.multiple,s,!1)}},Kc=ou,Jc=pr;var D0={usingClientEntryPoint:!1,Events:[Wi,jr,Ys,Wc,Uc,ou]},is={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A0={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Yc(i),i===null?null:i.stateNode},findFiberByHostInstance:is.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{Ps=Lo.inject(A0),en=Lo}catch{}}return yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D0,yt.createPortal=function(i,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mu(s))throw Error(t(200));return N0(i,s,null,u)},yt.createRoot=function(i,s){if(!mu(i))throw Error(t(299));var u=!1,f="",h=Mh;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=du(i,1,!1,null,null,u,!1,f,h),i[fn]=s.current,$i(i.nodeType===8?i.parentNode:i),new pu(s)},yt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Yc(s),i=i===null?null:i.stateNode,i},yt.flushSync=function(i){return pr(i)},yt.hydrate=function(i,s,u){if(!Io(s))throw Error(t(200));return zo(null,i,s,!0,u)},yt.hydrateRoot=function(i,s,u){if(!mu(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,h=!1,m="",S=Mh;if(u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=Ch(s,null,i,1,u??null,h,!1,m,S),i[fn]=s.current,$i(i),f)for(i=0;i<f.length;i++)u=f[i],h=u._getVersion,h=h(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,h]:s.mutableSourceEagerHydrationData.push(u,h);return new Ro(s)},yt.render=function(i,s,u){if(!Io(s))throw Error(t(200));return zo(null,i,s,!1,u)},yt.unmountComponentAtNode=function(i){if(!Io(i))throw Error(t(40));return i._reactRootContainer?(pr(function(){zo(null,null,i,!1,function(){i._reactRootContainer=null,i[fn]=null})}),!0):!1},yt.unstable_batchedUpdates=ou,yt.unstable_renderSubtreeIntoContainer=function(i,s,u,f){if(!Io(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return zo(i,s,u,!1,f)},yt.version="18.3.1-next-f1338f8080-20240426",yt}var Ih;function Xp(){if(Ih)return ku.exports;Ih=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ku.exports=B0(),ku.exports}var zh;function _0(){if(zh)return Bo;zh=1;var n=Xp();return Bo.createRoot=n.createRoot,Bo.hydrateRoot=n.hydrateRoot,Bo}var F0=_0();function Je(n){this.content=n}Je.prototype={constructor:Je,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,o=r.find(n),l=r.content.slice();return o==-1?l.push(t||n,e):(l[o+1]=e,t&&(l[o]=t)),new Je(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Je(t)},addToStart:function(n,e){return new Je([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Je(t)},addBefore:function(n,e,t){var r=this.remove(e),o=r.content.slice(),l=r.find(n);return o.splice(l==-1?o.length:l,0,e,t),new Je(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Je.from(n),n.size?new Je(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Je.from(n),n.size?new Je(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Je.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Je.from=function(n){if(n instanceof Je)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Je(e)};function Zp(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),l=e.child(r);if(o==l){t+=o.nodeSize;continue}if(!o.sameMarkup(l))return t;if(o.isText&&o.text!=l.text){for(let a=0;o.text[a]==l.text[a];a++)t++;return t}if(o.content.size||l.content.size){let a=Zp(o.content,l.content,t+1);if(a!=null)return a}t+=o.nodeSize}}function em(n,e,t,r){for(let o=n.childCount,l=e.childCount;;){if(o==0||l==0)return o==l?null:{a:t,b:r};let a=n.child(--o),c=e.child(--l),d=a.nodeSize;if(a==c){t-=d,r-=d;continue}if(!a.sameMarkup(c))return{a:t,b:r};if(a.isText&&a.text!=c.text){let p=0,g=Math.min(a.text.length,c.text.length);for(;p<g&&a.text[a.text.length-p-1]==c.text[c.text.length-p-1];)p++,t--,r--;return{a:t,b:r}}if(a.content.size||c.content.size){let p=em(a.content,c.content,t-1,r-1);if(p)return p}t-=d,r-=d}}class z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,l){for(let a=0,c=0;c<t;a++){let d=this.content[a],p=c+d.nodeSize;if(p>e&&r(d,o+c,l||null,a)!==!1&&d.content.size){let g=c+1;d.nodesBetween(Math.max(0,e-g),Math.min(d.content.size,t-g),r,o+g)}c=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let l="",a=!0;return this.nodesBetween(e,t,(c,d)=>{let p=c.isText?c.text.slice(Math.max(e,d)-d,t-d):c.isLeaf?o?typeof o=="function"?o(c):o:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&p||c.isTextblock)&&r&&(a?a=!1:l+=r),l+=p},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),l=1);l<e.content.length;l++)o.push(e.content[l]);return new z(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let l=0,a=0;a<t;l++){let c=this.content[l],d=a+c.nodeSize;d>e&&((a<e||d>t)&&(c.isText?c=c.cut(Math.max(0,e-a),Math.min(c.text.length,t-a)):c=c.cut(Math.max(0,e-a-1),Math.min(c.content.size,t-a-1))),r.push(c),o+=c.nodeSize),a=d}return new z(r,o)}cutByIndex(e,t){return e==t?z.empty:e==0&&t==this.content.length?this:new z(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),l=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new z(o,l)}addToStart(e){return new z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return Zp(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return em(this,e,t,r)}findIndex(e,t=-1){if(e==0)return _o(0,e);if(e==this.size)return _o(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let l=this.child(r),a=o+l.nodeSize;if(a>=e)return a==e||t>0?_o(r+1,a):_o(r,o);o=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return z.empty;let t,r=0;for(let o=0;o<e.length;o++){let l=e[o];r+=l.nodeSize,o&&l.isText&&e[o-1].sameMarkup(l)?(t||(t=e.slice(0,o)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new z(t||e,r)}static from(e){if(!e)return z.empty;if(e instanceof z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}z.empty=new z([],0);const wu={index:0,offset:0};function _o(n,e){return wu.index=n,wu.offset=e,wu}function Go(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Go(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Go(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ke=class Hu{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let l=e[o];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,o));else{if(l.type.excludes(this.type))return e;!r&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(l)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Go(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Hu.none;if(e instanceof Hu)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};ke.none=[];class Yo extends Error{}class V{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=nm(this.content,e+this.openStart,t);return r&&new V(r,this.openStart,this.openEnd)}removeBetween(e,t){return new V(tm(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return V.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new V(z.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)r++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)o++;return new V(e,r,o)}}V.empty=new V(z.empty,0,0);function tm(n,e,t){let{index:r,offset:o}=n.findIndex(e),l=n.maybeChild(r),{index:a,offset:c}=n.findIndex(t);if(o==e||l.isText){if(c!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,l.copy(tm(l.content,e-o-1,t-o-1)))}function nm(n,e,t,r){let{index:o,offset:l}=n.findIndex(e),a=n.maybeChild(o);if(l==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let c=nm(a.content,e-l-1,t);return c&&n.replaceChild(o,a.copy(c))}function V0(n,e,t){if(t.openStart>n.depth)throw new Yo("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Yo("Inconsistent open depths");return rm(n,e,t,0)}function rm(n,e,t,r){let o=n.index(r),l=n.node(r);if(o==e.index(r)&&r<n.depth-t.openStart){let a=rm(n,e,t,r+1);return l.copy(l.content.replaceChild(o,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,c=a.content;return Er(a,c.cut(0,n.parentOffset).append(t.content).append(c.cut(e.parentOffset)))}else{let{start:a,end:c}=$0(t,n);return Er(l,sm(n,a,c,e,r))}else return Er(l,Xo(n,e,r))}function im(n,e){if(!e.type.compatibleContent(n.type))throw new Yo("Cannot join "+e.type.name+" onto "+n.type.name)}function Wu(n,e,t){let r=n.node(t);return im(r,e.node(t)),r}function Cr(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function fs(n,e,t,r){let o=(e||n).node(t),l=0,a=e?e.index(t):o.childCount;n&&(l=n.index(t),n.depth>t?l++:n.textOffset&&(Cr(n.nodeAfter,r),l++));for(let c=l;c<a;c++)Cr(o.child(c),r);e&&e.depth==t&&e.textOffset&&Cr(e.nodeBefore,r)}function Er(n,e){return n.type.checkContent(e),n.copy(e)}function sm(n,e,t,r,o){let l=n.depth>o&&Wu(n,e,o+1),a=r.depth>o&&Wu(t,r,o+1),c=[];return fs(null,n,o,c),l&&a&&e.index(o)==t.index(o)?(im(l,a),Cr(Er(l,sm(n,e,t,r,o+1)),c)):(l&&Cr(Er(l,Xo(n,e,o+1)),c),fs(e,t,o,c),a&&Cr(Er(a,Xo(t,r,o+1)),c)),fs(r,null,o,c),new z(c)}function Xo(n,e,t){let r=[];if(fs(null,n,t,r),n.depth>t){let o=Wu(n,e,t+1);Cr(Er(o,Xo(n,e,t+1)),r)}return fs(e,null,t,r),new z(r)}function $0(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let l=t-1;l>=0;l--)o=e.node(l).copy(z.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class ps{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)o+=r.child(l).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ke.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let c=r;r=o,o=c}let l=r.marks;for(var a=0;a<l.length;a++)l[a].type.spec.inclusive===!1&&(!o||!l[a].isInSet(o.marks))&&(l=l[a--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var l=0;l<r.length;l++)r[l].type.spec.inclusive===!1&&(!o||!r[l].isInSet(o.marks))&&(r=r[l--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Zo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,l=t;for(let a=e;;){let{index:c,offset:d}=a.content.findIndex(l),p=l-d;if(r.push(a,c,o+d),!p||(a=a.child(c),a.isText))break;l=p-1,o+=d+1}return new ps(t,r,l)}static resolveCached(e,t){let r=Lh.get(e);if(r)for(let l=0;l<r.elts.length;l++){let a=r.elts[l];if(a.pos==t)return a}else Lh.set(e,r=new j0);let o=r.elts[r.i]=ps.resolve(e,t);return r.i=(r.i+1)%H0,o}}class j0{constructor(){this.elts=[],this.i=0}}const H0=12,Lh=new WeakMap;class Zo{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const W0=Object.create(null);let Gn=class Uu{constructor(e,t,r,o=ke.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Go(this.attrs,t||e.defaultAttrs||W0)&&ke.sameSet(this.marks,r||ke.none)}copy(e=null){return e==this.content?this:new Uu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Uu(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return V.empty;let o=this.resolve(e),l=this.resolve(t),a=r?0:o.sharedDepth(t),c=o.start(a),p=o.node(a).content.cut(o.pos-c,l.pos-c);return new V(p,o.depth-a,l.depth-a)}replace(e,t,r){return V0(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return ps.resolveCached(this,e)}resolveNoCache(e){return ps.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,l=>(r.isInSet(l.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),om(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=z.empty,o=0,l=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,o,l),c=a&&a.matchFragment(this.content,t);if(!c||!c.validEnd)return!1;for(let d=o;d<l;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let l=this.contentMatchAt(e).matchType(r),a=l&&l.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ke.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ke.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=z.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,o,r);return l.type.checkAttrs(l.attrs),l}};Gn.prototype.text=void 0;class el extends Gn{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):om(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new el(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new el(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function om(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Or{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new U0(e,t);if(r.next==null)return Or.empty;let o=lm(r);r.next&&r.err("Unexpected trailing text");let l=X0(Y0(o));return Z0(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let l=t;o&&l<r;l++)o=o.matchType(e.child(l).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function l(a,c){let d=a.matchFragment(e,r);if(d&&(!t||d.validEnd))return z.from(c.map(p=>p.createAndFill()));for(let p=0;p<a.next.length;p++){let{type:g,next:y}=a.next[p];if(!(g.isText||g.hasRequiredAttrs())&&o.indexOf(y)==-1){o.push(y);let k=l(y,c.concat(g));if(k)return k}}return null}return l(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),l=o.match;if(l.matchType(e)){let a=[];for(let c=o;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<l.next.length;a++){let{type:c,next:d}=l.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in t)&&(!o.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:o}),t[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let l=o+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)l+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return l}).join(`
`)}}Or.empty=new Or(!0);class U0{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function lm(n){let e=[];do e.push(K0(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function K0(n){let e=[];do e.push(J0(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function J0(n){let e=G0(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=q0(n,e);else break;return e}function Bh(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function q0(n,e){let t=Bh(n),r=t;return n.eat(",")&&(n.next!="}"?r=Bh(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Q0(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let l in t){let a=t[l];a.isInGroup(e)&&o.push(a)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function G0(n){if(n.eat("(")){let e=lm(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Q0(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Y0(n){let e=[[]];return o(l(n,0),t()),e;function t(){return e.push([])-1}function r(a,c,d){let p={term:d,to:c};return e[a].push(p),p}function o(a,c){a.forEach(d=>d.to=c)}function l(a,c){if(a.type=="choice")return a.exprs.reduce((d,p)=>d.concat(l(p,c)),[]);if(a.type=="seq")for(let d=0;;d++){let p=l(a.exprs[d],c);if(d==a.exprs.length-1)return p;o(p,c=t())}else if(a.type=="star"){let d=t();return r(c,d),o(l(a.expr,d),d),[r(d)]}else if(a.type=="plus"){let d=t();return o(l(a.expr,c),d),o(l(a.expr,d),d),[r(d)]}else{if(a.type=="opt")return[r(c)].concat(l(a.expr,c));if(a.type=="range"){let d=c;for(let p=0;p<a.min;p++){let g=t();o(l(a.expr,d),g),d=g}if(a.max==-1)o(l(a.expr,d),d);else for(let p=a.min;p<a.max;p++){let g=t();r(d,g),o(l(a.expr,d),g),d=g}return[r(d)]}else{if(a.type=="name")return[r(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function am(n,e){return e-n}function _h(n,e){let t=[];return r(e),t.sort(am);function r(o){let l=n[o];if(l.length==1&&!l[0].term)return r(l[0].to);t.push(o);for(let a=0;a<l.length;a++){let{term:c,to:d}=l[a];!c&&t.indexOf(d)==-1&&r(d)}}}function X0(n){let e=Object.create(null);return t(_h(n,0));function t(r){let o=[];r.forEach(a=>{n[a].forEach(({term:c,to:d})=>{if(!c)return;let p;for(let g=0;g<o.length;g++)o[g][0]==c&&(p=o[g][1]);_h(n,d).forEach(g=>{p||o.push([c,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let l=e[r.join(",")]=new Or(r.indexOf(n.length-1)>-1);for(let a=0;a<o.length;a++){let c=o[a][1].sort(am);l.next.push({type:o[a][0],next:e[c.join(",")]||t(c)})}return l}}function Z0(n,e){for(let t=0,r=[n];t<r.length;t++){let o=r[t],l=!o.validEnd,a=[];for(let c=0;c<o.next.length;c++){let{type:d,next:p}=o.next[c];a.push(d.name),l&&!(d.isText||d.hasRequiredAttrs())&&(l=!1),r.indexOf(p)==-1&&r.push(p)}l&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function um(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function cm(n,e){let t=Object.create(null);for(let r in n){let o=e&&e[r];if(o===void 0){let l=n[r];if(l.hasDefault)o=l.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function fm(n,e,t,r){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let l=n[o];l.validate&&l.validate(e[o])}}function dm(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new t1(n,r,e[r]);return t}let Fh=class hm{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=dm(e,r.attrs),this.defaultAttrs=um(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Or.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:cm(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gn(this,this.computeAttrs(e),z.from(t),ke.setFrom(r))}createChecked(e=null,t,r){return t=z.from(t),this.checkContent(t),new Gn(this,this.computeAttrs(e),t,ke.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=z.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let o=this.contentMatch.matchFragment(t),l=o&&o.fillBefore(z.empty,!0);return l?new Gn(this,e,t.append(l),ke.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){fm(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ke.none:e}static compile(e,t){let r=Object.create(null);e.forEach((l,a)=>r[l]=new hm(l,t,a));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let l in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function e1(n,e,t){let r=t.split("|");return o=>{let l=o===null?"null":typeof o;if(r.indexOf(l)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${l}`)}}class t1{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?e1(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class cl{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=dm(e,o.attrs),this.excluded=null;let l=um(this.attrs);this.instance=l?new ke(this,l):null}create(e=null){return!e&&this.instance?this.instance:new ke(this,cm(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((l,a)=>r[l]=new cl(l,o++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){fm(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class pm{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=Je.from(e.nodes),t.marks=Je.from(e.marks||{}),this.nodes=Fh.compile(this.spec.nodes,this),this.marks=cl.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let l=this.nodes[o],a=l.spec.content||"",c=l.spec.marks;if(l.contentMatch=r[a]||(r[a]=Or.parse(a,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=c=="_"?null:c?Vh(this,c.split(" ")):c==""||!l.inlineContent?[]:null}for(let o in this.marks){let l=this.marks[o],a=l.spec.excludes;l.excluded=a==null?[l]:a==""?[]:Vh(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Fh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new el(r,r.defaultAttrs,e,ke.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Gn.fromJSON(this,e)}markFromJSON(e){return ke.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Vh(n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],l=n.marks[o],a=l;if(l)t.push(l);else for(let c in n.marks){let d=n.marks[c];(o=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(o)>-1)&&t.push(a=d)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function n1(n){return n.tag!=null}function r1(n){return n.style!=null}class Yn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(n1(o))this.tags.push(o);else if(r1(o)){let l=/[^=]*/.exec(o.style)[0];r.indexOf(l)<0&&r.push(l),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let l=e.nodes[o.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let r=new jh(this,t,!1);return r.addAll(e,ke.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new jh(this,t,!0);return r.addAll(e,ke.none,t.from,t.to),V.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let l=this.tags[o];if(o1(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let a=l.getAttrs(e);if(a===!1)continue;l.attrs=a||void 0}return l}}}matchStyle(e,t,r,o){for(let l=o?this.styles.indexOf(o)+1:0;l<this.styles.length;l++){let a=this.styles[l],c=a.style;if(!(c.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=t))){if(a.getAttrs){let d=a.getAttrs(t);if(d===!1)continue;a.attrs=d||void 0}return a}}}static schemaRules(e){let t=[];function r(o){let l=o.priority==null?50:o.priority,a=0;for(;a<t.length;a++){let c=t[a];if((c.priority==null?50:c.priority)<l)break}t.splice(a,0,o)}for(let o in e.marks){let l=e.marks[o].spec.parseDOM;l&&l.forEach(a=>{r(a=Hh(a)),a.mark||a.ignore||a.clearMark||(a.mark=o)})}for(let o in e.nodes){let l=e.nodes[o].spec.parseDOM;l&&l.forEach(a=>{r(a=Hh(a)),a.node||a.ignore||a.mark||(a.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Yn(e,Yn.schemaRules(e)))}}const mm={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},i1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},gm={ol:!0,ul:!0},ms=1,Ku=2,Uo=4;function $h(n,e,t){return e!=null?(e?ms:0)|(e==="full"?Ku:0):n&&n.whitespace=="pre"?ms|Ku:t&-5}class Fo{constructor(e,t,r,o,l,a){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=ke.none,this.match=l||(a&Uo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ms)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let l=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-o[0].length))}}let t=z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!mm.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class jh{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=t.topNode,l,a=$h(null,t.preserveWhitespace,0)|(r?Uo:0);o?l=new Fo(o.type,o.attrs,ke.none,!0,t.topMatch||o.type.contentMatch,a):r?l=new Fo(null,null,ke.none,!0,null,a):l=new Fo(e.schema.topNodeType,null,ke.none,!0,null,a),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top,l=o.options&Ku?"full":this.localPreserveWS||(o.options&ms)>0;if(l==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(l)l!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=o.content[o.content.length-1],c=e.previousSibling;(!a||c&&c.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),c;gm.hasOwnProperty(a)&&this.parser.normalizeLists&&s1(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(d?d.ignore:i1.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,g=this.needsBlock;if(mm.hasOwnProperty(a))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),p=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(l),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,d,p,d.consuming===!1?c:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let l=this.parser.matchedStyles[o],a=r.getPropertyValue(l);if(a)for(let c=void 0;;){let d=this.parser.matchStyle(l,a,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(p=>!d.clearMark(p)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return t}addElementByRule(e,t,r,o){let l,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r)||this.leafFallback(e,r);else{let d=this.enter(a,t.attrs||null,r,t.preserveWhitespace);d&&(l=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let c=this.top;if(a&&a.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}l&&this.sync(c)&&this.open--}addAll(e,t,r,o){let l=r||0;for(let a=r?e.childNodes[r]:e.firstChild,c=o==null?null:e.childNodes[o];a!=c;a=a.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(a,t);this.findAtPoint(e,l)}findPlace(e,t){let r,o;for(let l=this.open;l>=0;l--){let a=this.nodes[l],c=a.findWrapping(e);if(c&&(!r||r.length>c.length)&&(r=c,o=a,!c.length)||a.solid)break}if(!r)return null;this.sync(o);for(let l=0;l<r.length;l++)t=this.enterInner(r[l],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=ke.none;for(let a of r.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):Wh(a.type,e.type))&&(l=a.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,o){let l=this.findPlace(e.create(t),r);return l&&(l=this.enterInner(e,t,r,!0,o)),l}enterInner(e,t,r,o=!1,l){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let c=$h(e,l,a.options);a.options&Uo&&a.content.length==0&&(c|=Uo);let d=ke.none;return r=r.filter(p=>(a.type?a.type.allowsMarkType(p.type):Wh(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new Fo(e,t,d,o,null,c)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ms)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),l=-(r?r.depth+1:0)+(o?0:1),a=(c,d)=>{for(;c>=0;c--){let p=t[c];if(p==""){if(c==t.length-1||c==0)continue;for(;d>=l;d--)if(a(c-1,d))return!0;return!1}else{let g=d>0||d==0&&o?this.nodes[d].type:r&&d>=l?r.node(d-l).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;d--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function s1(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&gm.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function o1(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Hh(n){let e={};for(let t in n)e[t]=n[t];return e}function Wh(n,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(n))continue;let l=[],a=c=>{l.push(c);for(let d=0;d<c.edgeCount;d++){let{type:p,next:g}=c.edge(d);if(p==e||l.indexOf(g)<0&&a(g))return!0}};if(a(o.contentMatch))return!0}}class br{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=xu(t).createDocumentFragment());let o=r,l=[];return e.forEach(a=>{if(l.length||a.marks.length){let c=0,d=0;for(;c<l.length&&d<a.marks.length;){let p=a.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(l[c][0])||p.type.spec.spanning===!1)break;c++,d++}for(;c<l.length;)o=l.pop()[1];for(;d<a.marks.length;){let p=a.marks[d++],g=this.serializeMark(p,a.isInline,t);g&&(l.push([p,o]),o.appendChild(g.dom),o=g.contentDOM||g.dom)}}o.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=Ko(xu(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let l=this.serializeMark(e.marks[o],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(r),r=l.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&Ko(xu(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return Ko(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new br(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Uh(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Uh(e.marks)}}function Uh(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function xu(n){return n.document||window.document}const Kh=new WeakMap;function l1(n){let e=Kh.get(n);return e===void 0&&Kh.set(n,e=a1(n)),e}function a1(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(n),e}function Ko(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],l;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(l=l1(r))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=o.indexOf(" ");a>0&&(t=o.slice(0,a),o=o.slice(a+1));let c,d=t?n.createElementNS(t,o):n.createElement(o),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let k=y.indexOf(" ");k>0?d.setAttributeNS(y.slice(0,k),y.slice(k+1),p[y]):d.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let k=e[y];if(k===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:w}=Ko(n,k,t,r);if(d.appendChild(v),w){if(c)throw new RangeError("Multiple content holes");c=w}}}return{dom:d,contentDOM:c}}const ym=65535,km=Math.pow(2,16);function u1(n,e){return n+e*km}function Jh(n){return n&ym}function c1(n){return(n-(n&ym))/km}const Sm=1,vm=2,Jo=4,wm=8;class Ju{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&wm)>0}get deletedBefore(){return(this.delInfo&(Sm|Jo))>0}get deletedAfter(){return(this.delInfo&(vm|Jo))>0}get deletedAcross(){return(this.delInfo&Jo)>0}}class Ot{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ot.empty)return Ot.empty}recover(e){let t=0,r=Jh(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+c1(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,l=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?o:0);if(d>e)break;let p=this.ranges[c+l],g=this.ranges[c+a],y=d+p;if(e<=y){let k=p?e==d?-1:e==y?1:t:t,v=d+o+(k<0?0:g);if(r)return v;let w=e==(t<0?d:y)?null:u1(c/3,e-d),C=e==d?vm:e==y?Sm:Jo;return(t<0?e!=d:e!=y)&&(C|=wm),new Ju(v,C,w)}o+=g-p}return r?e+o:new Ju(e+o,0,null)}touches(e,t){let r=0,o=Jh(t),l=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let p=this.ranges[c+l],g=d+p;if(e<=g&&c==o*3)return!0;r+=this.ranges[c+a]-p}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,l=0;o<this.ranges.length;o+=3){let a=this.ranges[o],c=a-(this.inverted?l:0),d=a+(this.inverted?0:l),p=this.ranges[o+t],g=this.ranges[o+r];e(c,c+p,d,d+g),l+=g-p}}invert(){return new Ot(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ot.empty:new Ot(e<0?[0,-e,0]:[0,0,e])}}Ot.empty=new Ot([]);class ui{constructor(e=[],t,r=0,o=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=o}slice(e=0,t=this.maps.length){return new ui(this.maps,this.mirror,e,t)}copy(){return new ui(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let o=e.getMirror(t);this.appendMap(e.maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e.maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new ui;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let l=this.from;l<this.to;l++){let a=this.maps[l],c=a.mapResult(e,t);if(c.recover!=null){let d=this.getMirror(l);if(d!=null&&d>l&&d<this.to){l=d,e=this.maps[d].recover(c.recover);continue}}o|=c.delInfo,e=c.pos}return r?e:new Ju(e,o,null)}}const Cu=Object.create(null);class nt{getMap(){return Ot.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Cu[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Cu)throw new RangeError("Duplicate use of step JSON ID "+e);return Cu[e]=t,t.prototype.jsonID=e,t}}class Re{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Re(e,null)}static fail(e){return new Re(null,e)}static fromReplace(e,t,r,o){try{return Re.ok(e.replace(t,r,o))}catch(l){if(l instanceof Yo)return Re.fail(l.message);throw l}}}function fc(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let l=n.child(o);l.content.size&&(l=l.copy(fc(l.content,e,l))),l.isInline&&(l=e(l,t,o)),r.push(l)}return z.fromArray(r)}class Jn extends nt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),l=new V(fc(t.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),o),t.openStart,t.openEnd);return Re.fromReplace(e,this.from,this.to,l)}invert(){return new ln(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Jn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Jn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Jn(t.from,t.to,e.markFromJSON(t.mark))}}nt.jsonID("addMark",Jn);class ln extends nt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new V(fc(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return Re.fromReplace(e,this.from,this.to,r)}invert(){return new Jn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ln(t.pos,r.pos,this.mark)}merge(e){return e instanceof ln&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ln(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ln(t.from,t.to,e.markFromJSON(t.mark))}}nt.jsonID("removeMark",ln);class qn extends nt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Re.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Re.fromReplace(e,this.pos,this.pos+1,new V(z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new qn(this.pos,t.marks[o]);return new qn(this.pos,this.mark)}}return new hi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new qn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new qn(t.pos,e.markFromJSON(t.mark))}}nt.jsonID("addNodeMark",qn);class hi extends nt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Re.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Re.fromReplace(e,this.pos,this.pos+1,new V(z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new qn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hi(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hi(t.pos,e.markFromJSON(t.mark))}}nt.jsonID("removeNodeMark",hi);class $e extends nt{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&qu(e,this.from,this.to)?Re.fail("Structure replace would overwrite content"):Re.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ot([this.from,this.to-this.from,this.slice.size])}invert(e){return new $e(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new $e(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof $e)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?V.empty:new V(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new $e(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?V.empty:new V(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new $e(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $e(t.from,t.to,V.fromJSON(e,t.slice),!!t.structure)}}nt.jsonID("replace",$e);class je extends nt{constructor(e,t,r,o,l,a,c=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=l,this.insert=a,this.structure=c}apply(e){if(this.structure&&(qu(e,this.from,this.gapFrom)||qu(e,this.gapTo,this.to)))return Re.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Re.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Re.fromReplace(e,this.from,this.to,r):Re.fail("Content does not fit in gap")}getMap(){return new Ot([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new je(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||l>r.pos?null:new je(t.pos,r.pos,o,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new je(t.from,t.to,t.gapFrom,t.gapTo,V.fromJSON(e,t.slice),t.insert,!!t.structure)}}nt.jsonID("replaceAround",je);function qu(n,e,t){let r=n.resolve(e),o=t-e,l=r.depth;for(;o>0&&l>0&&r.indexAfter(l)==r.node(l).childCount;)l--,o--;if(o>0){let a=r.node(l).maybeChild(r.indexAfter(l));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function f1(n,e,t,r){let o=[],l=[],a,c;n.doc.nodesBetween(e,t,(d,p,g)=>{if(!d.isInline)return;let y=d.marks;if(!r.isInSet(y)&&g.type.allowsMarkType(r.type)){let k=Math.max(p,e),v=Math.min(p+d.nodeSize,t),w=r.addToSet(y);for(let C=0;C<y.length;C++)y[C].isInSet(w)||(a&&a.to==k&&a.mark.eq(y[C])?a.to=v:o.push(a=new ln(k,v,y[C])));c&&c.to==k?c.to=v:l.push(c=new Jn(k,v,r))}}),o.forEach(d=>n.step(d)),l.forEach(d=>n.step(d))}function d1(n,e,t,r){let o=[],l=0;n.doc.nodesBetween(e,t,(a,c)=>{if(!a.isInline)return;l++;let d=null;if(r instanceof cl){let p=a.marks,g;for(;g=r.isInSet(p);)(d||(d=[])).push(g),p=g.removeFromSet(p)}else r?r.isInSet(a.marks)&&(d=[r]):d=a.marks;if(d&&d.length){let p=Math.min(c+a.nodeSize,t);for(let g=0;g<d.length;g++){let y=d[g],k;for(let v=0;v<o.length;v++){let w=o[v];w.step==l-1&&y.eq(o[v].style)&&(k=w)}k?(k.to=p,k.step=l):o.push({style:y,from:Math.max(c,e),to:p,step:l})}}}),o.forEach(a=>n.step(new ln(a.from,a.to,a.style)))}function dc(n,e,t,r=t.contentMatch,o=!0){let l=n.doc.nodeAt(e),a=[],c=e+1;for(let d=0;d<l.childCount;d++){let p=l.child(d),g=c+p.nodeSize,y=r.matchType(p.type);if(!y)a.push(new $e(c,g,V.empty));else{r=y;for(let k=0;k<p.marks.length;k++)t.allowsMarkType(p.marks[k].type)||n.step(new ln(c,g,p.marks[k]));if(o&&p.isText&&t.whitespace!="pre"){let k,v=/\r?\n|\r/g,w;for(;k=v.exec(p.text);)w||(w=new V(z.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),a.push(new $e(c+k.index,c+k.index+k[0].length,w))}}c=g}if(!r.validEnd){let d=r.fillBefore(z.empty,!0);n.replace(c,c,new V(d,0,0))}for(let d=a.length-1;d>=0;d--)n.step(a[d])}function h1(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Si(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let o=n.$from.node(r),l=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&o.canReplace(l,a,t))return r;if(r==0||o.type.spec.isolating||!h1(o,l,a))break}return null}function p1(n,e,t){let{$from:r,$to:o,depth:l}=e,a=r.before(l+1),c=o.after(l+1),d=a,p=c,g=z.empty,y=0;for(let w=l,C=!1;w>t;w--)C||r.index(w)>0?(C=!0,g=z.from(r.node(w).copy(g)),y++):d--;let k=z.empty,v=0;for(let w=l,C=!1;w>t;w--)C||o.after(w+1)<o.end(w)?(C=!0,k=z.from(o.node(w).copy(k)),v++):p++;n.step(new je(d,p,a,c,new V(g.append(k),y,v),g.size-y,!0))}function hc(n,e,t=null,r=n){let o=m1(n,e),l=o&&g1(r,e);return l?o.map(qh).concat({type:e,attrs:t}).concat(l.map(qh)):null}function qh(n){return{type:n,attrs:null}}function m1(n,e){let{parent:t,startIndex:r,endIndex:o}=n,l=t.contentMatchAt(r).findWrapping(e);if(!l)return null;let a=l.length?l[0]:e;return t.canReplaceWith(r,o,a)?l:null}function g1(n,e){let{parent:t,startIndex:r,endIndex:o}=n,l=t.child(r),a=e.contentMatch.findWrapping(l.type);if(!a)return null;let d=(a.length?a[a.length-1]:e).contentMatch;for(let p=r;d&&p<o;p++)d=d.matchType(t.child(p).type);return!d||!d.validEnd?null:a}function y1(n,e,t){let r=z.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let c=t[a].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=z.from(t[a].type.create(t[a].attrs,r))}let o=e.start,l=e.end;n.step(new je(o,l,o,l,new V(r,0,0),t.length,!0))}function k1(n,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=n.steps.length;n.doc.nodesBetween(e,t,(a,c)=>{let d=typeof o=="function"?o(a):o;if(a.isTextblock&&!a.hasMarkup(r,d)&&S1(n.doc,n.mapping.slice(l).map(c),r)){let p=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?p=!1:!v&&w&&(p=!0)}p===!1&&Cm(n,a,c,l),dc(n,n.mapping.slice(l).map(c,1),r,void 0,p===null);let g=n.mapping.slice(l),y=g.map(c,1),k=g.map(c+a.nodeSize,1);return n.step(new je(y,k,y+1,k-1,new V(z.from(r.create(d,null,a.marks)),0,0),1,!0)),p===!0&&xm(n,a,c,l),!1}})}function xm(n,e,t,r){e.forEach((o,l)=>{if(o.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(o.text);){let d=n.mapping.slice(r).map(t+1+l+a.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function Cm(n,e,t,r){e.forEach((o,l)=>{if(o.type==o.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+l);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function S1(n,e,t){let r=n.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function v1(n,e,t,r,o){let l=n.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let a=t.create(r,null,o||l.marks);if(l.isLeaf)return n.replaceWith(e,e+l.nodeSize,a);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new je(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new V(z.from(a),0,0),1,!0))}function ci(n,e,t=1,r){let o=n.resolve(e),l=o.depth-t,a=r&&r[r.length-1]||o.parent;if(l<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let p=o.depth-1,g=t-2;p>l;p--,g--){let y=o.node(p),k=o.index(p);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(k,y.childCount),w=r&&r[g+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let C=r&&r[g]||y;if(!y.canReplace(k+1,y.childCount)||!C.type.validContent(v))return!1}let c=o.indexAfter(l),d=r&&r[0];return o.node(l).canReplaceWith(c,c,d?d.type:o.node(l+1).type)}function w1(n,e,t=1,r){let o=n.doc.resolve(e),l=z.empty,a=z.empty;for(let c=o.depth,d=o.depth-t,p=t-1;c>d;c--,p--){l=z.from(o.node(c).copy(l));let g=r&&r[p];a=z.from(g?g.type.create(g.attrs,a):o.node(c).copy(a))}n.step(new $e(e,e,new V(l.append(a),t,t),!0))}function nr(n,e){let t=n.resolve(e),r=t.index();return Em(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function x1(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let o=0;o<e.childCount;o++){let l=e.child(o),a=l.type==r?n.type.schema.nodes.text:l.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(l.marks))return!1}return t.validEnd}function Em(n,e){return!!(n&&e&&!n.isLeaf&&x1(n,e))}function fl(n,e,t=-1){let r=n.resolve(e);for(let o=r.depth;;o--){let l,a,c=r.index(o);if(o==r.depth?(l=r.nodeBefore,a=r.nodeAfter):t>0?(l=r.node(o+1),c++,a=r.node(o).maybeChild(c)):(l=r.node(o).maybeChild(c-1),a=r.node(o+1)),l&&!l.isTextblock&&Em(l,a)&&r.node(o).canReplace(c,c+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function C1(n,e,t){let r=null,{linebreakReplacement:o}=n.doc.type.schema,l=n.doc.resolve(e-t),a=l.node().type;if(o&&a.inlineContent){let g=a.whitespace=="pre",y=!!a.contentMatch.matchType(o);g&&!y?r=!1:!g&&y&&(r=!0)}let c=n.steps.length;if(r===!1){let g=n.doc.resolve(e+t);Cm(n,g.node(),g.before(),c)}a.inlineContent&&dc(n,e+t-1,a,l.node().contentMatchAt(l.index()),r==null);let d=n.mapping.slice(c),p=d.map(e-t);if(n.step(new $e(p,d.map(e+t,-1),V.empty,!0)),r===!0){let g=n.doc.resolve(p);xm(n,g.node(),g.before(),n.steps.length)}return n}function E1(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let l=r.index(o);if(r.node(o).canReplaceWith(l,l,t))return r.before(o+1);if(l>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let l=r.indexAfter(o);if(r.node(o).canReplaceWith(l,l,t))return r.after(o+1);if(l<r.node(o).childCount)return null}return null}function Mm(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let l=0;l<t.openStart;l++)o=o.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let a=r.depth;a>=0;a--){let c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,d=r.index(a)+(c>0?1:0),p=r.node(a),g=!1;if(l==1)g=p.canReplace(d,d,o);else{let y=p.contentMatchAt(d).findWrapping(o.firstChild.type);g=y&&p.canReplaceWith(d,d,y[0])}if(g)return c==0?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function dl(n,e,t=e,r=V.empty){if(e==t&&!r.size)return null;let o=n.resolve(e),l=n.resolve(t);return Tm(o,l,r)?new $e(e,t,r):new M1(o,l,r).fit()}function Tm(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class M1{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=z.empty;for(let o=0;o<=e.depth;o++){let l=e.node(o);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=z.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let l=this.placed,a=r.depth,c=o.depth;for(;a&&c&&l.childCount==1;)l=l.firstChild.content,a--,c--;let d=new V(l,a,c);return e>-1?new je(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new $e(r.pos,o.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let l=t.firstChild;if(t.childCount>1&&(o=0),l.type.spec.isolating&&o<=r){e=r;break}t=l.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,l=null;r?(l=Eu(this.unplaced.content,r-1).firstChild,o=l.content):o=this.unplaced.content;let a=o.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:p}=this.frontier[c],g,y=null;if(t==1&&(a?p.matchType(a.type)||(y=p.fillBefore(z.from(a),!1)):l&&d.compatibleContent(l.type)))return{sliceDepth:r,frontierDepth:c,parent:l,inject:y};if(t==2&&a&&(g=p.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:c,parent:l,wrap:g};if(l&&p.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Eu(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new V(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Eu(e,t);if(o.childCount<=1&&t>0){let l=e.size-t<=t+o.size;this.unplaced=new V(as(e,t-1,1),t-1,l?t-1:r)}else this.unplaced=new V(as(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let C=0;C<l.length;C++)this.openFrontierNode(l[C]);let a=this.unplaced,c=r?r.content:a.content,d=a.openStart-e,p=0,g=[],{match:y,type:k}=this.frontier[t];if(o){for(let C=0;C<o.childCount;C++)g.push(o.child(C));y=y.matchFragment(o)}let v=c.size+e-(a.content.size-a.openEnd);for(;p<c.childCount;){let C=c.child(p),M=y.matchType(C.type);if(!M)break;p++,(p>1||d==0||C.content.size)&&(y=M,g.push(Nm(C.mark(k.allowedMarks(C.marks)),p==1?d:0,p==c.childCount?v:-1)))}let w=p==c.childCount;w||(v=-1),this.placed=us(this.placed,t,z.from(g)),this.frontier[t].match=y,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,M=c;C<v;C++){let b=M.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),M=b.content}this.unplaced=w?e==0?V.empty:new V(as(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new V(as(a.content,e,p),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Mu(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Mu(e,t,o,r,l);if(a){for(let c=t-1;c>=0;c--){let{match:d,type:p}=this.frontier[c],g=Mu(e,c,p,d,!0);if(!g||g.childCount)continue e}return{depth:t,fit:a,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=us(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),l=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,l)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=us(this.placed,this.depth,z.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(z.empty,!0);t.childCount&&(this.placed=us(this.placed,this.frontier.length,t))}}function as(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(as(n.firstChild.content,e-1,t)))}function us(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(us(n.lastChild.content,e-1,t)))}function Eu(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Nm(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Nm(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(z.empty,!0)))),n.copy(r)}function Mu(n,e,t,r,o){let l=n.node(e),a=o?n.indexAfter(e):n.index(e);if(a==l.childCount&&!t.compatibleContent(l.type))return null;let c=r.fillBefore(l.content,!0,a);return c&&!T1(t,l.content,a)?c:null}function T1(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function N1(n){return n.spec.defining||n.spec.definingForContent}function O1(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),l=n.doc.resolve(t);if(Tm(o,l,r))return n.step(new $e(e,t,r));let a=Dm(o,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let c=-(o.depth+1);a.unshift(c);for(let k=o.depth,v=o.pos-1;k>0;k--,v--){let w=o.node(k).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;a.indexOf(k)>-1?c=k:o.before(k)==v&&a.splice(1,0,-k)}let d=a.indexOf(c),p=[],g=r.openStart;for(let k=r.content,v=0;;v++){let w=k.firstChild;if(p.push(w),v==r.openStart)break;k=w.content}for(let k=g-1;k>=0;k--){let v=p[k],w=N1(v.type);if(w&&!v.sameMarkup(o.node(Math.abs(c)-1)))g=k;else if(w||!v.type.isTextblock)break}for(let k=r.openStart;k>=0;k--){let v=(k+g+1)%(r.openStart+1),w=p[v];if(w)for(let C=0;C<a.length;C++){let M=a[(C+d)%a.length],b=!0;M<0&&(b=!1,M=-M);let _=o.node(M-1),q=o.index(M-1);if(_.canReplaceWith(q,q,w.type,w.marks))return n.replace(o.before(M),b?l.after(M):t,new V(Om(r.content,0,r.openStart,v),v,r.openEnd))}}let y=n.steps.length;for(let k=a.length-1;k>=0&&(n.replace(e,t,r),!(n.steps.length>y));k--){let v=a[k];v<0||(e=o.before(v),t=l.after(v))}}function Om(n,e,t,r,o){if(e<t){let l=n.firstChild;n=n.replaceChild(0,l.copy(Om(l.content,e+1,t,r,l)))}if(e>r){let l=o.contentMatchAt(0),a=l.fillBefore(n).append(n);n=a.append(l.matchFragment(a).fillBefore(z.empty,!0))}return n}function D1(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=E1(n.doc,e,r.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new V(z.from(r),0,0))}function A1(n,e,t){let r=n.doc.resolve(e),o=n.doc.resolve(t),l=Dm(r,o);for(let a=0;a<l.length;a++){let c=l[a],d=a==l.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),o.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),o.indexAfter(c-1))))return n.delete(r.before(c),o.after(c))}for(let a=1;a<=r.depth&&a<=o.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&o.end(a)-t!=o.depth-a&&r.start(a-1)==o.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),o.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function Dm(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let o=r;o>=0;o--){let l=n.start(o);if(l<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(l==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==l-1)&&t.push(o)}return t}class fi extends nt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Re.fail("No node at attribute step's position");let r=Object.create(null);for(let l in t.attrs)r[l]=t.attrs[l];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return Re.fromReplace(e,this.pos,this.pos+1,new V(z.from(o),0,t.isLeaf?0:1))}getMap(){return Ot.empty}invert(e){return new fi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new fi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new fi(t.pos,t.attr,t.value)}}nt.jsonID("attr",fi);class gs extends nt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Re.ok(r)}getMap(){return Ot.empty}invert(e){return new gs(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gs(t.attr,t.value)}}nt.jsonID("docAttr",gs);let pi=class extends Error{};pi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};pi.prototype=Object.create(Error.prototype);pi.prototype.constructor=pi;pi.prototype.name="TransformError";class b1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ui}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new pi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=V.empty){let o=dl(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new V(z.from(r),0,0))}delete(e,t){return this.replace(e,t,V.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return O1(this,e,t,r),this}replaceRangeWith(e,t,r){return D1(this,e,t,r),this}deleteRange(e,t){return A1(this,e,t),this}lift(e,t){return p1(this,e,t),this}join(e,t=1){return C1(this,e,t),this}wrap(e,t){return y1(this,e,t),this}setBlockType(e,t=e,r,o=null){return k1(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return v1(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new fi(e,t,r)),this}setDocAttribute(e,t){return this.step(new gs(e,t)),this}addNodeMark(e,t){return this.step(new qn(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ke)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new hi(e,t)),this}split(e,t=1,r){return w1(this,e,t,r),this}addMark(e,t,r){return f1(this,e,t,r),this}removeMark(e,t,r){return d1(this,e,t,r),this}clearIncompatible(e,t,r){return dc(this,e,t,r),this}}const Tu=Object.create(null);class se{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new P1(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=V.empty){let r=t.content.lastChild,o=null;for(let c=0;c<t.openEnd;c++)o=r,r=r.lastChild;let l=e.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:d,$to:p}=a[c],g=e.mapping.slice(l);e.replaceRange(g.map(d.pos),g.map(p.pos),c?V.empty:t),c==0&&Yh(e,l,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],d=e.mapping.slice(r),p=d.map(a.pos),g=d.map(c.pos);l?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),Yh(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new ne(e):si(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let l=e.depth-1;l>=0;l--){let a=t<0?si(e.node(0),e.node(l),e.before(l+1),e.index(l),t,r):si(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Vt(e.node(0))}static atStart(e){return si(e,e,0,0,1)||new Vt(e)}static atEnd(e){return si(e,e,e.content.size,e.childCount,-1)||new Vt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Tu[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Tu)throw new RangeError("Duplicate use of selection JSON ID "+e);return Tu[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ne.between(this.$anchor,this.$head).getBookmark()}}se.prototype.visible=!0;class P1{constructor(e,t){this.$from=e,this.$to=t}}let Qh=!1;function Gh(n){!Qh&&!n.parent.inlineContent&&(Qh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ne extends se{constructor(e,t=e){Gh(e),Gh(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return se.near(r);let o=e.resolve(t.map(this.anchor));return new ne(o.parent.inlineContent?o:r,r)}replace(e,t=V.empty){if(super.replace(e,t),t==V.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ne&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ne(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let l=se.findFrom(t,r,!0)||se.findFrom(t,-r,!0);if(l)t=l.$head;else return se.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(se.findFrom(e,-r,!0)||se.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new ne(e,t)}}se.jsonID("text",ne);class hl{constructor(e,t){this.anchor=e,this.head=t}map(e){return new hl(e.map(this.anchor),e.map(this.head))}resolve(e){return ne.between(e.resolve(this.anchor),e.resolve(this.head))}}class X extends se{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),l=e.resolve(o);return r?se.near(l):new X(l)}content(){return new V(z.from(this.node),0,0)}eq(e){return e instanceof X&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new pc(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new X(e.resolve(t.anchor))}static create(e,t){return new X(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}X.prototype.visible=!1;se.jsonID("node",X);class pc{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new hl(r,r):new pc(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&X.isSelectable(r)?new X(t):se.near(t)}}class Vt extends se{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=V.empty){if(t==V.empty){e.delete(0,e.doc.content.size);let r=se.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Vt(e)}map(e){return new Vt(e)}eq(e){return e instanceof Vt}getBookmark(){return R1}}se.jsonID("all",Vt);const R1={map(){return this},resolve(n){return new Vt(n)}};function si(n,e,t,r,o,l=!1){if(e.inlineContent)return ne.create(n,t);for(let a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){let c=e.child(a);if(c.isAtom){if(!l&&X.isSelectable(c))return X.create(n,t-(o<0?c.nodeSize:0))}else{let d=si(n,c,t+o,o<0?c.childCount:0,o,l);if(d)return d}t+=c.nodeSize*o}return null}function Yh(n,e,t){let r=n.steps.length-1;if(r<e)return;let o=n.steps[r];if(!(o instanceof $e||o instanceof je))return;let l=n.mapping.maps[r],a;l.forEach((c,d,p,g)=>{a==null&&(a=g)}),n.setSelection(se.near(n.doc.resolve(a),t))}const Xh=1,Zh=2,ep=4;class I1 extends b1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Xh)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Xh)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Zh,this}ensureMarks(e){return ke.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Zh)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ke.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let l=this.storedMarks;if(!l){let a=this.doc.resolve(t);l=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,l)),this.selection.empty||this.setSelection(se.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ep,this}get scrolledIntoView(){return(this.updated&ep)>0}}function tp(n,e){return!e||!n?n:n.bind(e)}class cs{constructor(e,t,r){this.name=e,this.init=tp(t.init,r),this.apply=tp(t.apply,r)}}const z1=[new cs("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new cs("selection",{init(n,e){return n.selection||se.atStart(e.doc)},apply(n){return n.selection}}),new cs("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new cs("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Nu{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=z1.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new cs(r.key,r.spec.state,r))})}}class li{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let l=!1;for(let a=0;a<this.config.plugins.length;a++){let c=this.config.plugins[a];if(c.spec.appendTransaction){let d=o?o[a].n:0,p=o?o[a].state:this,g=d<t.length&&c.spec.appendTransaction.call(c,d?t.slice(d):t,p,r);if(g&&r.filterTransaction(g,a)){if(g.setMeta("appendedTransaction",e),!o){o=[];for(let y=0;y<this.config.plugins.length;y++)o.push(y<a?{state:r,n:t.length}:{state:this,n:0})}t.push(g),r=r.applyInner(g),l=!0}o&&(o[a]={state:r,n:t.length})}}if(!l)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new li(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let l=r[o];t[l.name]=l.apply(e,this[l.name],this,t)}return t}get tr(){return new I1(this)}static create(e){let t=new Nu(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new li(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new Nu(this.schema,e.plugins),r=t.fields,o=new li(t);for(let l=0;l<r.length;l++){let a=r[l].name;o[a]=this.hasOwnProperty(a)?this[a]:r[l].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],l=o.spec.state;l&&l.toJSON&&(t[r]=l.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Nu(e.schema,e.plugins),l=new li(o);return o.fields.forEach(a=>{if(a.name=="doc")l.doc=Gn.fromJSON(e.schema,t.doc);else if(a.name=="selection")l.selection=se.fromJSON(l.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let d=r[c],p=d.spec.state;if(d.key==a.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,c)){l[a.name]=p.fromJSON.call(d,e,t[c],l);return}}l[a.name]=a.init(e,l)}}),l}}function Am(n,e,t){for(let r in n){let o=n[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Am(o,e,{})),t[r]=o}return t}class wt{constructor(e){this.spec=e,this.props={},e.props&&Am(e.props,this,this.props),this.key=e.key?e.key.key:bm("plugin")}getState(e){return e[this.key]}}const Ou=Object.create(null);function bm(n){return n in Ou?n+"$"+ ++Ou[n]:(Ou[n]=0,n+"$")}class cn{constructor(e="key"){this.key=bm(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const qe=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ys=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Qu=null;const vn=function(n,e,t){let r=Qu||(Qu=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},L1=function(){Qu=null},Dr=function(n,e,t,r){return t&&(np(n,e,t,r,-1)||np(n,e,t,r,1))},B1=/^(img|br|input|textarea|hr)$/i;function np(n,e,t,r,o){for(;;){if(n==t&&e==r)return!0;if(e==(o<0?0:_t(n))){let l=n.parentNode;if(!l||l.nodeType!=1||Cs(n)||B1.test(n.nodeName)||n.contentEditable=="false")return!1;e=qe(n)+(o<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.contentEditable=="false")return!1;e=o<0?_t(n):0}else return!1}}function _t(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function _1(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=_t(n)}else if(n.parentNode&&!Cs(n))e=qe(n),n=n.parentNode;else return null}}function F1(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Cs(n))e=qe(n)+1,n=n.parentNode;else return null}}function V1(n,e,t){for(let r=e==0,o=e==_t(n);r||o;){if(n==t)return!0;let l=qe(n);if(n=n.parentNode,!n)return!1;r=r&&l==0,o=o&&l==_t(n)}}function Cs(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const pl=function(n){return n.focusNode&&Dr(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function kr(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function $1(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function j1(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(_t(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(_t(r.startContainer),r.startOffset)}}}const an=typeof navigator<"u"?navigator:null,rp=typeof document<"u"?document:null,rr=an&&an.userAgent||"",Gu=/Edge\/(\d+)/.exec(rr),Pm=/MSIE \d/.exec(rr),Yu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rr),St=!!(Pm||Yu||Gu),Xn=Pm?document.documentMode:Yu?+Yu[1]:Gu?+Gu[1]:0,Xt=!St&&/gecko\/(\d+)/i.test(rr);Xt&&+(/Firefox\/(\d+)/.exec(rr)||[0,0])[1];const Xu=!St&&/Chrome\/(\d+)/.exec(rr),tt=!!Xu,Rm=Xu?+Xu[1]:0,ot=!St&&!!an&&/Apple Computer/.test(an.vendor),mi=ot&&(/Mobile\/\w+/.test(rr)||!!an&&an.maxTouchPoints>2),Bt=mi||(an?/Mac/.test(an.platform):!1),H1=an?/Win/.test(an.platform):!1,wn=/Android \d/.test(rr),Es=!!rp&&"webkitFontSmoothing"in rp.documentElement.style,W1=Es?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function U1(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Sn(n,e){return typeof n=="number"?n:n[e]}function K1(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function ip(n,e,t){let r=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,l=n.dom.ownerDocument;for(let a=t||n.dom;a;a=ys(a)){if(a.nodeType!=1)continue;let c=a,d=c==l.body,p=d?U1(l):K1(c),g=0,y=0;if(e.top<p.top+Sn(r,"top")?y=-(p.top-e.top+Sn(o,"top")):e.bottom>p.bottom-Sn(r,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+Sn(o,"top")-p.top:e.bottom-p.bottom+Sn(o,"bottom")),e.left<p.left+Sn(r,"left")?g=-(p.left-e.left+Sn(o,"left")):e.right>p.right-Sn(r,"right")&&(g=e.right-p.right+Sn(o,"right")),g||y)if(d)l.defaultView.scrollBy(g,y);else{let k=c.scrollLeft,v=c.scrollTop;y&&(c.scrollTop+=y),g&&(c.scrollLeft+=g);let w=c.scrollLeft-k,C=c.scrollTop-v;e={left:e.left-w,top:e.top-C,right:e.right-w,bottom:e.bottom-C}}if(d||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function J1(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let l=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let c=n.root.elementFromPoint(l,a);if(!c||c==n.dom||!n.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=t-20){r=c,o=d.top;break}}return{refDOM:r,refTop:o,stack:Im(n.dom)}}function Im(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ys(r));return e}function q1({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;zm(t,r==0?0:r-e)}function zm(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:o,left:l}=n[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=l&&(r.scrollLeft=l)}}let ri=null;function Q1(n){if(n.setActive)return n.setActive();if(ri)return n.focus(ri);let e=Im(n);n.focus(ri==null?{get preventScroll(){return ri={preventScroll:!0},!0}}:void 0),ri||(ri=!1,zm(e,0))}function Lm(n,e){let t,r=2e8,o,l=0,a=e.top,c=e.top,d,p;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let k;if(g.nodeType==1)k=g.getClientRects();else if(g.nodeType==3)k=vn(g).getClientRects();else continue;for(let v=0;v<k.length;v++){let w=k[v];if(w.top<=a&&w.bottom>=c){a=Math.max(w.bottom,a),c=Math.min(w.top,c);let C=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(C<r){t=g,r=C,o=C&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,g.nodeType==1&&C&&(l=y+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=g,p={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(l=y+1)}}return!t&&d&&(t=d,o=p,r=0),t&&t.nodeType==3?G1(t,o):!t||r&&t.nodeType==1?{node:n,offset:l}:Lm(t,o)}function G1(n,e){let t=n.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(n,o+1),r.setStart(n,o);let l=Hn(r,1);if(l.top!=l.bottom&&mc(e,l))return{node:n,offset:o+(e.left>=(l.left+l.right)/2?1:0)}}return{node:n,offset:0}}function mc(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Y1(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function X1(n,e,t){let{node:r,offset:o}=Lm(e,t),l=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();l=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,o,l)}function Z1(n,e,t,r){let o=-1;for(let l=e,a=!1;l!=n.dom;){let c=n.docView.nearestDesc(l,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&(!a&&d.left>r.left||d.top>r.top?o=c.posBefore:(!a&&d.right<r.left||d.bottom<r.top)&&(o=c.posAfter),a=!0),!c.contentDOM&&o<0&&!c.node.isText))return(c.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;l=c.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function Bm(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),l=o;;){let a=n.childNodes[l];if(a.nodeType==1){let c=a.getClientRects();for(let d=0;d<c.length;d++){let p=c[d];if(mc(e,p))return Bm(a,e,p)}}if((l=(l+1)%r)==o)break}return n}function ek(n,e){let t=n.dom.ownerDocument,r,o=0,l=j1(t,e.left,e.top);l&&({node:r,offset:o}=l);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),c;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let p=n.dom.getBoundingClientRect();if(!mc(e,p)||(a=Bm(n.dom,e,p),!a))return null}if(ot)for(let p=a;r&&p;p=ys(p))p.draggable&&(r=void 0);if(a=Y1(a,e),r){if(Xt&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let g=r.childNodes[o],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&o++}let p;Es&&o&&r.nodeType==1&&(p=r.childNodes[o-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&o--,r==n.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(c=Z1(n,r,o,e))}c==null&&(c=X1(n,a,e));let d=n.docView.nearestDesc(a,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function sp(n){return n.top<n.bottom||n.left<n.right}function Hn(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(sp(r))return r}return Array.prototype.find.call(t,sp)||n.getBoundingClientRect()}const tk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function _m(n,e,t){let{node:r,offset:o,atom:l}=n.docView.domFromPos(e,t<0?-1:1),a=Es||Xt;if(r.nodeType==3)if(a&&(tk.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let d=Hn(vn(r,o,o),t);if(Xt&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let p=Hn(vn(r,o-1,o-1),-1);if(p.top==d.top){let g=Hn(vn(r,o,o+1),-1);if(g.top!=d.top)return ls(g,g.left<p.left)}}return d}else{let d=o,p=o,g=t<0?1:-1;return t<0&&!o?(p++,g=-1):t>=0&&o==r.nodeValue.length?(d--,g=1):t<0?d--:p++,ls(Hn(vn(r,d,p),g),g<0)}if(!n.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&o&&(t<0||o==_t(r))){let d=r.childNodes[o-1];if(d.nodeType==1)return Du(d.getBoundingClientRect(),!1)}if(l==null&&o<_t(r)){let d=r.childNodes[o];if(d.nodeType==1)return Du(d.getBoundingClientRect(),!0)}return Du(r.getBoundingClientRect(),t>=0)}if(l==null&&o&&(t<0||o==_t(r))){let d=r.childNodes[o-1],p=d.nodeType==3?vn(d,_t(d)-(a?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return ls(Hn(p,1),!1)}if(l==null&&o<_t(r)){let d=r.childNodes[o];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?vn(d,0,a?0:1):d.nodeType==1?d:null:null;if(p)return ls(Hn(p,-1),!0)}return ls(Hn(r.nodeType==3?vn(r):r,-t),t>=0)}function ls(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Du(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Fm(n,e,t){let r=n.state,o=n.root.activeElement;r!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),o!=n.dom&&o&&o.focus()}}function nk(n,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return Fm(n,e,()=>{let{node:l}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(l,!0);if(!c)break;if(c.node.isBlock){l=c.contentDOM||c.dom;break}l=c.dom.parentNode}let a=_m(n,o.pos,1);for(let c=l.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=vn(c,0,c.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let g=d[p];if(g.bottom>g.top+1&&(t=="up"?a.top-g.top>(g.bottom-a.top)*2:g.bottom-a.bottom>(a.bottom-g.top)*2))return!1}}return!0})}const rk=/[\u0590-\u08ac]/;function ik(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,l=!o,a=o==r.parent.content.size,c=n.domSelection();return c?!rk.test(r.parent.textContent)||!c.modify?t=="left"||t=="backward"?l:a:Fm(n,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),k=c.caretBidiLevel;c.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:C}=n.domSelectionRange(),M=w&&!v.contains(w.nodeType==1?w:w.parentNode)||d==w&&p==C;try{c.collapse(g,y),d&&(d!=g||p!=y)&&c.extend&&c.extend(d,p)}catch{}return k!=null&&(c.caretBidiLevel=k),M}):r.pos==r.start()||r.pos==r.end()}let op=null,lp=null,ap=!1;function sk(n,e,t){return op==e&&lp==t?ap:(op=e,lp=t,ap=t=="up"||t=="down"?nk(n,e,t):ik(n,e,t))}const $t=0,up=1,vr=2,un=3;class Ms{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=$t,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let l,a;if(e==this.contentDOM)l=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((a=l.pmViewDesc)&&a.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(a)+a.size:this.posAtStart}else{let l,a;if(e==this.contentDOM)l=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((a=l.pmViewDesc)&&a.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(a):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>qe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let l=e;;l=l.parentNode){if(l==this.dom){o=!1;break}if(l.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){o=!0;break}if(l.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let l=this.getDesc(o),a;if(l&&(!t||l.node))if(r&&(a=l.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return l}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let l=this.getDesc(o);if(l)return l.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],l=r+o.size;if(r==e&&l!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<l)return o.descAt(e-r-o.border);r=l}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let l=0;r<this.children.length;r++){let a=this.children[r],c=l+a.size;if(c>e||a instanceof $m){o=e-l;break}l=c}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let l;r&&!(l=this.children[r-1]).size&&l instanceof Vm&&l.side>=0;r--);if(t<=0){let l,a=!0;for(;l=r?this.children[r-1]:null,!(!l||l.dom.parentNode==this.contentDOM);r--,a=!1);return l&&t&&a&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?qe(l.dom)+1:0}}else{let l,a=!0;for(;l=r<this.children.length?this.children[r]:null,!(!l||l.dom.parentNode==this.contentDOM);r++,a=!1);return l&&a&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?qe(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,l=-1;for(let a=r,c=0;;c++){let d=this.children[c],p=a+d.size;if(o==-1&&e<=p){let g=a+d.border;if(e>=g&&t<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,g);e=a;for(let y=c;y>0;y--){let k=this.children[y-1];if(k.size&&k.dom.parentNode==this.contentDOM&&!k.emptyChildAt(1)){o=qe(k.dom)+1;break}e-=k.size}o==-1&&(o=0)}if(o>-1&&(p>t||c==this.children.length-1)){t=p;for(let g=c+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){l=qe(y.dom);break}t+=y.size}l==-1&&(l=this.contentDOM.childNodes.length);break}a=p}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let l=Math.min(e,t),a=Math.max(e,t);for(let v=0,w=0;v<this.children.length;v++){let C=this.children[v],M=w+C.size;if(l>w&&a<M)return C.setSelection(e-w-C.border,t-w-C.border,r,o);w=M}let c=this.domFromPos(e,e?-1:1),d=t==e?c:this.domFromPos(t,t?-1:1),p=r.root.getSelection(),g=r.domSelectionRange(),y=!1;if((Xt||ot)&&e==t){let{node:v,offset:w}=c;if(v.nodeType==3){if(y=!!(w&&v.nodeValue[w-1]==`
`),y&&w==v.nodeValue.length)for(let C=v,M;C;C=C.parentNode){if(M=C.nextSibling){M.nodeName=="BR"&&(c=d={node:M.parentNode,offset:qe(M)+1});break}let b=C.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let C=v.childNodes[w-1];y=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(Xt&&g.focusNode&&g.focusNode!=d.node&&g.focusNode.nodeType==1){let v=g.focusNode.childNodes[g.focusOffset];v&&v.contentEditable=="false"&&(o=!0)}if(!(o||y&&ot)&&Dr(c.node,c.offset,g.anchorNode,g.anchorOffset)&&Dr(d.node,d.offset,g.focusNode,g.focusOffset))return;let k=!1;if((p.extend||e==t)&&!y){p.collapse(c.node,c.offset);try{e!=t&&p.extend(d.node,d.offset),k=!0}catch{}}if(!k){if(e>t){let w=c;c=d,d=w}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(c.node,c.offset),p.removeAllRanges(),p.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let l=this.children[o],a=r+l.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let c=r+l.border,d=a-l.border;if(e>=c&&t<=d){this.dirty=e==r||t==a?vr:up,e==c&&t==d&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=un:l.markDirty(e-c,t-c);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?vr:un}r=a}this.dirty=vr}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?vr:up;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Vm extends Ms{constructor(e,t,r,o){let l,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)})),!t.type.spec.raw){if(a.nodeType!=1){let c=document.createElement("span");c.appendChild(a),a=c}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,l=this}matchesWidget(e){return this.dirty==$t&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ok extends Ms{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ar extends Ms{constructor(e,t,r,o,l){super(e,[],r,o),this.mark=t,this.spec=l}static create(e,t,r,o){let l=o.nodeViews[t.type.name],a=l&&l(t,o,r);return(!a||!a.dom)&&(a=br.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ar(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&un||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=un&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=$t){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=$t}}slice(e,t,r){let o=Ar.create(this.parent,this.mark,!0,r),l=this.children,a=this.size;t<a&&(l=ec(l,t,a,r)),e>0&&(l=ec(l,0,e,r));for(let c=0;c<l.length;c++)l[c].parent=o;return o.children=l,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Zn extends Ms{constructor(e,t,r,o,l,a,c,d,p){super(e,[],l,a),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=c}static create(e,t,r,o,l,a){let c=l.nodeViews[t.type.name],d,p=c&&c(t,l,()=>{if(!d)return a;if(d.parent)return d.parent.posBeforeChild(d)},r,o),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=br.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let k=g;return g=Wm(g,r,t),p?d=new lk(e,t,r,o,g,y||null,k,p,l,a+1):t.isText?new ml(e,t,r,o,g,k,l):new Zn(e,t,r,o,g,y||null,k,l,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>z.empty)}return e}matchesNode(e,t,r){return this.dirty==$t&&e.eq(this.node)&&tl(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,l=e.composing?this.localCompositionInfo(e,t):null,a=l&&l.pos>-1?l:null,c=l&&l.pos<0,d=new uk(this,a&&a.node,e);dk(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?d.syncToMarks(p.spec.marks,r,e):p.type.side>=0&&!y&&d.syncToMarks(g==this.node.childCount?ke.none:this.node.child(g).marks,r,e),d.placeWidget(p,e,o)},(p,g,y,k)=>{d.syncToMarks(p.marks,r,e);let v;d.findNodeMatch(p,g,y,k)||c&&e.state.selection.from>o&&e.state.selection.to<o+p.nodeSize&&(v=d.findIndexWithChild(l.node))>-1&&d.updateNodeAt(p,g,y,v,e)||d.updateNextNode(p,g,y,e,k,o)||d.addNode(p,g,y,e,o),o+=p.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==vr)&&(a&&this.protectLocalComposition(e,a),jm(this.contentDOM,this.children,e),mi&&hk(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ne)||r<t||o>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let a=l.nodeValue,c=pk(this.node.content,a,r-t,o-t);return c<0?null:{node:l,pos:c,text:a}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let l=t;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let a=new ok(this,l,t,o);e.input.compositionNodes.push(a),this.children=ec(this.children,r,r+o.length,e,a)}update(e,t,r,o){return this.dirty==un||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=$t}updateOuterDeco(e){if(tl(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Hm(this.dom,this.nodeDOM,Zu(this.outerDeco,this.node,t),Zu(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function cp(n,e,t,r,o){Wm(r,e,n);let l=new Zn(void 0,n,e,t,r,r,r,o,0);return l.contentDOM&&l.updateChildren(o,0),l}class ml extends Zn{constructor(e,t,r,o,l,a,c){super(e,t,r,o,l,null,a,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==un||this.dirty!=$t&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=$t||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=$t,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),l=document.createTextNode(o.text);return new ml(this.parent,o,this.outerDeco,this.innerDeco,l,l,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=un)}get domAtom(){return!1}isText(e){return this.node.text==e}}class $m extends Ms{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$t&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class lk extends Zn{constructor(e,t,r,o,l,a,c,d,p,g){super(e,t,r,o,l,a,c,p,g),this.spec=d}update(e,t,r,o){if(this.dirty==un)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,t,r);return l&&this.updateInner(e,t,r,o),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function jm(n,e,t){let r=n.firstChild,o=!1;for(let l=0;l<e.length;l++){let a=e[l],c=a.dom;if(c.parentNode==n){for(;c!=r;)r=fp(r),o=!0;r=r.nextSibling}else o=!0,n.insertBefore(c,r);if(a instanceof Ar){let d=r?r.previousSibling:n.lastChild;jm(a.contentDOM,a.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=fp(r),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const ds=function(n){n&&(this.nodeName=n)};ds.prototype=Object.create(null);const wr=[new ds];function Zu(n,e,t){if(n.length==0)return wr;let r=t?wr[0]:new ds,o=[r];for(let l=0;l<n.length;l++){let a=n[l].type.attrs;if(a){a.nodeName&&o.push(r=new ds(a.nodeName));for(let c in a){let d=a[c];d!=null&&(t&&o.length==1&&o.push(r=new ds(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+d:c=="style"?r.style=(r.style?r.style+";":"")+d:c!="nodeName"&&(r[c]=d))}}}return o}function Hm(n,e,t,r){if(t==wr&&r==wr)return e;let o=e;for(let l=0;l<r.length;l++){let a=r[l],c=t[l];if(l){let d;c&&c.nodeName==a.nodeName&&o!=n&&(d=o.parentNode)&&d.nodeName.toLowerCase()==a.nodeName||(d=document.createElement(a.nodeName),d.pmIsDeco=!0,d.appendChild(o),c=wr[0]),o=d}ak(o,c||wr[0],a)}return o}function ak(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let l=0;l<r.length;l++)o.indexOf(r[l])==-1&&n.classList.remove(r[l]);for(let l=0;l<o.length;l++)r.indexOf(o[l])==-1&&n.classList.add(o[l]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function Wm(n,e,t){return Hm(n,n,wr,Zu(e,t,n.nodeType!=1))}function tl(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function fp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class uk{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=ck(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,l=this.stack.length>>1,a=Math.min(l,e.length);for(;o<a&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=$t,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let p=this.top.children[d];if(p.matchesMark(e[l])&&!this.isLocked(p.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=Ar.create(this.top,e[l],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,r,o){let l=-1,a;if(o>=this.preMatch.index&&(a=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))l=this.top.children.indexOf(a,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let p=this.top.children[c];if(p.matchesNode(e,t,r)&&!this.preMatch.matched.has(p)){l=c;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,t,r,o,l){let a=this.top.children[o];return a.dirty==un&&a.dom==a.contentDOM&&(a.dirty=vr),a.update(e,t,r,l)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,l,a){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof Zn){let p=this.preMatch.matched.get(d);if(p!=null&&p!=l)return!1;let g=d.dom,y,k=this.isLocked(g)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=un&&tl(t,d.outerDeco));if(!k&&d.update(e,t,r,o))return this.destroyBetween(this.index,c),d.dom!=g&&(this.changed=!0),this.index++,!0;if(!k&&(y=this.recreateWrapper(d,e,t,r,o,a)))return this.destroyBetween(this.index,c),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=vr,y.updateChildren(o,a+1),y.dirty=$t),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,l,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!tl(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let c=Zn.create(this.top,t,r,o,l,a);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,t,r,o,l){let a=Zn.create(this.top,e,t,r,o,l);a.contentDOM&&a.updateChildren(o,l+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let l=new Vm(this.top,e,t,r);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ar;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ml)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ot||tt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new $m(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function ck(n,e){let t=e,r=t.children.length,o=n.childCount,l=new Map,a=[];e:for(;o>0;){let c;for(;;)if(r){let p=t.children[r-1];if(p instanceof Ar)t=p,r=p.children.length;else{c=p,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=c.node;if(d){if(d!=n.child(o-1))break;--o,l.set(c,o),a.push(c)}}return{index:o,matched:l,matches:a.reverse()}}function fk(n,e){return n.type.side-e.type.side}function dk(n,e,t,r){let o=e.locals(n),l=0;if(o.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);r(g,o,e.forChild(l,g),p),l+=g.nodeSize}return}let a=0,c=[],d=null;for(let p=0;;){let g,y;for(;a<o.length&&o[a].to==l;){let M=o[a++];M.widget&&(g?(y||(y=[g])).push(M):g=M)}if(g)if(y){y.sort(fk);for(let M=0;M<y.length;M++)t(y[M],p,!!d)}else t(g,p,!!d);let k,v;if(d)v=-1,k=d,d=null;else if(p<n.childCount)v=p,k=n.child(p++);else break;for(let M=0;M<c.length;M++)c[M].to<=l&&c.splice(M--,1);for(;a<o.length&&o[a].from<=l&&o[a].to>l;)c.push(o[a++]);let w=l+k.nodeSize;if(k.isText){let M=w;a<o.length&&o[a].from<M&&(M=o[a].from);for(let b=0;b<c.length;b++)c[b].to<M&&(M=c[b].to);M<w&&(d=k.cut(M-l),k=k.cut(0,M-l),w=M,v=-1)}else for(;a<o.length&&o[a].to<w;)a++;let C=k.isInline&&!k.isLeaf?c.filter(M=>!M.inline):c.slice();r(k,C,e.forChild(l,k),v),l=w}}function hk(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function pk(n,e,t,r){for(let o=0,l=0;o<n.childCount&&l<=r;){let a=n.child(o++),c=l;if(l+=a.nodeSize,!a.isText)continue;let d=a.text;for(;o<n.childCount;){let p=n.child(o++);if(l+=p.nodeSize,!p.isText)break;d+=p.text}if(l>=t){if(l>=r&&d.slice(r-e.length-c,r-c)==e)return r-e.length;let p=c<r?d.lastIndexOf(e,r-c-1):-1;if(p>=0&&p+e.length+c>=t)return c+p;if(t==r&&d.length>=r+e.length-c&&d.slice(r-c,r-c+e.length)==e)return r}}return-1}function ec(n,e,t,r,o){let l=[];for(let a=0,c=0;a<n.length;a++){let d=n[a],p=c,g=c+=d.size;p>=t||g<=e?l.push(d):(p<e&&l.push(d.slice(0,e-p,r)),o&&(l.push(o),o=void 0),g>t&&l.push(d.slice(t-p,d.size,r)))}return l}function gc(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),l=o&&o.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let c=r.resolve(a),d,p;if(pl(t)){for(d=a;o&&!o.node;)o=o.parent;let y=o.node;if(o&&y.isAtom&&X.isSelectable(y)&&o.parent&&!(y.isInline&&V1(t.focusNode,t.focusOffset,o.dom))){let k=o.posBefore;p=new X(a==k?c:r.resolve(k))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=a,k=a;for(let v=0;v<t.rangeCount;v++){let w=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),k=Math.max(k,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(y<0)return null;[d,a]=k==n.state.selection.anchor?[k,y]:[y,k],c=r.resolve(a)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let g=r.resolve(d);if(!p){let y=e=="pointer"||n.state.selection.head<c.pos&&!l?1:-1;p=yc(n,g,c,y)}return p}function Um(n){return n.editable?n.hasFocus():Jm(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function xn(n,e=!1){let t=n.state.selection;if(Km(n,t),!!Um(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&tt){let r=n.domSelectionRange(),o=n.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Dr(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)gk(n);else{let{anchor:r,head:o}=t,l,a;dp&&!(t instanceof ne)&&(t.$from.parent.inlineContent||(l=hp(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=hp(n,t.to))),n.docView.setSelection(r,o,n,e),dp&&(l&&pp(l),a&&pp(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&mk(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const dp=ot||tt&&Rm<63;function hp(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,l=r?t.childNodes[r-1]:null;if(ot&&o&&o.contentEditable=="false")return Au(o);if((!o||o.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(o)return Au(o);if(l)return Au(l)}}function Au(n){return n.contentEditable="true",ot&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function pp(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function mk(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Um(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function gk(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setStart(r.parentNode,qe(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&St&&Xn<=11&&(r.disabled=!0,r.disabled=!1)}function Km(n,e){if(e instanceof X){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(mp(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else mp(n)}function mp(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function yc(n,e,t,r){return n.someProp("createSelectionBetween",o=>o(n,e,t))||ne.between(e,t,r)}function gp(n){return n.editable&&!n.hasFocus()?!1:Jm(n)}function Jm(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function yk(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Dr(e.node,e.offset,t.anchorNode,t.anchorOffset)}function tc(n,e){let{$anchor:t,$head:r}=n.selection,o=e>0?t.max(r):t.min(r),l=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return l&&se.findFrom(l,e)}function Wn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function yp(n,e,t){let r=n.state.selection;if(r instanceof ne)if(t.indexOf("s")>-1){let{$head:o}=r,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let a=n.state.doc.resolve(o.pos+l.nodeSize*(e<0?-1:1));return Wn(n,new ne(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=tc(n.state,e);return o&&o instanceof X?Wn(n,o):!1}else if(!(Bt&&t.indexOf("m")>-1)){let o=r.$head,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,a;if(!l||l.isText)return!1;let c=e<0?o.pos-l.nodeSize:o.pos;return l.isAtom||(a=n.docView.descAt(c))&&!a.contentDOM?X.isSelectable(l)?Wn(n,new X(e<0?n.state.doc.resolve(o.pos-l.nodeSize):o)):Es?Wn(n,new ne(n.state.doc.resolve(e<0?c:c+l.nodeSize))):!1:!1}}else return!1;else{if(r instanceof X&&r.node.isInline)return Wn(n,new ne(e>0?r.$to:r.$from));{let o=tc(n.state,e);return o?Wn(n,o):!1}}}function nl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function hs(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function ii(n,e){return e<0?kk(n):Sk(n)}function kk(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,l,a=!1;for(Xt&&t.nodeType==1&&r<nl(t)&&hs(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let c=t.childNodes[r-1];if(hs(c,-1))o=t,l=--r;else if(c.nodeType==3)t=c,r=t.nodeValue.length;else break}}else{if(qm(t))break;{let c=t.previousSibling;for(;c&&hs(c,-1);)o=t.parentNode,l=qe(c),c=c.previousSibling;if(c)t=c,r=nl(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?nc(n,t,r):o&&nc(n,o,l)}function Sk(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=nl(t),l,a;for(;;)if(r<o){if(t.nodeType!=1)break;let c=t.childNodes[r];if(hs(c,1))l=t,a=++r;else break}else{if(qm(t))break;{let c=t.nextSibling;for(;c&&hs(c,1);)l=c.parentNode,a=qe(c)+1,c=c.nextSibling;if(c)t=c,r=0,o=nl(t);else{if(t=t.parentNode,t==n.dom)break;r=o=0}}}l&&nc(n,l,a)}function qm(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function vk(n,e){for(;n&&e==n.childNodes.length&&!Cs(n);)e=qe(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function wk(n,e){for(;n&&!e&&!Cs(n);)e=qe(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function nc(n,e,t){if(e.nodeType!=3){let l,a;(a=vk(e,t))?(e=a,t=0):(l=wk(e,t))&&(e=l,t=l.nodeValue.length)}let r=n.domSelection();if(!r)return;if(pl(r)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),r.removeAllRanges(),r.addRange(l)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&xn(n)},50)}function kp(n,e){let t=n.state.doc.resolve(e);if(!(tt||H1)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let l=n.coordsAtPos(e-1),a=(l.top+l.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(l.left-o.left)>1)return l.left<o.left?"ltr":"rtl"}if(e<t.end()){let l=n.coordsAtPos(e+1),a=(l.top+l.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(l.left-o.left)>1)return l.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Sp(n,e,t){let r=n.state.selection;if(r instanceof ne&&!r.empty||t.indexOf("s")>-1||Bt&&t.indexOf("m")>-1)return!1;let{$from:o,$to:l}=r;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=tc(n.state,e);if(a&&a instanceof X)return Wn(n,a)}if(!o.parent.inlineContent){let a=e<0?o:l,c=r instanceof Vt?se.near(a,e):se.findFrom(a,e);return c?Wn(n,c):!1}return!1}function vp(n,e){if(!(n.state.selection instanceof ne))return!0;let{$head:t,$anchor:r,empty:o}=n.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let a=n.state.tr;return e<0?a.delete(t.pos-l.nodeSize,t.pos):a.delete(t.pos,t.pos+l.nodeSize),n.dispatch(a),!0}return!1}function wp(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function xk(n){if(!ot||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;wp(n,r,"true"),setTimeout(()=>wp(n,r,"false"),20)}return!1}function Ck(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Ek(n,e){let t=e.keyCode,r=Ck(e);if(t==8||Bt&&t==72&&r=="c")return vp(n,-1)||ii(n,-1);if(t==46&&!e.shiftKey||Bt&&t==68&&r=="c")return vp(n,1)||ii(n,1);if(t==13||t==27)return!0;if(t==37||Bt&&t==66&&r=="c"){let o=t==37?kp(n,n.state.selection.from)=="ltr"?-1:1:-1;return yp(n,o,r)||ii(n,o)}else if(t==39||Bt&&t==70&&r=="c"){let o=t==39?kp(n,n.state.selection.from)=="ltr"?1:-1:1;return yp(n,o,r)||ii(n,o)}else{if(t==38||Bt&&t==80&&r=="c")return Sp(n,-1,r)||ii(n,-1);if(t==40||Bt&&t==78&&r=="c")return xk(n)||Sp(n,1,r)||ii(n,1);if(r==(Bt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Qm(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:o,openEnd:l}=e;for(;o>1&&l>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,l--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let a=n.someProp("clipboardSerializer")||br.fromSchema(n.state.schema),c=tg(),d=c.createElement("div");d.appendChild(a.serializeFragment(r,{document:c}));let p=d.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=eg[p.nodeName.toLowerCase()]);){for(let v=g.length-1;v>=0;v--){let w=c.createElement(g[v]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),y++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${o} ${l}${y?` -${y}`:""} ${JSON.stringify(t)}`);let k=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:k,slice:e}}function Gm(n,e,t,r,o){let l=o.parent.type.spec.code,a,c;if(!t&&!e)return null;let d=e&&(r||l||!t);if(d){if(n.someProp("transformPastedText",k=>{e=k(e,l||r,n)}),l)return e?new V(z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):V.empty;let y=n.someProp("clipboardTextParser",k=>k(e,o,r,n));if(y)c=y;else{let k=o.marks(),{schema:v}=n.state,w=br.fromSchema(v);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let M=a.appendChild(document.createElement("p"));C&&M.appendChild(w.serializeNode(v.text(C,k)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),a=Ok(t),Es&&Dk(a);let p=a&&a.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let k=a.firstChild;for(;k&&k.nodeType!=1;)k=k.nextSibling;if(!k)break;a=k}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||Yn.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(d||g),context:o,ruleFromNode(k){return k.nodeName=="BR"&&!k.nextSibling&&k.parentNode&&!Mk.test(k.parentNode.nodeName)?{ignore:!0}:null}})),g)c=Ak(xp(c,+g[1],+g[2]),g[4]);else if(c=V.maxOpen(Tk(c.content,o),!0),c.openStart||c.openEnd){let y=0,k=0;for(let v=c.content.firstChild;y<c.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=c.content.lastChild;k<c.openEnd&&!v.type.spec.isolating;k++,v=v.lastChild);c=xp(c,y,k)}return n.someProp("transformPasted",y=>{c=y(c,n)}),c}const Mk=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Tk(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),l,a=[];if(n.forEach(c=>{if(!a)return;let d=o.findWrapping(c.type),p;if(!d)return a=null;if(p=a.length&&l.length&&Xm(d,l,c,a[a.length-1],0))a[a.length-1]=p;else{a.length&&(a[a.length-1]=Zm(a[a.length-1],l.length));let g=Ym(c,d);a.push(g),o=o.matchType(g.type),l=d}}),a)return z.from(a)}return n}function Ym(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,z.from(n));return n}function Xm(n,e,t,r,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let l=Xm(n,e,t,r.lastChild,o+1);if(l)return r.copy(r.content.replaceChild(r.childCount-1,l));if(r.contentMatchAt(r.childCount).matchType(o==n.length-1?t.type:n[o+1]))return r.copy(r.content.append(z.from(Ym(t,n,o+1))))}}function Zm(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Zm(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(z.empty,!0);return n.copy(t.append(r))}function rc(n,e,t,r,o,l){let a=e<0?n.firstChild:n.lastChild,c=a.content;return n.childCount>1&&(l=0),o<r-1&&(c=rc(c,e,t,r,o+1,l)),o>=t&&(c=e<0?a.contentMatchAt(0).fillBefore(c,l<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(c))}function xp(n,e,t){return e<n.openStart&&(n=new V(rc(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new V(rc(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const eg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Cp=null;function tg(){return Cp||(Cp=document.implementation.createHTMLDocument("title"))}let bu=null;function Nk(n){let e=window.trustedTypes;return e?(bu||(bu=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),bu.createHTML(n)):n}function Ok(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=tg().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),o;if((o=r&&eg[r[1].toLowerCase()])&&(n=o.map(l=>"<"+l+">").join("")+n+o.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=Nk(n),o)for(let l=0;l<o.length;l++)t=t.querySelector(o[l])||t;return t}function Dk(n){let e=n.querySelectorAll(tt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Ak(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:o,openStart:l,openEnd:a}=n;for(let c=r.length-2;c>=0;c-=2){let d=t.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;o=z.from(d.create(r[c+1],o)),l++,a++}return new V(o,l,a)}const lt={},at={},bk={touchstart:!0,touchmove:!0};class Pk{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Rk(n){for(let e in lt){let t=lt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{zk(n,r)&&!kc(n,r)&&(n.editable||!(r.type in at))&&t(n,r)},bk[e]?{passive:!0}:void 0)}ot&&n.dom.addEventListener("input",()=>null),ic(n)}function Qn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Ik(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function ic(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>kc(n,r))})}function kc(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function zk(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Lk(n,e){!kc(n,e)&&lt[e.type]&&(n.editable||!(e.type in at))&&lt[e.type](n,e)}at.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!rg(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(wn&&tt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),mi&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",o=>o(n,kr(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Ek(n,t)?t.preventDefault():Qn(n,"key")};at.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};at.keypress=(n,e)=>{let t=e;if(rg(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Bt&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ne)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,o))&&n.dispatch(n.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function gl(n){return{left:n.clientX,top:n.clientY}}function Bk(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Sc(n,e,t,r,o){if(r==-1)return!1;let l=n.state.doc.resolve(r);for(let a=l.depth+1;a>0;a--)if(n.someProp(e,c=>a>l.depth?c(n,t,l.nodeAfter,l.before(a),o,!0):c(n,t,l.node(a),l.before(a),o,!1)))return!0;return!1}function di(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function _k(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&X.isSelectable(r)?(di(n,new X(t)),!0):!1}function Fk(n,e){if(e==-1)return!1;let t=n.state.selection,r,o;t instanceof X&&(r=t.node);let l=n.state.doc.resolve(e);for(let a=l.depth+1;a>0;a--){let c=a>l.depth?l.nodeAfter:l.node(a);if(X.isSelectable(c)){r&&t.$from.depth>0&&a>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?o=l.before(t.$from.depth):o=l.before(a);break}}return o!=null?(di(n,X.create(n.state.doc,o)),!0):!1}function Vk(n,e,t,r,o){return Sc(n,"handleClickOn",e,t,r)||n.someProp("handleClick",l=>l(n,e,r))||(o?Fk(n,t):_k(n,t))}function $k(n,e,t,r){return Sc(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",o=>o(n,e,r))}function jk(n,e,t,r){return Sc(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",o=>o(n,e,r))||Hk(n,t,r)}function Hk(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(di(n,ne.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let l=o.depth+1;l>0;l--){let a=l>o.depth?o.nodeAfter:o.node(l),c=o.before(l);if(a.inlineContent)di(n,ne.create(r,c+1,c+1+a.content.size));else if(X.isSelectable(a))di(n,X.create(r,c));else continue;return!0}}function vc(n){return rl(n)}const ng=Bt?"metaKey":"ctrlKey";lt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=vc(n),o=Date.now(),l="singleClick";o-n.input.lastClick.time<500&&Bk(t,n.input.lastClick)&&!t[ng]&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:l};let a=n.posAtCoords(gl(t));a&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Wk(n,a,t,!!r)):(l=="doubleClick"?$k:jk)(n,a.pos,a.inside,t)?t.preventDefault():Qn(n,"pointer"))};class Wk{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ng],this.allowDefault=r.shiftKey;let l,a;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),a=t.inside;else{let g=e.state.doc.resolve(t.pos);l=g.parent,a=g.depth?g.before():0}const c=o?null:r.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:p}=e.state;(r.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||p instanceof X&&p.from<=a&&p.to>a)&&(this.mightDrag={node:l,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gl(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qn(this.view,"pointer"):Vk(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ot&&this.mightDrag&&!this.mightDrag.node.isAtom||tt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(di(this.view,se.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qn(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}lt.touchstart=n=>{n.input.lastTouch=Date.now(),vc(n),Qn(n,"pointer")};lt.touchmove=n=>{n.input.lastTouch=Date.now(),Qn(n,"pointer")};lt.contextmenu=n=>vc(n);function rg(n,e){return n.composing?!0:ot&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Uk=wn?5e3:-1;at.compositionstart=at.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ne&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),rl(n,!0),n.markCursor=null;else if(rl(n,!e.selection.empty),Xt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let o=r.focusNode,l=r.focusOffset;o&&o.nodeType==1&&l!=0;){let a=l<0?o.lastChild:o.childNodes[l-1];if(!a)break;if(a.nodeType==3){let c=n.domSelection();c&&c.collapse(a,a.nodeValue.length);break}else o=a,l=-1}}n.input.composing=!0}ig(n,Uk)};at.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,ig(n,20))};function ig(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>rl(n),e))}function sg(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=Jk());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Kk(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=_1(e.focusNode,e.focusOffset),r=F1(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc,l=n.domObserver.lastChangedTextNode;if(t==l||r==l)return l;if(!o||!o.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function Jk(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function rl(n,e=!1){if(!(wn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),sg(n),e||n.docView&&n.docView.dirty){let t=gc(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function qk(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ks=St&&Xn<15||mi&&W1<604;lt.copy=at.cut=(n,e)=>{let t=e,r=n.state.selection,o=t.type=="cut";if(r.empty)return;let l=ks?null:t.clipboardData,a=r.content(),{dom:c,text:d}=Qm(n,a);l?(t.preventDefault(),l.clearData(),l.setData("text/html",c.innerHTML),l.setData("text/plain",d)):qk(n,c),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Qk(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Gk(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Ss(n,r.value,null,o,e):Ss(n,r.textContent,r.innerHTML,o,e)},50)}function Ss(n,e,t,r,o){let l=Gm(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,o,l||V.empty)))return!0;if(!l)return!1;let a=Qk(l),c=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(l);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function og(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}at.paste=(n,e)=>{let t=e;if(n.composing&&!wn)return;let r=ks?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Ss(n,og(r),r.getData("text/html"),o,t)?t.preventDefault():Gk(n,t)};class lg{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const ag=Bt?"altKey":"ctrlKey";lt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=n.state.selection,l=o.empty?null:n.posAtCoords(gl(t)),a;if(!(l&&l.pos>=o.from&&l.pos<=(o instanceof X?o.to-1:o.to))){if(r&&r.mightDrag)a=X.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(a=X.create(n.state.doc,y.posBefore))}}let c=(a||n.state.selection).content(),{dom:d,text:p,slice:g}=Qm(n,c);(!t.dataTransfer.files.length||!tt||Rm>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ks?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",ks||t.dataTransfer.setData("text/plain",p),n.dragging=new lg(g,!t[ag],a)};lt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};at.dragover=at.dragenter=(n,e)=>e.preventDefault();at.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(gl(t));if(!o)return;let l=n.state.doc.resolve(o.pos),a=r&&r.slice;a?n.someProp("transformPasted",w=>{a=w(a,n)}):a=Gm(n,og(t.dataTransfer),ks?null:t.dataTransfer.getData("text/html"),!1,l);let c=!!(r&&!t[ag]);if(n.someProp("handleDrop",w=>w(n,t,a||V.empty,c))){t.preventDefault();return}if(!a)return;t.preventDefault();let d=a?Mm(n.state.doc,l.pos,a):l.pos;d==null&&(d=l.pos);let p=n.state.tr;if(c){let{node:w}=r;w?w.replace(p):p.deleteSelection()}let g=p.mapping.map(d),y=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,k=p.doc;if(y?p.replaceRangeWith(g,g,a.content.firstChild):p.replaceRange(g,g,a),p.doc.eq(k))return;let v=p.doc.resolve(g);if(y&&X.isSelectable(a.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(a.content.firstChild))p.setSelection(new X(v));else{let w=p.mapping.map(d);p.mapping.maps[p.mapping.maps.length-1].forEach((C,M,b,_)=>w=_),p.setSelection(yc(n,v,p.doc.resolve(w)))}n.focus(),n.dispatch(p.setMeta("uiEvent","drop"))};lt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&xn(n)},20))};lt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};lt.beforeinput=(n,e)=>{if(tt&&wn&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,kr(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in at)lt[n]=at[n];function vs(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class il{constructor(e,t){this.toDOM=e,this.spec=t||Mr,this.side=this.spec.side||0}map(e,t,r,o){let{pos:l,deleted:a}=e.mapResult(t.from+o,this.side<0?-1:1);return a?null:new Ft(l-r,l-r,this)}valid(){return!0}eq(e){return this==e||e instanceof il&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class er{constructor(e,t){this.attrs=e,this.spec=t||Mr}map(e,t,r,o){let l=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return l>=a?null:new Ft(l,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof er&&vs(this.attrs,e.attrs)&&vs(this.spec,e.spec)}static is(e){return e.type instanceof er}destroy(){}}class wc{constructor(e,t){this.attrs=e,this.spec=t||Mr}map(e,t,r,o){let l=e.mapResult(t.from+o,1);if(l.deleted)return null;let a=e.mapResult(t.to+o,-1);return a.deleted||a.pos<=l.pos?null:new Ft(l.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),l;return o==t.from&&!(l=e.child(r)).isText&&o+l.nodeSize==t.to}eq(e){return this==e||e instanceof wc&&vs(this.attrs,e.attrs)&&vs(this.spec,e.spec)}destroy(){}}class Ft{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Ft(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Ft(e,e,new il(t,r))}static inline(e,t,r,o){return new Ft(e,t,new er(r,o))}static node(e,t,r,o){return new Ft(e,t,new wc(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof er}get widget(){return this.type instanceof il}}const oi=[],Mr={};class Le{constructor(e,t){this.local=e.length?e:oi,this.children=t.length?t:oi}static create(e,t){return t.length?sl(t,e,0,Mr):et}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,l){for(let a=0;a<this.local.length;a++){let c=this.local[a];c.from<=t&&c.to>=e&&(!l||l(c.spec))&&r.push(c.copy(c.from+o,c.to+o))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,r,o+c,l)}}map(e,t,r){return this==et||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Mr)}mapInner(e,t,r,o,l){let a;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,r,o);d&&d.type.valid(t,d)?(a||(a=[])).push(d):l.onRemove&&l.onRemove(this.local[c].spec)}return this.children.length?Yk(this.children,a||[],e,t,r,o,l):a?new Le(a.sort(Tr),oi):et}add(e,t){return t.length?this==et?Le.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,l=0;e.forEach((c,d)=>{let p=d+r,g;if(g=cg(t,c,p)){for(o||(o=this.children.slice());l<o.length&&o[l]<d;)l+=3;o[l]==d?o[l+2]=o[l+2].addInner(c,g,p+1):o.splice(l,0,d,d+c.nodeSize,sl(g,c,p+1,Mr)),l+=3}});let a=ug(l?fg(t):t,-r);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||a.splice(c--,1);return new Le(a.length?this.local.concat(a).sort(Tr):this.local,o||this.children)}remove(e){return e.length==0||this==et?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let l=0;l<r.length;l+=3){let a,c=r[l]+t,d=r[l+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>c&&y.to<d&&(e[g]=null,(a||(a=[])).push(y));if(!a)continue;r==this.children&&(r=this.children.slice());let p=r[l+2].removeInner(a,c+1);p!=et?r[l+2]=p:(r.splice(l,3),l-=3)}if(o.length){for(let l=0,a;l<e.length;l++)if(a=e[l])for(let c=0;c<o.length;c++)o[c].eq(a,t)&&(o==this.local&&(o=this.local.slice()),o.splice(c--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Le(o,r):et}forChild(e,t){if(this==et)return this;if(t.isLeaf)return Le.empty;let r,o;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let l=e+1,a=l+t.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<a&&d.to>l&&d.type instanceof er){let p=Math.max(l,d.from)-l,g=Math.min(a,d.to)-l;p<g&&(o||(o=[])).push(d.copy(p,g))}}if(o){let c=new Le(o.sort(Tr),oi);return r?new Kn([c,r]):c}return r||et}eq(e){if(this==e)return!0;if(!(e instanceof Le)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return xc(this.localsInner(e))}localsInner(e){if(this==et)return oi;if(e.inlineContent||!this.local.some(er.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof er||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Le.empty=new Le([],[]);Le.removeOverlap=xc;const et=Le.empty;class Kn{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,Mr));return Kn.from(r)}forChild(e,t){if(t.isLeaf)return Le.empty;let r=[];for(let o=0;o<this.members.length;o++){let l=this.members[o].forChild(e,t);l!=et&&(l instanceof Kn?r=r.concat(l.members):r.push(l))}return Kn.from(r)}eq(e){if(!(e instanceof Kn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let l=this.members[o].localsInner(e);if(l.length)if(!t)t=l;else{r&&(t=t.slice(),r=!1);for(let a=0;a<l.length;a++)t.push(l[a])}}return t?xc(r?t:t.sort(Tr)):oi}static from(e){switch(e.length){case 0:return et;case 1:return e[0];default:return new Kn(e.every(t=>t instanceof Le)?e:e.reduce((t,r)=>t.concat(r instanceof Le?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Yk(n,e,t,r,o,l,a){let c=n.slice();for(let p=0,g=l;p<t.maps.length;p++){let y=0;t.maps[p].forEach((k,v,w,C)=>{let M=C-w-(v-k);for(let b=0;b<c.length;b+=3){let _=c[b+1];if(_<0||k>_+g-y)continue;let q=c[b]+g-y;v>=q?c[b+1]=k<=q?-2:-1:k>=g&&M&&(c[b]+=M,c[b+1]+=M)}y+=M}),g=t.maps[p].map(g,-1)}let d=!1;for(let p=0;p<c.length;p+=3)if(c[p+1]<0){if(c[p+1]==-2){d=!0,c[p+1]=-1;continue}let g=t.map(n[p]+l),y=g-o;if(y<0||y>=r.content.size){d=!0;continue}let k=t.map(n[p+1]+l,-1),v=k-o,{index:w,offset:C}=r.content.findIndex(y),M=r.maybeChild(w);if(M&&C==y&&C+M.nodeSize==v){let b=c[p+2].mapInner(t,M,g+1,n[p]+l+1,a);b!=et?(c[p]=y,c[p+1]=v,c[p+2]=b):(c[p+1]=-2,d=!0)}else d=!0}if(d){let p=Xk(c,n,e,t,o,l,a),g=sl(p,r,0,a);e=g.local;for(let y=0;y<c.length;y+=3)c[y+1]<0&&(c.splice(y,3),y-=3);for(let y=0,k=0;y<g.children.length;y+=3){let v=g.children[y];for(;k<c.length&&c[k]<v;)k+=3;c.splice(k,0,g.children[y],g.children[y+1],g.children[y+2])}}return new Le(e.sort(Tr),c)}function ug(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let o=n[r];t.push(new Ft(o.from+e,o.to+e,o.type))}return t}function Xk(n,e,t,r,o,l,a){function c(d,p){for(let g=0;g<d.local.length;g++){let y=d.local[g].map(r,o,p);y?t.push(y):a.onRemove&&a.onRemove(d.local[g].spec)}for(let g=0;g<d.children.length;g+=3)c(d.children[g+2],d.children[g]+p+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&c(n[d+2],e[d]+l+1);return t}function cg(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let l=0,a;l<n.length;l++)(a=n[l])&&a.from>t&&a.to<r&&((o||(o=[])).push(a),n[l]=null);return o}function fg(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function sl(n,e,t,r){let o=[],l=!1;e.forEach((c,d)=>{let p=cg(n,c,d+t);if(p){l=!0;let g=sl(p,c,t+d+1,r);g!=et&&o.push(d,d+c.nodeSize,g)}});let a=ug(l?fg(n):n,-t).sort(Tr);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||(r.onRemove&&r.onRemove(a[c].spec),a.splice(c--,1));return a.length||o.length?new Le(a,o):et}function Tr(n,e){return n.from-e.from||n.to-e.to}function xc(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let l=e[o];if(l.from==r.from){l.to!=r.to&&(e==n&&(e=n.slice()),e[o]=l.copy(l.from,r.to),Ep(e,o+1,l.copy(r.to,l.to)));continue}else{l.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,l.from),Ep(e,o,r.copy(l.from,r.to)));break}}}return e}function Ep(n,e,t){for(;e<n.length&&Tr(t,n[e])>0;)e++;n.splice(e,0,t)}function Pu(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=et&&e.push(r)}),n.cursorWrapper&&e.push(Le.create(n.state.doc,[n.cursorWrapper.deco])),Kn.from(e)}const Zk={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},eS=St&&Xn<=11;class tS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class nS{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tS,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);St&&Xn<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),eS&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Zk)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gp(this.view)){if(this.suppressingSelectionUpdates)return xn(this.view);if(St&&Xn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Dr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let l=e.focusNode;l;l=ys(l))t.add(l);for(let l=e.anchorNode;l;l=ys(l))if(t.has(l)){r=l;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&gp(e)&&!this.ignoreSelectionChange(r),l=-1,a=-1,c=!1,d=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],d);y&&(l=l<0?y.from:Math.min(y.from,l),a=a<0?y.to:Math.max(y.to,a),y.typeOver&&(c=!0))}if(Xt&&d.length){let g=d.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,k]=g;y.parentNode&&y.parentNode.parentNode==k.parentNode?k.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let k of g){let v=k.parentNode;v&&v.nodeName=="LI"&&(!y||sS(e,y)!=v)&&k.remove()}}}let p=null;l<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&pl(r)&&(p=gc(e))&&p.eq(se.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xn(e),this.currentSelection.set(r),e.scrollToSelection()):(l>-1||o)&&(l>-1&&(e.docView.markDirty(l,a),rS(e)),this.handleDOMChange(l,a,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||xn(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,l=e.nextSibling;if(St&&Xn<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:k}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y),(!k||Array.prototype.indexOf.call(e.addedNodes,k)<0)&&(l=k)}let a=o&&o.parentNode==e.target?qe(o)+1:0,c=r.localPosFromDOM(e.target,a,-1),d=l&&l.parentNode==e.target?qe(l):e.target.childNodes.length,p=r.localPosFromDOM(e.target,d,1);return{from:c,to:p}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Mp=new WeakMap,Tp=!1;function rS(n){if(!Mp.has(n)&&(Mp.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Xt,Tp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Tp=!0}}function Np(n,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,l=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Dr(a.node,a.offset,o,l)&&([t,r,o,l]=[o,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:l}}function iS(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return Np(n,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Np(n,t):null}function sS(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function oS(n,e,t){let{node:r,fromOffset:o,toOffset:l,from:a,to:c}=n.docView.parseRange(e,t),d=n.domSelectionRange(),p,g=d.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:d.anchorOffset}],pl(d)||p.push({node:d.focusNode,offset:d.focusOffset})),tt&&n.input.lastKeyCode===8)for(let M=l;M>o;M--){let b=r.childNodes[M-1],_=b.pmViewDesc;if(b.nodeName=="BR"&&!_){l=M;break}if(!_||_.size)break}let y=n.state.doc,k=n.someProp("domParser")||Yn.fromSchema(n.state.schema),v=y.resolve(a),w=null,C=k.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:o,to:l,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:lS,context:v});if(p&&p[0].pos!=null){let M=p[0].pos,b=p[1]&&p[1].pos;b==null&&(b=M),w={anchor:M+a,head:b+a}}return{doc:C,sel:w,from:a,to:c}}function lS(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(ot&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||ot&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const aS=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function uS(n,e,t,r,o){let l=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let ie=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Be=gc(n,ie);if(Be&&!n.state.selection.eq(Be)){if(tt&&wn&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",At=>At(n,kr(13,"Enter"))))return;let Dt=n.state.tr.setSelection(Be);ie=="pointer"?Dt.setMeta("pointer",!0):ie=="key"&&Dt.scrollIntoView(),l&&Dt.setMeta("composition",l),n.dispatch(Dt)}return}let a=n.state.doc.resolve(e),c=a.sharedDepth(t);e=a.before(c+1),t=n.state.doc.resolve(t).after(c+1);let d=n.state.selection,p=oS(n,e,t),g=n.state.doc,y=g.slice(p.from,p.to),k,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(k=n.state.selection.to,v="end"):(k=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let w=dS(y.content,p.doc.content,p.from,k,v);if(w&&n.input.domChangeCount++,(mi&&n.input.lastIOSEnter>Date.now()-225||wn)&&o.some(ie=>ie.nodeType==1&&!aS.test(ie.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",ie=>ie(n,kr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof ne&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let ie=Op(n,n.state.doc,p.sel);if(ie&&!ie.eq(n.state.selection)){let Be=n.state.tr.setSelection(ie);l&&Be.setMeta("composition",l),n.dispatch(Be)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof ne&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),St&&Xn<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>p.from&&p.doc.textBetween(w.start-p.from-1,w.start-p.from+1)==" "&&(w.start--,w.endA--,w.endB--);let C=p.doc.resolveNoCache(w.start-p.from),M=p.doc.resolveNoCache(w.endB-p.from),b=g.resolve(w.start),_=C.sameParent(M)&&C.parent.inlineContent&&b.end()>=w.endA,q;if((mi&&n.input.lastIOSEnter>Date.now()-225&&(!_||o.some(ie=>ie.nodeName=="DIV"||ie.nodeName=="P"))||!_&&C.pos<p.doc.content.size&&!C.sameParent(M)&&(q=se.findFrom(p.doc.resolve(C.pos+1),1,!0))&&q.head==M.pos)&&n.someProp("handleKeyDown",ie=>ie(n,kr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&fS(g,w.start,w.endA,C,M)&&n.someProp("handleKeyDown",ie=>ie(n,kr(8,"Backspace")))){wn&&tt&&n.domObserver.suppressSelectionUpdates();return}tt&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),wn&&!_&&C.start()!=M.start()&&M.parentOffset==0&&C.depth==M.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==w.endA&&(w.endB-=2,M=p.doc.resolveNoCache(w.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(ie){return ie(n,kr(13,"Enter"))})},20));let ee=w.start,re=w.endA,Q,ce,me;if(_){if(C.pos==M.pos)St&&Xn<=11&&C.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>xn(n),20)),Q=n.state.tr.delete(ee,re),ce=g.resolve(w.start).marksAcross(g.resolve(w.endA));else if(w.endA==w.endB&&(me=cS(C.parent.content.cut(C.parentOffset,M.parentOffset),b.parent.content.cut(b.parentOffset,w.endA-b.start()))))Q=n.state.tr,me.type=="add"?Q.addMark(ee,re,me.mark):Q.removeMark(ee,re,me.mark);else if(C.parent.child(C.index()).isText&&C.index()==M.index()-(M.textOffset?0:1)){let ie=C.parent.textBetween(C.parentOffset,M.parentOffset);if(n.someProp("handleTextInput",Be=>Be(n,ee,re,ie)))return;Q=n.state.tr.insertText(ie,ee,re)}}if(Q||(Q=n.state.tr.replace(ee,re,p.doc.slice(w.start-p.from,w.endB-p.from))),p.sel){let ie=Op(n,Q.doc,p.sel);ie&&!(tt&&n.composing&&ie.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(ie.head==ee||ie.head==Q.mapping.map(re)-1)||St&&ie.empty&&ie.head==ee)&&Q.setSelection(ie)}ce&&Q.ensureMarks(ce),l&&Q.setMeta("composition",l),n.dispatch(Q.scrollIntoView())}function Op(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:yc(n,e.resolve(t.anchor),e.resolve(t.head))}function cS(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,o=t,l=r,a,c,d;for(let g=0;g<r.length;g++)o=r[g].removeFromSet(o);for(let g=0;g<t.length;g++)l=t[g].removeFromSet(l);if(o.length==1&&l.length==0)c=o[0],a="add",d=g=>g.mark(c.addToSet(g.marks));else if(o.length==0&&l.length==1)c=l[0],a="remove",d=g=>g.mark(c.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(d(e.child(g)));if(z.from(p).eq(n))return{mark:c,type:a}}function fS(n,e,t,r,o){if(t-e<=o.pos-r.pos||Ru(r,!0,!1)<o.pos)return!1;let l=n.resolve(e);if(!r.parent.isTextblock){let c=l.nodeAfter;return c!=null&&t==e+c.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let a=n.resolve(Ru(l,!0,!0));return!a.parent.isTextblock||a.pos>t||Ru(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Ru(n,e,t){let r=n.depth,o=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,o++,e=!1;if(t){let l=n.node(r).maybeChild(n.indexAfter(r));for(;l&&!l.isLeaf;)l=l.firstChild,o++}return o}function dS(n,e,t,r,o){let l=n.findDiffStart(e,t);if(l==null)return null;let{a,b:c}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let d=Math.max(0,l-Math.min(a,c));r-=a+d-l}if(a<l&&n.size<e.size){let d=r<=l&&r>=a?l-r:0;l-=d,l&&l<e.size&&Dp(e.textBetween(l-1,l+1))&&(l+=d?1:-1),c=l+(c-a),a=l}else if(c<l){let d=r<=l&&r>=c?l-r:0;l-=d,l&&l<n.size&&Dp(n.textBetween(l-1,l+1))&&(l+=d?1:-1),a=l+(a-c),c=l}return{start:l,endA:a,endB:c}}function Dp(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class hS{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Pk,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ip),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Pp(this),bp(this),this.nodeViews=Rp(this),this.docView=cp(this.state.doc,Ap(this),Pu(this),this.dom,this),this.domObserver=new nS(this,(r,o,l,a)=>uS(this,r,o,l,a)),this.domObserver.start(),Rk(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ic(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ip),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,l=!1,a=!1;e.storedMarks&&this.composing&&(sg(this),a=!0),this.state=e;let c=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=Rp(this);mS(v,this.nodeViews)&&(this.nodeViews=v,l=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&ic(this),this.editable=Pp(this),bp(this);let d=Pu(this),p=Ap(this),g=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",y=l||!this.docView.matchesNode(e.doc,p,d);(y||!e.selection.eq(o.selection))&&(a=!0);let k=g=="preserve"&&a&&this.dom.style.overflowAnchor==null&&J1(this);if(a){this.domObserver.stop();let v=y&&(St||tt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&pS(o.selection,e.selection);if(y){let w=tt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Kk(this)),(l||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=cp(e.doc,p,d,this.dom,this)),w&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&yk(this))?xn(this,v):(Km(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():k&&q1(k)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof X){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ip(this,t.getBoundingClientRect(),e)}else ip(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let l=r.from+(this.state.doc.content.size-t.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==r.node&&(o=l)}this.dragging=new lg(e.slice,e.move,o<0?void 0:X.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let a=0;a<this.directPlugins.length;a++){let c=this.directPlugins[a].props[e];if(c!=null&&(o=t?t(c):c))return o}let l=this.state.plugins;if(l)for(let a=0;a<l.length;a++){let c=l[a].props[e];if(c!=null&&(o=t?t(c):c))return o}}hasFocus(){if(St){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Q1(this.dom),xn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return ek(this,e)}coordsAtPos(e,t=1){return _m(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return sk(this,t||this.state,e)}pasteHTML(e,t){return Ss(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ss(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Ik(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Pu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,L1())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Lk(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?ot&&this.root.nodeType===11&&$1(this.dom.ownerDocument)==this.dom&&iS(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Ap(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Ft.node(0,n.state.doc.content.size,e)]}function bp(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Ft.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Pp(n){return!n.someProp("editable",e=>e(n.state)===!1)}function pS(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Rp(n){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function mS(n,e){let t=0,r=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function Ip(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var tr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ol={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gS=typeof navigator<"u"&&/Mac/.test(navigator.platform),yS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qe=0;Qe<10;Qe++)tr[48+Qe]=tr[96+Qe]=String(Qe);for(var Qe=1;Qe<=24;Qe++)tr[Qe+111]="F"+Qe;for(var Qe=65;Qe<=90;Qe++)tr[Qe]=String.fromCharCode(Qe+32),ol[Qe]=String.fromCharCode(Qe);for(var Iu in tr)ol.hasOwnProperty(Iu)||(ol[Iu]=tr[Iu]);function kS(n){var e=gS&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||yS&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ol:tr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const SS=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function vS(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,l,a;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))SS?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),a&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function wS(n){let e=Object.create(null);for(let t in n)e[vS(t)]=n[t];return e}function zu(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function xS(n){return new wt({props:{handleKeyDown:dg(n)}})}function dg(n){let e=wS(n);return function(t,r){let o=kS(r),l,a=e[zu(o,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let c=e[zu(o,r,!1)];if(c&&c(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(l=tr[r.keyCode])&&l!=o){let c=e[zu(l,r)];if(c&&c(t.state,t.dispatch,t))return!0}}return!1}}const CS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function hg(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const ES=(n,e,t)=>{let r=hg(n,t);if(!r)return!1;let o=Cc(r);if(!o){let a=r.blockRange(),c=a&&Si(a);return c==null?!1:(e&&e(n.tr.lift(a,c).scrollIntoView()),!0)}let l=o.nodeBefore;if(yg(n,o,e,-1))return!0;if(r.parent.content.size==0&&(gi(l,"end")||X.isSelectable(l)))for(let a=r.depth;;a--){let c=dl(n.doc,r.before(a),r.after(a),V.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=n.tr.step(c);d.setSelection(gi(l,"end")?se.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):X.create(d.doc,o.pos-l.nodeSize)),e(d.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return l.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0):!1},MS=(n,e,t)=>{let r=hg(n,t);if(!r)return!1;let o=Cc(r);return o?pg(n,o,e):!1},TS=(n,e,t)=>{let r=mg(n,t);if(!r)return!1;let o=Ec(r);return o?pg(n,o,e):!1};function pg(n,e,t){let r=e.nodeBefore,o=r,l=e.pos-1;for(;!o.isTextblock;l--){if(o.type.spec.isolating)return!1;let g=o.lastChild;if(!g)return!1;o=g}let a=e.nodeAfter,c=a,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let g=c.firstChild;if(!g)return!1;c=g}let p=dl(n.doc,l,d,V.empty);if(!p||p.from!=l||p instanceof $e&&p.slice.size>=d-l)return!1;if(t){let g=n.tr.step(p);g.setSelection(ne.create(g.doc,l)),t(g.scrollIntoView())}return!0}function gi(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const NS=(n,e,t)=>{let{$head:r,empty:o}=n.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;l=Cc(r)}let a=l&&l.nodeBefore;return!a||!X.isSelectable(a)?!1:(e&&e(n.tr.setSelection(X.create(n.doc,l.pos-a.nodeSize)).scrollIntoView()),!0)};function Cc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function mg(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const OS=(n,e,t)=>{let r=mg(n,t);if(!r)return!1;let o=Ec(r);if(!o)return!1;let l=o.nodeAfter;if(yg(n,o,e,1))return!0;if(r.parent.content.size==0&&(gi(l,"start")||X.isSelectable(l))){let a=dl(n.doc,r.before(),r.after(),V.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=n.tr.step(a);c.setSelection(gi(l,"start")?se.findFrom(c.doc.resolve(c.mapping.map(o.pos)),1):X.create(c.doc,c.mapping.map(o.pos))),e(c.scrollIntoView())}return!0}}return l.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0):!1},DS=(n,e,t)=>{let{$head:r,empty:o}=n.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;l=Ec(r)}let a=l&&l.nodeAfter;return!a||!X.isSelectable(a)?!1:(e&&e(n.tr.setSelection(X.create(n.doc,l.pos)).scrollIntoView()),!0)};function Ec(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const AS=(n,e)=>{let t=n.selection,r=t instanceof X,o;if(r){if(t.node.isTextblock||!nr(n.doc,t.from))return!1;o=t.from}else if(o=fl(n.doc,t.from,-1),o==null)return!1;if(e){let l=n.tr.join(o);r&&l.setSelection(X.create(l.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},bS=(n,e)=>{let t=n.selection,r;if(t instanceof X){if(t.node.isTextblock||!nr(n.doc,t.to))return!1;r=t.to}else if(r=fl(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},PS=(n,e)=>{let{$from:t,$to:r}=n.selection,o=t.blockRange(r),l=o&&Si(o);return l==null?!1:(e&&e(n.tr.lift(o,l).scrollIntoView()),!0)},RS=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function gg(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const IS=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),l=t.indexAfter(-1),a=gg(o.contentMatchAt(l));if(!a||!o.canReplaceWith(l,l,a))return!1;if(e){let c=t.after(),d=n.tr.replaceWith(c,c,a.createAndFill());d.setSelection(se.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},zS=(n,e)=>{let t=n.selection,{$from:r,$to:o}=t;if(t instanceof Vt||r.parent.inlineContent||o.parent.inlineContent)return!1;let l=gg(o.parent.contentMatchAt(o.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=n.tr.insert(a,l.createAndFill());c.setSelection(ne.create(c.doc,a+1)),e(c.scrollIntoView())}return!0},LS=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(ci(n.doc,l))return e&&e(n.tr.split(l).scrollIntoView()),!0}let r=t.blockRange(),o=r&&Si(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)},BS=(n,e)=>{let{$from:t,to:r}=n.selection,o,l=t.sharedDepth(r);return l==0?!1:(o=t.before(l),e&&e(n.tr.setSelection(X.create(n.doc,o))),!0)};function _S(n,e,t){let r=e.nodeBefore,o=e.nodeAfter,l=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(l-1,l)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(o.isTextblock||nr(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function yg(n,e,t,r){let o=e.nodeBefore,l=e.nodeAfter,a,c,d=o.type.spec.isolating||l.type.spec.isolating;if(!d&&_S(n,e,t))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(a=(c=o.contentMatchAt(o.childCount)).findWrapping(l.type))&&c.matchType(a[0]||l.type).validEnd){if(t){let v=e.pos+l.nodeSize,w=z.empty;for(let b=a.length-1;b>=0;b--)w=z.from(a[b].create(null,w));w=z.from(o.copy(w));let C=n.tr.step(new je(e.pos-1,v,e.pos,v,new V(w,1,0),a.length,!0)),M=C.doc.resolve(v+2*a.length);M.nodeAfter&&M.nodeAfter.type==o.type&&nr(C.doc,M.pos)&&C.join(M.pos),t(C.scrollIntoView())}return!0}let g=l.type.spec.isolating||r>0&&d?null:se.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),k=y&&Si(y);if(k!=null&&k>=e.depth)return t&&t(n.tr.lift(y,k).scrollIntoView()),!0;if(p&&gi(l,"start",!0)&&gi(o,"end")){let v=o,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let C=l,M=1;for(;!C.isTextblock;C=C.firstChild)M++;if(v.canReplace(v.childCount,v.childCount,C.content)){if(t){let b=z.empty;for(let q=w.length-1;q>=0;q--)b=z.from(w[q].copy(b));let _=n.tr.step(new je(e.pos-w.length,e.pos+l.nodeSize,e.pos+M,e.pos+l.nodeSize-M,new V(b,w.length,0),0,!0));t(_.scrollIntoView())}return!0}}return!1}function kg(n){return function(e,t){let r=e.selection,o=n<0?r.$from:r.$to,l=o.depth;for(;o.node(l).isInline;){if(!l)return!1;l--}return o.node(l).isTextblock?(t&&t(e.tr.setSelection(ne.create(e.doc,n<0?o.start(l):o.end(l)))),!0):!1}}const FS=kg(-1),VS=kg(1);function $S(n,e=null){return function(t,r){let{$from:o,$to:l}=t.selection,a=o.blockRange(l),c=a&&hc(a,n,e);return c?(r&&r(t.tr.wrap(a,c).scrollIntoView()),!0):!1}}function zp(n,e=null){return function(t,r){let o=!1;for(let l=0;l<t.selection.ranges.length&&!o;l++){let{$from:{pos:a},$to:{pos:c}}=t.selection.ranges[l];t.doc.nodesBetween(a,c,(d,p)=>{if(o)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)o=!0;else{let g=t.doc.resolve(p),y=g.index();o=g.parent.canReplaceWith(y,y+1,n)}})}if(!o)return!1;if(r){let l=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:d}}=t.selection.ranges[a];l.setBlockType(c,d,n,e)}r(l.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function jS(n,e=null){return function(t,r){let{$from:o,$to:l}=t.selection,a=o.blockRange(l);if(!a)return!1;let c=r?t.tr:null;return HS(c,a,n,e)?(r&&r(c.scrollIntoView()),!0):!1}}function HS(n,e,t,r=null){let o=!1,l=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=a.resolve(e.start-2);l=new Zo(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Zo(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let c=hc(l,t,r,e);return c?(n&&WS(n,e,c,o,t),!0):!1}function WS(n,e,t,r,o){let l=z.empty;for(let g=t.length-1;g>=0;g--)l=z.from(t[g].type.create(t[g].attrs,l));n.step(new je(e.start-(r?2:0),e.end,e.start,e.end,new V(l,0,0),t.length,!0));let a=0;for(let g=0;g<t.length;g++)t[g].type==o&&(a=g+1);let c=t.length-a,d=e.start+t.length-(r?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,k=!0;g<y;g++,k=!1)!k&&ci(n.doc,d,c)&&(n.split(d,c),d+=2*c),d+=p.child(g).nodeSize;return n}function US(n){return function(e,t){let{$from:r,$to:o}=e.selection,l=r.blockRange(o,a=>a.childCount>0&&a.firstChild.type==n);return l?t?r.node(l.depth-1).type==n?KS(e,t,n,l):JS(e,t,l):!0:!1}}function KS(n,e,t,r){let o=n.tr,l=r.end,a=r.$to.end(r.depth);l<a&&(o.step(new je(l-1,a,l,a,new V(z.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Zo(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));const c=Si(r);if(c==null)return!1;o.lift(r,c);let d=o.mapping.map(l,-1)-1;return nr(o.doc,d)&&o.join(d),e(o.scrollIntoView()),!0}function JS(n,e,t){let r=n.tr,o=t.parent;for(let v=t.end,w=t.endIndex-1,C=t.startIndex;w>C;w--)v-=o.child(w).nodeSize,r.delete(v-1,v+1);let l=r.doc.resolve(t.start),a=l.nodeAfter;if(r.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let c=t.startIndex==0,d=t.endIndex==o.childCount,p=l.node(-1),g=l.index(-1);if(!p.canReplace(g+(c?0:1),g+1,a.content.append(d?z.empty:z.from(o))))return!1;let y=l.pos,k=y+a.nodeSize;return r.step(new je(y-(c?1:0),k+(d?1:0),y+1,k-1,new V((c?z.empty:z.from(o.copy(z.empty))).append(d?z.empty:z.from(o.copy(z.empty))),c?0:1,d?0:1),c?0:1)),e(r.scrollIntoView()),!0}function qS(n){return function(e,t){let{$from:r,$to:o}=e.selection,l=r.blockRange(o,p=>p.childCount>0&&p.firstChild.type==n);if(!l)return!1;let a=l.startIndex;if(a==0)return!1;let c=l.parent,d=c.child(a-1);if(d.type!=n)return!1;if(t){let p=d.lastChild&&d.lastChild.type==c.type,g=z.from(p?n.create():null),y=new V(z.from(n.create(null,z.from(c.type.create(null,g)))),p?3:1,0),k=l.start,v=l.end;t(e.tr.step(new je(k-(p?3:1),v,k,v,y,1,!0)).scrollIntoView())}return!0}}function yl(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:o}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,l=t.storedMarks,t}}}class kl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:l}=r,a=this.buildProps(l);return Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...g)=>{const y=d(...g)(a);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:o,state:l}=this,{view:a}=o,c=[],d=!!e,p=e||l.tr,g=()=>(!d&&t&&!p.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(p),c.every(k=>k===!0)),y={...Object.fromEntries(Object.entries(r).map(([k,v])=>[k,(...C)=>{const M=this.buildProps(p,t),b=v(...C)(M);return c.push(b),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:r}=this,o=!1,l=e||r.tr,a=this.buildProps(l,o);return{...Object.fromEntries(Object.entries(t).map(([d,p])=>[d,(...g)=>p(...g)({...a,dispatch:void 0})])),chain:()=>this.createChain(l,o)}}buildProps(e,t=!0){const{rawCommands:r,editor:o,state:l}=this,{view:a}=o,c={tr:e,editor:o,view:a,state:yl({state:l,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,p])=>[d,(...g)=>p(...g)(c)]))}};return c}}class QS{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const r=(...o)=>{this.off(e,r),t.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function U(n,e,t){return n.config[e]===void 0&&n.parent?U(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?U(n.parent,e,t):null}):n.config[e]}function Sl(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),r=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Sg(n){const e=[],{nodeExtensions:t,markExtensions:r}=Sl(n),o=[...t,...r],l={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage,extensions:o},d=U(a,"addGlobalAttributes",c);if(!d)return;d().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([k,v])=>{e.push({type:y,name:k,attribute:{...l,...v}})})})})}),o.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},d=U(a,"addAttributes",c);if(!d)return;const p=d();Object.entries(p).forEach(([g,y])=>{const k={...l,...y};typeof(k==null?void 0:k.default)=="function"&&(k.default=k.default()),k!=null&&k.isRequired&&(k==null?void 0:k.default)===void 0&&delete k.default,e.push({type:a.name,name:g,attribute:k})})}),e}function We(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function ut(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,l])=>{if(!r[o]){r[o]=l;return}if(o==="class"){const c=l?l.split(" "):[],d=r[o]?r[o].split(" "):[],p=c.filter(g=>!d.includes(g));r[o]=[...d,...p].join(" ")}else if(o==="style"){const c=l?l.split(";").map(g=>g.trim()).filter(Boolean):[],d=r[o]?r[o].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;d.forEach(g=>{const[y,k]=g.split(":").map(v=>v.trim());p.set(y,k)}),c.forEach(g=>{const[y,k]=g.split(":").map(v=>v.trim());p.set(y,k)}),r[o]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else r[o]=l}),r},{})}function sc(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>ut(t,r),{})}function vg(n){return typeof n=="function"}function le(n,e=void 0,...t){return vg(n)?e?n.bind(e)(...t):n(...t):n}function GS(n={}){return Object.keys(n).length===0&&n.constructor===Object}function YS(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Lp(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const o=e.reduce((l,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(t):YS(t.getAttribute(a.name));return c==null?l:{...l,[a.name]:c}},{});return{...r,...o}}}}function Bp(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&GS(t)?!1:t!=null))}function XS(n,e){var t;const r=Sg(n),{nodeExtensions:o,markExtensions:l}=Sl(n),a=(t=o.find(p=>U(p,"topNode")))===null||t===void 0?void 0:t.name,c=Object.fromEntries(o.map(p=>{const g=r.filter(b=>b.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},k=n.reduce((b,_)=>{const q=U(_,"extendNodeSchema",y);return{...b,...q?q(p):{}}},{}),v=Bp({...k,content:le(U(p,"content",y)),marks:le(U(p,"marks",y)),group:le(U(p,"group",y)),inline:le(U(p,"inline",y)),atom:le(U(p,"atom",y)),selectable:le(U(p,"selectable",y)),draggable:le(U(p,"draggable",y)),code:le(U(p,"code",y)),whitespace:le(U(p,"whitespace",y)),linebreakReplacement:le(U(p,"linebreakReplacement",y)),defining:le(U(p,"defining",y)),isolating:le(U(p,"isolating",y)),attrs:Object.fromEntries(g.map(b=>{var _;return[b.name,{default:(_=b==null?void 0:b.attribute)===null||_===void 0?void 0:_.default}]}))}),w=le(U(p,"parseHTML",y));w&&(v.parseDOM=w.map(b=>Lp(b,g)));const C=U(p,"renderHTML",y);C&&(v.toDOM=b=>C({node:b,HTMLAttributes:sc(b,g)}));const M=U(p,"renderText",y);return M&&(v.toText=M),[p.name,v]})),d=Object.fromEntries(l.map(p=>{const g=r.filter(M=>M.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},k=n.reduce((M,b)=>{const _=U(b,"extendMarkSchema",y);return{...M,..._?_(p):{}}},{}),v=Bp({...k,inclusive:le(U(p,"inclusive",y)),excludes:le(U(p,"excludes",y)),group:le(U(p,"group",y)),spanning:le(U(p,"spanning",y)),code:le(U(p,"code",y)),attrs:Object.fromEntries(g.map(M=>{var b;return[M.name,{default:(b=M==null?void 0:M.attribute)===null||b===void 0?void 0:b.default}]}))}),w=le(U(p,"parseHTML",y));w&&(v.parseDOM=w.map(M=>Lp(M,g)));const C=U(p,"renderHTML",y);return C&&(v.toDOM=M=>C({mark:M,HTMLAttributes:sc(M,g)})),[p.name,v]}));return new pm({topNode:a,nodes:c,marks:d})}function Lu(n,e){return e.nodes[n]||e.marks[n]||null}function _p(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Mc(n,e){const t=br.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const ZS=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(o,l,a,c)=>{var d,p;const g=((p=(d=o.type.spec).toText)===null||p===void 0?void 0:p.call(d,{node:o,pos:l,parent:a,index:c}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?g:g.slice(0,Math.max(0,r-l))}),t};function Tc(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class vl{constructor(e){this.find=e.find,this.handler=e.handler}}const ev=(n,e)=>{if(Tc(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Vo(n){var e;const{editor:t,from:r,to:o,text:l,rules:a,plugin:c}=n,{view:d}=t;if(d.composing)return!1;const p=d.state.doc.resolve(r);if(p.parent.type.spec.code||!((e=p.nodeBefore||p.nodeAfter)===null||e===void 0)&&e.marks.find(k=>k.type.spec.code))return!1;let g=!1;const y=ZS(p)+l;return a.forEach(k=>{if(g)return;const v=ev(y,k.find);if(!v)return;const w=d.state.tr,C=yl({state:d.state,transaction:w}),M={from:r-(v[0].length-l.length),to:o},{commands:b,chain:_,can:q}=new kl({editor:t,state:C});k.handler({state:C,range:M,match:v,commands:b,chain:_,can:q})===null||!w.steps.length||(w.setMeta(c,{transform:w,from:r,to:o,text:l}),d.dispatch(w),g=!0)}),g}function tv(n){const{editor:e,rules:t}=n,r=new wt({state:{init(){return null},apply(o,l,a){const c=o.getMeta(r);if(c)return c;const d=o.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:g}=d;typeof g=="string"?g=g:g=Mc(z.from(g),a.schema);const{from:y}=d,k=y+g.length;Vo({editor:e,from:y,to:k,text:g,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:l}},props:{handleTextInput(o,l,a,c){return Vo({editor:e,from:l,to:a,text:c,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:l}=o.state.selection;l&&Vo({editor:e,from:l.pos,to:l.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,l){if(l.key!=="Enter")return!1;const{$cursor:a}=o.state.selection;return a?Vo({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function nv(n){return Object.prototype.toString.call(n).slice(8,-1)}function $o(n){return nv(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function wl(n,e){const t={...n};return $o(n)&&$o(e)&&Object.keys(e).forEach(r=>{$o(e[r])&&$o(n[r])?t[r]=wl(n[r],e[r]):t[r]=e[r]}),t}class Cn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=le(U(this,"addOptions",{name:this.name}))),this.storage=le(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Cn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>wl(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Cn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=le(U(t,"addOptions",{name:t.name})),t.storage=le(U(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const a=o.marks();if(!!!a.find(p=>(p==null?void 0:p.type.name)===t.name))return!1;const d=a.find(p=>(p==null?void 0:p.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function rv(n){return typeof n=="number"}class iv{constructor(e){this.find=e.find,this.handler=e.handler}}const sv=(n,e,t)=>{if(Tc(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(o=>{const l=[o.text];return l.index=o.index,l.input=n,l.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(o.replaceWith)),l}):[]};function ov(n){const{editor:e,state:t,from:r,to:o,rule:l,pasteEvent:a,dropEvent:c}=n,{commands:d,chain:p,can:g}=new kl({editor:e,state:t}),y=[];return t.doc.nodesBetween(r,o,(v,w)=>{if(!v.isTextblock||v.type.spec.code)return;const C=Math.max(r,w),M=Math.min(o,w+v.content.size),b=v.textBetween(C-w,M-w,void 0,"");sv(b,l.find,a).forEach(q=>{if(q.index===void 0)return;const ee=C+q.index+1,re=ee+q[0].length,Q={from:t.tr.mapping.map(ee),to:t.tr.mapping.map(re)},ce=l.handler({state:t,range:Q,match:q,commands:d,chain:p,can:g,pasteEvent:a,dropEvent:c});y.push(ce)})}),y.every(v=>v!==null)}let jo=null;const lv=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function av(n){const{editor:e,rules:t}=n;let r=null,o=!1,l=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:g,from:y,to:k,rule:v,pasteEvt:w})=>{const C=g.tr,M=yl({state:g,transaction:C});if(!(!ov({editor:e,state:M,from:Math.max(y-1,0),to:k.b-1,rule:v,pasteEvent:w,dropEvent:c})||!C.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return t.map(g=>new wt({view(y){const k=w=>{var C;r=!((C=y.dom.parentElement)===null||C===void 0)&&C.contains(w.target)?y.dom.parentElement:null,r&&(jo=e)},v=()=>{jo&&(jo=null)};return window.addEventListener("dragstart",k),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",k),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,k)=>{if(l=r===y.dom.parentElement,c=k,!l){const v=jo;v&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(y,k)=>{var v;const w=(v=k.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return a=k,o=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(y,k,v)=>{const w=y[0],C=w.getMeta("uiEvent")==="paste"&&!o,M=w.getMeta("uiEvent")==="drop"&&!l,b=w.getMeta("applyPasteRules"),_=!!b;if(!C&&!M&&!_)return;if(_){let{text:re}=b;typeof re=="string"?re=re:re=Mc(z.from(re),v.schema);const{from:Q}=b,ce=Q+re.length,me=lv(re);return d({rule:g,state:v,from:Q,to:{b:ce},pasteEvt:me})}const q=k.doc.content.findDiffStart(v.doc.content),ee=k.doc.content.findDiffEnd(v.doc.content);if(!(!rv(q)||!ee||q===ee.b))return d({rule:g,state:v,from:q,to:ee,pasteEvt:a})}}))}function uv(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class ai{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ai.resolve(e),this.schema=XS(this.extensions,t),this.setupExtensions()}static resolve(e){const t=ai.sort(ai.flatten(e)),r=uv(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},o=U(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{const l=U(r,"priority")||100,a=U(o,"priority")||100;return l>a?-1:l<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Lu(t.name,this.schema)},o=U(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=ai.sort([...this.extensions].reverse()),r=[],o=[],l=t.map(a=>{const c={name:a.name,options:a.options,storage:a.storage,editor:e,type:Lu(a.name,this.schema)},d=[],p=U(a,"addKeyboardShortcuts",c);let g={};if(a.type==="mark"&&U(a,"exitable",c)&&(g.ArrowRight=()=>Cn.handleExit({editor:e,mark:a})),p){const C=Object.fromEntries(Object.entries(p()).map(([M,b])=>[M,()=>b({editor:e})]));g={...g,...C}}const y=xS(g);d.push(y);const k=U(a,"addInputRules",c);_p(a,e.options.enableInputRules)&&k&&r.push(...k());const v=U(a,"addPasteRules",c);_p(a,e.options.enablePasteRules)&&v&&o.push(...v());const w=U(a,"addProseMirrorPlugins",c);if(w){const C=w();d.push(...C)}return d}).flat();return[tv({editor:e,rules:r}),...av({editor:e,rules:o}),...l]}get attributes(){return Sg(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Sl(this.extensions);return Object.fromEntries(t.filter(r=>!!U(r,"addNodeView")).map(r=>{const o=this.attributes.filter(d=>d.type===r.name),l={name:r.name,options:r.options,storage:r.storage,editor:e,type:We(r.name,this.schema)},a=U(r,"addNodeView",l);if(!a)return[];const c=(d,p,g,y,k)=>{const v=sc(d,o);return a()({node:d,view:p,getPos:g,decorations:y,innerDecorations:k,editor:e,extension:r,HTMLAttributes:v})};return[r.name,c]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Lu(e.name,this.schema)};e.type==="mark"&&(!((t=le(U(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=U(e,"onBeforeCreate",r),l=U(e,"onCreate",r),a=U(e,"onUpdate",r),c=U(e,"onSelectionUpdate",r),d=U(e,"onTransaction",r),p=U(e,"onFocus",r),g=U(e,"onBlur",r),y=U(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),l&&this.editor.on("create",l),a&&this.editor.on("update",a),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class ct{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=le(U(this,"addOptions",{name:this.name}))),this.storage=le(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ct(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>wl(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ct({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=le(U(t,"addOptions",{name:t.name})),t.storage=le(U(t,"addStorage",{name:t.name,options:t.options})),t}}function wg(n,e,t){const{from:r,to:o}=e,{blockSeparator:l=`

`,textSerializers:a={}}=t||{};let c="";return n.nodesBetween(r,o,(d,p,g,y)=>{var k;d.isBlock&&p>r&&(c+=l);const v=a==null?void 0:a[d.type.name];if(v)return g&&(c+=v({node:d,pos:p,parent:g,index:y,range:e})),!1;d.isText&&(c+=(k=d==null?void 0:d.text)===null||k===void 0?void 0:k.slice(Math.max(r,p)-p,o-p))}),c}function xg(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const cv=ct.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new wt({key:new cn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:o}=e,{ranges:l}=o,a=Math.min(...l.map(g=>g.$from.pos)),c=Math.max(...l.map(g=>g.$to.pos)),d=xg(t);return wg(r,{from:a,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),fv=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),dv=(n=!1)=>({commands:e})=>e.setContent("",n),hv=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:l,$to:a})=>{n.doc.nodesBetween(l.pos,a.pos,(c,d)=>{if(c.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(d)),k=p.resolve(g.map(d+c.nodeSize)),v=y.blockRange(k);if(!v)return;const w=Si(v);if(c.type.isTextblock){const{defaultType:C}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,C)}(w||w===0)&&e.lift(v,w)})}),!0},pv=n=>e=>n(e),mv=()=>({state:n,dispatch:e})=>zS(n,e),gv=(n,e)=>({editor:t,tr:r})=>{const{state:o}=t,l=o.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,l.content),r.setSelection(new ne(r.doc.resolve(a-1))),!0},yv=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const o=n.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===r.type){if(e){const c=o.before(l),d=o.after(l);n.delete(c,d).scrollIntoView()}return!0}return!1},kv=n=>({tr:e,state:t,dispatch:r})=>{const o=We(n,t.schema),l=e.selection.$anchor;for(let a=l.depth;a>0;a-=1)if(l.node(a).type===o){if(r){const d=l.before(a),p=l.after(a);e.delete(d,p).scrollIntoView()}return!0}return!1},Sv=n=>({tr:e,dispatch:t})=>{const{from:r,to:o}=n;return t&&e.delete(r,o),!0},vv=()=>({state:n,dispatch:e})=>CS(n,e),wv=()=>({commands:n})=>n.keyboardShortcut("Enter"),xv=()=>({state:n,dispatch:e})=>IS(n,e);function ll(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===n[o]:Tc(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function Cg(n,e,t={}){return n.find(r=>r.type===e&&ll(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function Fp(n,e,t={}){return!!Cg(n,e,t)}function Nc(n,e,t){var r;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(g=>g.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(g=>g.type===e)||(t=t||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!Cg([...o.node.marks],e,t)))return;let a=o.index,c=n.start()+o.offset,d=a+1,p=c+o.node.nodeSize;for(;a>0&&Fp([...n.parent.child(a-1).marks],e,t);)a-=1,c-=n.parent.child(a).nodeSize;for(;d<n.parent.childCount&&Fp([...n.parent.child(d).marks],e,t);)p+=n.parent.child(d).nodeSize,d+=1;return{from:c,to:p}}function ir(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Cv=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const l=ir(n,r.schema),{doc:a,selection:c}=t,{$from:d,from:p,to:g}=c;if(o){const y=Nc(d,l,e);if(y&&y.from<=p&&y.to>=g){const k=ne.create(a,y.from,y.to);t.setSelection(k)}}return!0},Ev=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Eg(n){return n instanceof ne}function xr(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Mg(n,e=null){if(!e)return null;const t=se.atStart(n),r=se.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,l=r.to;return e==="all"?ne.create(n,xr(0,o,l),xr(n.content.size,o,l)):ne.create(n,xr(e,o,l),xr(e,o,l))}const Mv=(n=null,e={})=>({editor:t,view:r,tr:o,dispatch:l})=>{e={scrollIntoView:!0,...e};const a=()=>{r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(l&&n===null&&!Eg(t.state.selection))return a(),!0;const c=Mg(o.doc,n)||t.state.selection,d=t.state.selection.eq(c);return l&&(d||o.setSelection(c),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0},Tv=(n,e)=>t=>n.every((r,o)=>e(r,{...t,index:o})),Nv=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Tg=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Tg(r)}return n};function Ho(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Tg(t)}function al(n,e,t){if(n instanceof Gn||n instanceof z)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,o=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return z.fromArray(n.map(c=>e.nodeFromJSON(c)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",l),al("",e,t)}if(o){if(t.errorOnInvalidContent){let a=!1,c="";const d=new pm({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(a=!0,c=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?Yn.fromSchema(d).parseSlice(Ho(n),t.parseOptions):Yn.fromSchema(d).parse(Ho(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const l=Yn.fromSchema(e);return t.slice?l.parseSlice(Ho(n),t.parseOptions).content:l.parse(Ho(n),t.parseOptions)}return al("",e,t)}function Ov(n,e,t){const r=n.steps.length-1;if(r<e)return;const o=n.steps[r];if(!(o instanceof $e||o instanceof je))return;const l=n.mapping.maps[r];let a=0;l.forEach((c,d,p,g)=>{a===0&&(a=g)}),n.setSelection(se.near(n.doc.resolve(a),t))}const Dv=n=>!("type"in n),Av=(n,e,t)=>({tr:r,dispatch:o,editor:l})=>{var a;if(o){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let c;try{c=al(e,l.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:l.options.enableContentCheck})}catch(w){return l.emit("contentError",{editor:l,error:w,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}}),!1}let{from:d,to:p}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},g=!0,y=!0;if((Dv(c)?c:[c]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),d===p&&y){const{parent:w}=r.doc.resolve(d);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(d-=1,p+=1)}let v;if(g){if(Array.isArray(e))v=e.map(w=>w.text||"").join("");else if(e instanceof z){let w="";e.forEach(C=>{C.text&&(w+=C.text)}),v=w}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,d,p)}else v=c,r.replaceWith(d,p,v);t.updateSelection&&Ov(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:v}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:v})}return!0},bv=()=>({state:n,dispatch:e})=>AS(n,e),Pv=()=>({state:n,dispatch:e})=>bS(n,e),Rv=()=>({state:n,dispatch:e})=>ES(n,e),Iv=()=>({state:n,dispatch:e})=>OS(n,e),zv=()=>({state:n,dispatch:e,tr:t})=>{try{const r=fl(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Lv=()=>({state:n,dispatch:e,tr:t})=>{try{const r=fl(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Bv=()=>({state:n,dispatch:e})=>MS(n,e),_v=()=>({state:n,dispatch:e})=>TS(n,e);function Ng(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Og(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Fv(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,l,a;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))Ng()||Og()?a=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}const Vv=n=>({editor:e,view:t,tr:r,dispatch:o})=>{const l=Fv(n).split(/-(?!$)/),a=l.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,c))});return d==null||d.steps.forEach(p=>{const g=p.map(r.mapping);g&&o&&r.maybeStep(g)}),!0};function ws(n,e,t={}){const{from:r,to:o,empty:l}=n.selection,a=e?We(e,n.schema):null,c=[];n.doc.nodesBetween(r,o,(y,k)=>{if(y.isText)return;const v=Math.max(r,k),w=Math.min(o,k+y.nodeSize);c.push({node:y,from:v,to:w})});const d=o-r,p=c.filter(y=>a?a.name===y.node.type.name:!0).filter(y=>ll(y.node.attrs,t,{strict:!1}));return l?!!p.length:p.reduce((y,k)=>y+k.to-k.from,0)>=d}const $v=(n,e={})=>({state:t,dispatch:r})=>{const o=We(n,t.schema);return ws(t,o,e)?PS(t,r):!1},jv=()=>({state:n,dispatch:e})=>LS(n,e),Hv=n=>({state:e,dispatch:t})=>{const r=We(n,e.schema);return US(r)(e,t)},Wv=()=>({state:n,dispatch:e})=>RS(n,e);function xl(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Vp(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,o)=>(t.includes(o)||(r[o]=n[o]),r),{})}const Uv=(n,e)=>({tr:t,state:r,dispatch:o})=>{let l=null,a=null;const c=xl(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(l=We(n,r.schema)),c==="mark"&&(a=ir(n,r.schema)),o&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(p,g)=>{l&&l===p.type&&t.setNodeMarkup(g,void 0,Vp(p.attrs,e)),a&&p.marks.length&&p.marks.forEach(y=>{a===y.type&&t.addMark(g,g+p.nodeSize,a.create(Vp(y.attrs,e)))})})}),!0):!1},Kv=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Jv=()=>({tr:n,dispatch:e})=>{if(e){const t=new Vt(n.doc);n.setSelection(t)}return!0},qv=()=>({state:n,dispatch:e})=>NS(n,e),Qv=()=>({state:n,dispatch:e})=>DS(n,e),Gv=()=>({state:n,dispatch:e})=>BS(n,e),Yv=()=>({state:n,dispatch:e})=>VS(n,e),Xv=()=>({state:n,dispatch:e})=>FS(n,e);function oc(n,e,t={},r={}){return al(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const Zv=(n,e=!1,t={},r={})=>({editor:o,tr:l,dispatch:a,commands:c})=>{var d,p;const{doc:g}=l;if(t.preserveWhitespace!=="full"){const y=oc(n,o.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:o.options.enableContentCheck});return a&&l.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return a&&l.setMeta("preventUpdate",!e),c.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(p=r.errorOnInvalidContent)!==null&&p!==void 0?p:o.options.enableContentCheck})};function Dg(n,e){const t=ir(e,n.schema),{from:r,to:o,empty:l}=n.selection,a=[];l?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,d=>{a.push(...d.marks)});const c=a.find(d=>d.type.name===t.name);return c?{...c.attrs}:{}}function ew(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function tw(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Oc(n){return e=>tw(e.$from,n)}function nw(n,e){const t={from:0,to:n.content.size};return wg(n,t,e)}function rw(n,e){const t=We(e,n.schema),{from:r,to:o}=n.selection,l=[];n.doc.nodesBetween(r,o,c=>{l.push(c)});const a=l.reverse().find(c=>c.type.name===t.name);return a?{...a.attrs}:{}}function iw(n,e){const t=xl(typeof e=="string"?e:e.name,n.schema);return t==="node"?rw(n,e):t==="mark"?Dg(n,e):{}}function Ag(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(o=>{const l=t.resolve(n),a=Nc(l,o.type);a&&r.push({mark:o,...a})}):t.nodesBetween(n,e,(o,l)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(a=>({from:l,to:l+o.nodeSize,mark:a})))}),r}function qo(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=n.find(l=>l.type===e&&l.name===r);return o?o.attribute.keepOnSplit:!1}))}function lc(n,e,t={}){const{empty:r,ranges:o}=n.selection,l=e?ir(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>l?l.name===y.type.name:!0).find(y=>ll(y.attrs,t,{strict:!1}));let a=0;const c=[];if(o.forEach(({$from:y,$to:k})=>{const v=y.pos,w=k.pos;n.doc.nodesBetween(v,w,(C,M)=>{if(!C.isText&&!C.marks.length)return;const b=Math.max(v,M),_=Math.min(w,M+C.nodeSize),q=_-b;a+=q,c.push(...C.marks.map(ee=>({mark:ee,from:b,to:_})))})}),a===0)return!1;const d=c.filter(y=>l?l.name===y.mark.type.name:!0).filter(y=>ll(y.mark.attrs,t,{strict:!1})).reduce((y,k)=>y+k.to-k.from,0),p=c.filter(y=>l?y.mark.type!==l&&y.mark.type.excludes(l):!0).reduce((y,k)=>y+k.to-k.from,0);return(d>0?d+p:d)>=a}function sw(n,e,t={}){if(!e)return ws(n,null,t)||lc(n,null,t);const r=xl(e,n.schema);return r==="node"?ws(n,e,t):r==="mark"?lc(n,e,t):!1}function $p(n,e){const{nodeExtensions:t}=Sl(e),r=t.find(a=>a.name===n);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},l=le(U(r,"group",o));return typeof l!="string"?!1:l.split(" ").includes("list")}function Dc(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(l=>{o!==!1&&(Dc(l,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function ow(n){return n instanceof X}function lw(n,e,t){var r;const{selection:o}=e;let l=null;if(Eg(o)&&(l=o.$cursor),l){const c=(r=n.storedMarks)!==null&&r!==void 0?r:l.marks();return!!t.isInSet(c)||!c.some(d=>d.type.excludes(t))}const{ranges:a}=o;return a.some(({$from:c,$to:d})=>{let p=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(c.pos,d.pos,(g,y,k)=>{if(p)return!1;if(g.isInline){const v=!k||k.type.allowsMarkType(t),w=!!t.isInSet(g.marks)||!g.marks.some(C=>C.type.excludes(t));p=v&&w}return!p}),p})}const aw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:l}=t,{empty:a,ranges:c}=l,d=ir(n,r.schema);if(o)if(a){const p=Dg(r,d);t.addStoredMark(d.create({...p,...e}))}else c.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;r.doc.nodesBetween(g,y,(k,v)=>{const w=Math.max(v,g),C=Math.min(v+k.nodeSize,y);k.marks.find(b=>b.type===d)?k.marks.forEach(b=>{d===b.type&&t.addMark(w,C,d.create({...b.attrs,...e}))}):t.addMark(w,C,d.create(e))})});return lw(r,t,d)},uw=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),cw=(n,e={})=>({state:t,dispatch:r,chain:o})=>{const l=We(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),l.isTextblock?o().command(({commands:c})=>zp(l,{...a,...e})(t)?!0:c.clearNodes()).command(({state:c})=>zp(l,{...a,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=xr(n,0,r.content.size),l=X.create(r,o);e.setSelection(l)}return!0},dw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:l}=typeof n=="number"?{from:n,to:n}:n,a=ne.atStart(r).from,c=ne.atEnd(r).to,d=xr(o,a,c),p=xr(l,a,c),g=ne.create(r,d,p);e.setSelection(g)}return!0},hw=n=>({state:e,dispatch:t})=>{const r=We(n,e.schema);return qS(r)(e,t)};function jp(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(o=>e==null?void 0:e.includes(o.type.name));n.tr.ensureMarks(r)}}const pw=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:l,doc:a}=e,{$from:c,$to:d}=l,p=o.extensionManager.attributes,g=qo(p,c.node().type.name,c.node().attrs);if(l instanceof X&&l.node.isBlock)return!c.parentOffset||!ci(a,c.pos)?!1:(r&&(n&&jp(t,o.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,k=c.depth===0?void 0:ew(c.node(-1).contentMatchAt(c.indexAfter(-1)));let v=y&&k?[{type:k,attrs:g}]:void 0,w=ci(e.doc,e.mapping.map(c.pos),1,v);if(!v&&!w&&ci(e.doc,e.mapping.map(c.pos),1,k?[{type:k}]:void 0)&&(w=!0,v=k?[{type:k,attrs:g}]:void 0),r){if(w&&(l instanceof ne&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,v),k&&!y&&!c.parentOffset&&c.parent.type!==k)){const C=e.mapping.map(c.before()),M=e.doc.resolve(C);c.node(-1).canReplaceWith(M.index(),M.index()+1,k)&&e.setNodeMarkup(e.mapping.map(c.before()),k)}n&&jp(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return w},mw=(n,e={})=>({tr:t,state:r,dispatch:o,editor:l})=>{var a;const c=We(n,r.schema),{$from:d,$to:p}=r.selection,g=r.selection.node;if(g&&g.isBlock||d.depth<2||!d.sameParent(p))return!1;const y=d.node(-1);if(y.type!==c)return!1;const k=l.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){let b=z.empty;const _=d.index(-1)?1:d.index(-2)?2:3;for(let me=d.depth-_;me>=d.depth-3;me-=1)b=z.from(d.node(me).copy(b));const q=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,ee={...qo(k,d.node().type.name,d.node().attrs),...e},re=((a=c.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(ee))||void 0;b=b.append(z.from(c.createAndFill(null,re)||void 0));const Q=d.before(d.depth-(_-1));t.replace(Q,d.after(-q),new V(b,4-_,0));let ce=-1;t.doc.nodesBetween(Q,t.doc.content.size,(me,ie)=>{if(ce>-1)return!1;me.isTextblock&&me.content.size===0&&(ce=ie+1)}),ce>-1&&t.setSelection(ne.near(t.doc.resolve(ce))),t.scrollIntoView()}return!0}const v=p.pos===d.end()?y.contentMatchAt(0).defaultType:null,w={...qo(k,y.type.name,y.attrs),...e},C={...qo(k,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,p.pos);const M=v?[{type:c,attrs:w},{type:v,attrs:C}]:[{type:c,attrs:w}];if(!ci(t.doc,d.pos,2))return!1;if(o){const{selection:b,storedMarks:_}=r,{splittableMarks:q}=l.extensionManager,ee=_||b.$to.parentOffset&&b.$from.marks();if(t.split(d.pos,2,M).scrollIntoView(),!ee||!o)return!0;const re=ee.filter(Q=>q.includes(Q.type.name));t.ensureMarks(re)}return!0},Bu=(n,e)=>{const t=Oc(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&nr(n.doc,t.pos)&&n.join(t.pos),!0},_u=(n,e)=>{const t=Oc(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&nr(n.doc,r)&&n.join(r),!0},gw=(n,e,t,r={})=>({editor:o,tr:l,state:a,dispatch:c,chain:d,commands:p,can:g})=>{const{extensions:y,splittableMarks:k}=o.extensionManager,v=We(n,a.schema),w=We(e,a.schema),{selection:C,storedMarks:M}=a,{$from:b,$to:_}=C,q=b.blockRange(_),ee=M||C.$to.parentOffset&&C.$from.marks();if(!q)return!1;const re=Oc(Q=>$p(Q.type.name,y))(C);if(q.depth>=1&&re&&q.depth-re.depth<=1){if(re.node.type===v)return p.liftListItem(w);if($p(re.node.type.name,y)&&v.validContent(re.node.content)&&c)return d().command(()=>(l.setNodeMarkup(re.pos,v),!0)).command(()=>Bu(l,v)).command(()=>_u(l,v)).run()}return!t||!ee||!c?d().command(()=>g().wrapInList(v,r)?!0:p.clearNodes()).wrapInList(v,r).command(()=>Bu(l,v)).command(()=>_u(l,v)).run():d().command(()=>{const Q=g().wrapInList(v,r),ce=ee.filter(me=>k.includes(me.type.name));return l.ensureMarks(ce),Q?!0:p.clearNodes()}).wrapInList(v,r).command(()=>Bu(l,v)).command(()=>_u(l,v)).run()},yw=(n,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:l=!1}=t,a=ir(n,r.schema);return lc(r,a,e)?o.unsetMark(a,{extendEmptyMarkRange:l}):o.setMark(a,e)},kw=(n,e,t={})=>({state:r,commands:o})=>{const l=We(n,r.schema),a=We(e,r.schema),c=ws(r,l,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?o.setNode(a,d):o.setNode(l,{...d,...t})},Sw=(n,e={})=>({state:t,commands:r})=>{const o=We(n,t.schema);return ws(t,o,e)?r.lift(o):r.wrapIn(o,e)},vw=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let l;if(o.spec.isInputRules&&(l=o.getState(n))){if(e){const a=n.tr,c=l.transform;for(let d=c.steps.length-1;d>=0;d-=1)a.step(c.steps[d].invert(c.docs[d]));if(l.text){const d=a.doc.resolve(l.from).marks();a.replaceWith(l.from,l.to,n.schema.text(l.text,d))}else a.delete(l.from,l.to)}return!0}}return!1},ww=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:o}=t;return r||e&&o.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos)}),!0},xw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{var l;const{extendEmptyMarkRange:a=!1}=e,{selection:c}=t,d=ir(n,r.schema),{$from:p,empty:g,ranges:y}=c;if(!o)return!0;if(g&&a){let{from:k,to:v}=c;const w=(l=p.marks().find(M=>M.type===d))===null||l===void 0?void 0:l.attrs,C=Nc(p,d,w);C&&(k=C.from,v=C.to),t.removeMark(k,v,d)}else y.forEach(k=>{t.removeMark(k.$from.pos,k.$to.pos,d)});return t.removeStoredMark(d),!0},Cw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{let l=null,a=null;const c=xl(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(l=We(n,r.schema)),c==="mark"&&(a=ir(n,r.schema)),o&&t.selection.ranges.forEach(d=>{const p=d.$from.pos,g=d.$to.pos;let y,k,v,w;t.selection.empty?r.doc.nodesBetween(p,g,(C,M)=>{l&&l===C.type&&(v=Math.max(M,p),w=Math.min(M+C.nodeSize,g),y=M,k=C)}):r.doc.nodesBetween(p,g,(C,M)=>{M<p&&l&&l===C.type&&(v=Math.max(M,p),w=Math.min(M+C.nodeSize,g),y=M,k=C),M>=p&&M<=g&&(l&&l===C.type&&t.setNodeMarkup(M,void 0,{...C.attrs,...e}),a&&C.marks.length&&C.marks.forEach(b=>{if(a===b.type){const _=Math.max(M,p),q=Math.min(M+C.nodeSize,g);t.addMark(_,q,a.create({...b.attrs,...e}))}}))}),k&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...k.attrs,...e}),a&&k.marks.length&&k.marks.forEach(C=>{a===C.type&&t.addMark(v,w,a.create({...C.attrs,...e}))}))}),!0):!1},Ew=(n,e={})=>({state:t,dispatch:r})=>{const o=We(n,t.schema);return $S(o,e)(t,r)},Mw=(n,e={})=>({state:t,dispatch:r})=>{const o=We(n,t.schema);return jS(o,e)(t,r)};var Tw=Object.freeze({__proto__:null,blur:fv,clearContent:dv,clearNodes:hv,command:pv,createParagraphNear:mv,cut:gv,deleteCurrentNode:yv,deleteNode:kv,deleteRange:Sv,deleteSelection:vv,enter:wv,exitCode:xv,extendMarkRange:Cv,first:Ev,focus:Mv,forEach:Tv,insertContent:Nv,insertContentAt:Av,joinBackward:Rv,joinDown:Pv,joinForward:Iv,joinItemBackward:zv,joinItemForward:Lv,joinTextblockBackward:Bv,joinTextblockForward:_v,joinUp:bv,keyboardShortcut:Vv,lift:$v,liftEmptyBlock:jv,liftListItem:Hv,newlineInCode:Wv,resetAttributes:Uv,scrollIntoView:Kv,selectAll:Jv,selectNodeBackward:qv,selectNodeForward:Qv,selectParentNode:Gv,selectTextblockEnd:Yv,selectTextblockStart:Xv,setContent:Zv,setMark:aw,setMeta:uw,setNode:cw,setNodeSelection:fw,setTextSelection:dw,sinkListItem:hw,splitBlock:pw,splitListItem:mw,toggleList:gw,toggleMark:yw,toggleNode:kw,toggleWrap:Sw,undoInputRule:vw,unsetAllMarks:ww,unsetMark:xw,updateAttributes:Cw,wrapIn:Ew,wrapInList:Mw});const Nw=ct.create({name:"commands",addCommands(){return{...Tw}}}),Ow=ct.create({name:"drop",addProseMirrorPlugins(){return[new wt({key:new cn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Dw=ct.create({name:"editable",addProseMirrorPlugins(){return[new wt({key:new cn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Aw=ct.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new wt({key:new cn("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),bw=ct.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:c})=>{const{selection:d,doc:p}=c,{empty:g,$anchor:y}=d,{pos:k,parent:v}=y,w=y.parent.isTextblock&&k>0?c.doc.resolve(k-1):y,C=w.parent.type.spec.isolating,M=y.pos-y.parentOffset,b=C&&w.parent.childCount===1?M===y.pos:se.atStart(p).from===k;return!g||!v.type.isTextblock||v.textContent.length||!b||b&&y.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},l={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ng()||Og()?l:o},addProseMirrorPlugins(){return[new wt({key:new cn("clearDocument"),appendTransaction:(n,e,t)=>{const r=n.some(C=>C.docChanged)&&!e.doc.eq(t.doc),o=n.some(C=>C.getMeta("preventClearDocument"));if(!r||o)return;const{empty:l,from:a,to:c}=e.selection,d=se.atStart(e.doc).from,p=se.atEnd(e.doc).to;if(l||!(a===d&&c===p)||!Dc(t.doc))return;const k=t.tr,v=yl({state:t,transaction:k}),{commands:w}=new kl({editor:this.editor,state:v});if(w.clearNodes(),!!k.steps.length)return k}})]}}),Pw=ct.create({name:"paste",addProseMirrorPlugins(){return[new wt({key:new cn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Rw=ct.create({name:"tabindex",addProseMirrorPlugins(){return[new wt({key:new cn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Sr{get name(){return this.node.type.name}constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Sr(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Sr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Sr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const o=t.isBlock&&!t.isTextblock,l=t.isAtom&&!t.isText,a=this.pos+r+(l?0:1),c=this.resolvedPos.doc.resolve(a);if(!o&&c.depth<=this.depth)return;const d=new Sr(c,this.editor,o,o?t:null);o&&(d.actualDepth=this.depth+1),e.push(new Sr(c,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){const l=o.node.attrs,a=Object.keys(t);for(let c=0;c<a.length;c+=1){const d=a[c];if(l[d]!==t[d])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const l=Object.keys(t);return this.children.forEach(a=>{r&&o.length>0||(a.node.type.name===e&&l.every(d=>t[d]===a.node.attrs[d])&&o.push(a),!(r&&o.length>0)&&(o=o.concat(a.querySelectorAll(e,t,r))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const Iw=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function zw(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}class Lw extends QS{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:o})=>this.options.onDrop(t,r,o)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=zw(Iw,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=vg(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(l=>{const a=typeof l=="string"?`${l}$`:l.key;r=t.filter(c=>!c.key.startsWith(a))}),t.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[Dw,cv.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),Nw,Aw,bw,Rw,Ow,Pw].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l==null?void 0:l.type));this.extensionManager=new ai(o,this)}createCommandManager(){this.commandManager=new kl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=oc(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(c=>c.name!=="collaboration"),this.createExtensionManager()}}),t=oc(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Mg(t,this.options.autofocus);this.view=new hS(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:li.create({doc:t,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var c;return(c=this.capturedTransaction)===null||c===void 0?void 0:c.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),l=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),l&&this.emit("blur",{editor:this,event:l.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return iw(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return sw(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Mc(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return nw(this.state.doc,{blockSeparator:t,textSerializers:{...xg(this.schema),...r}})}get isEmpty(){return Dc(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Sr(t,this)}get $doc(){return this.$pos(0)}}function yi(n){return new vl({find:n.find,handler:({state:e,range:t,match:r})=>{const o=le(n.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:l}=e,a=r[r.length-1],c=r[0];if(a){const d=c.search(/\S/),p=t.from+c.indexOf(a),g=p+a.length;if(Ag(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(C=>C===n.type&&C!==v.mark.type)).filter(v=>v.to>p).length)return null;g<t.to&&l.delete(g,t.to),p>t.from&&l.delete(t.from+d,p);const k=t.from+d+a.length;l.addMark(t.from+d,k,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function Bw(n){return new vl({find:n.find,handler:({state:e,range:t,match:r})=>{const o=le(n.getAttributes,void 0,r)||{},{tr:l}=e,a=t.from;let c=t.to;const d=n.type.create(o);if(r[1]){const p=r[0].lastIndexOf(r[1]);let g=a+p;g>c?g=c:c=g+r[1].length;const y=r[0][r[0].length-1];l.insertText(y,a+r[0].length-1),l.replaceWith(g,c,d)}else if(r[0]){const p=n.type.isInline?a:a-1;l.insert(p,n.type.create(o)).delete(l.mapping.map(a),l.mapping.map(c))}l.scrollIntoView()}})}function ac(n){return new vl({find:n.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),l=le(n.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,l)}})}function xs(n){return new vl({find:n.find,handler:({state:e,range:t,match:r,chain:o})=>{const l=le(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),d=a.doc.resolve(t.from).blockRange(),p=d&&hc(d,n.type,l);if(!p)return null;if(a.wrap(d,p),n.keepMarks&&n.editor){const{selection:y,storedMarks:k}=e,{splittableMarks:v}=n.editor.extensionManager,w=k||y.$to.parentOffset&&y.$from.marks();if(w){const C=w.filter(M=>v.includes(M.type.name));a.ensureMarks(C)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(y,l).run()}const g=a.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&nr(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,g))&&a.join(t.from-1)}})}class vt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=le(U(this,"addOptions",{name:this.name}))),this.storage=le(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new vt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>wl(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new vt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=le(U(t,"addOptions",{name:t.name})),t.storage=le(U(t,"addStorage",{name:t.name,options:t.options})),t}}function ki(n){return new iv({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const l=le(n.getAttributes,void 0,r,o);if(l===!1||l===null)return null;const{tr:a}=e,c=r[r.length-1],d=r[0];let p=t.to;if(c){const g=d.search(/\S/),y=t.from+d.indexOf(c),k=y+c.length;if(Ag(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(M=>M===n.type&&M!==w.mark.type)).filter(w=>w.to>y).length)return null;k<t.to&&a.delete(k,t.to),y>t.from&&a.delete(t.from+g,y),p=t.from+g+c.length,a.addMark(t.from+g,p,n.type.create(l||{})),a.removeStoredMark(n.type)}}})}var _w=Xp();const Fw=Yp(_w);function Vw(n){return n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bg={exports:{}},Fu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp;function $w(){if(Hp)return Fu;Hp=1;var n=st;function e(y,k){return y===k&&(y!==0||1/y===1/k)||y!==y&&k!==k}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,o=n.useEffect,l=n.useLayoutEffect,a=n.useDebugValue;function c(y,k){var v=k(),w=r({inst:{value:v,getSnapshot:k}}),C=w[0].inst,M=w[1];return l(function(){C.value=v,C.getSnapshot=k,d(C)&&M({inst:C})},[y,v,k]),o(function(){return d(C)&&M({inst:C}),y(function(){d(C)&&M({inst:C})})},[y]),a(v),v}function d(y){var k=y.getSnapshot;y=y.value;try{var v=k();return!t(y,v)}catch{return!0}}function p(y,k){return k()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return Fu.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Fu}bg.exports=$w();var Ac=bg.exports;const jw=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},Hw=({contentComponent:n})=>{const e=Ac.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return st.createElement(st.Fragment,null,Object.values(e))};function Ww(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:Fw.createPortal(r.reactElement,r.element,t)},n.forEach(o=>o())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(o=>o())}}}class Uw extends st.Component{constructor(e){var t;super(e),this.editorContentRef=st.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=Ww(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return st.createElement(st.Fragment,null,st.createElement("div",{ref:jw(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&st.createElement(Hw,{contentComponent:e.contentComponent}))}}const Kw=kt.forwardRef((n,e)=>{const t=st.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return st.createElement(Uw,{key:t,innerRef:e,...n})}),Jw=st.memo(Kw);var qw=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,l;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[o]))return!1;for(o=r;o--!==0;){var a=l[o];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},Qw=Vw(qw),Pg={exports:{}},Vu={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function Gw(){if(Wp)return Vu;Wp=1;var n=st,e=Ac;function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=n.useRef,a=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Vu.useSyncExternalStoreWithSelector=function(p,g,y,k,v){var w=l(null);if(w.current===null){var C={hasValue:!1,value:null};w.current=C}else C=w.current;w=c(function(){function b(Q){if(!_){if(_=!0,q=Q,Q=k(Q),v!==void 0&&C.hasValue){var ce=C.value;if(v(ce,Q))return ee=ce}return ee=Q}if(ce=ee,r(q,Q))return ce;var me=k(Q);return v!==void 0&&v(ce,me)?ce:(q=Q,ee=me)}var _=!1,q,ee,re=y===void 0?null:y;return[function(){return b(g())},re===null?void 0:function(){return b(re())}]},[g,y,k,v]);var M=o(p,w[0],w[1]);return a(function(){C.hasValue=!0,C.value=M},[M]),d(M),M},Vu}Pg.exports=Gw();var Yw=Pg.exports;const Xw=typeof window<"u"?kt.useLayoutEffect:kt.useEffect;class Zw{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function ex(n){var e;const[t]=kt.useState(()=>new Zw(n.editor)),r=Yw.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:Qw);return Xw(()=>t.watch(n.editor),[n.editor,t]),kt.useDebugValue(r),r}const tx=!1,uc=typeof window>"u",nx=uc||!!(typeof window<"u"&&window.next);class rx{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?uc||nx?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,l;return(l=(o=this.options.current).onBeforeCreate)===null||l===void 0?void 0:l.call(o,...r)},onBlur:(...r)=>{var o,l;return(l=(o=this.options.current).onBlur)===null||l===void 0?void 0:l.call(o,...r)},onCreate:(...r)=>{var o,l;return(l=(o=this.options.current).onCreate)===null||l===void 0?void 0:l.call(o,...r)},onDestroy:(...r)=>{var o,l;return(l=(o=this.options.current).onDestroy)===null||l===void 0?void 0:l.call(o,...r)},onFocus:(...r)=>{var o,l;return(l=(o=this.options.current).onFocus)===null||l===void 0?void 0:l.call(o,...r)},onSelectionUpdate:(...r)=>{var o,l;return(l=(o=this.options.current).onSelectionUpdate)===null||l===void 0?void 0:l.call(o,...r)},onTransaction:(...r)=>{var o,l;return(l=(o=this.options.current).onTransaction)===null||l===void 0?void 0:l.call(o,...r)},onUpdate:(...r)=>{var o,l;return(l=(o=this.options.current).onUpdate)===null||l===void 0?void 0:l.call(o,...r)},onContentError:(...r)=>{var o,l;return(l=(o=this.options.current).onContentError)===null||l===void 0?void 0:l.call(o,...r)},onDrop:(...r)=>{var o,l;return(l=(o=this.options.current).onDrop)===null||l===void 0?void 0:l.call(o,...r)},onPaste:(...r)=>{var o,l;return(l=(o=this.options.current).onPaste)===null||l===void 0?void 0:l.call(o,...r)}};return new Lw(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function ix(n={},e=[]){const t=kt.useRef(n);t.current=n;const[r]=kt.useState(()=>new rx(t)),o=Ac.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return kt.useDebugValue(o),kt.useEffect(r.onRender(e)),ex({editor:o,selector:({transactionNumber:l})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&l===0?0:l+1}),o}const sx=kt.createContext({editor:null});sx.Consumer;const ox=kt.createContext({onDragStart:void 0}),lx=()=>kt.useContext(ox);st.forwardRef((n,e)=>{const{onDragStart:t}=lx(),r=n.as||"div";return st.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const ax=/^\s*>\s$/,ux=vt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xs({find:ax,type:this.type})]}}),cx=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,fx=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,dx=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,hx=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,px=Cn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[yi({find:cx,type:this.type}),yi({find:dx,type:this.type})]},addPasteRules(){return[ki({find:fx,type:this.type}),ki({find:hx,type:this.type})]}}),mx="listItem",Up="textStyle",Kp=/^\s*([-+*])\s$/,gx=vt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mx,this.editor.getAttributes(Up)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=xs({find:Kp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=xs({find:Kp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Up),editor:this.editor})),[n]}}),yx=/(^|[^`])`([^`]+)`(?!`)/,kx=/(^|[^`])`([^`]+)`(?!`)/g,Sx=Cn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[yi({find:yx,type:this.type})]},addPasteRules(){return[ki({find:kx,type:this.type})]}}),vx=/^```([a-z]+)?[\s\n]$/,wx=/^~~~([a-z]+)?[\s\n]$/,xx=vt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,l=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",ut(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const l=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!l||!a?!1:n.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:o,empty:l}=t;if(!l||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const c=o.after();return c===void 0?!1:r.nodeAt(c)?n.commands.command(({tr:p})=>(p.setSelection(se.near(r.resolve(c))),!0)):n.commands.exitCode()}}},addInputRules(){return[ac({find:vx,type:this.type,getAttributes:n=>({language:n[1]})}),ac({find:wx,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new wt({key:new cn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,l=o==null?void 0:o.mode;if(!t||!l)return!1;const{tr:a,schema:c}=n.state,d=c.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:l},d)),a.selection.$from.parent.type!==this.type&&a.setSelection(ne.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),Cx=vt.create({name:"doc",topNode:!0,content:"block+"});function Ex(n={}){return new wt({view(e){return new Mx(e,n)}})}class Mx{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let l=a=>{this[o](a)};return e.dom.addEventListener(o,l),{name:o,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let c=e.nodeBefore,d=e.nodeAfter;if(c||d){let p=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(p){let g=p.getBoundingClientRect(),y=c?g.bottom:g.top;c&&d&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:g.left,right:g.right,top:y-this.width/2,bottom:y+this.width/2}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos);r={left:c.left-this.width/2,right:c.left+this.width/2,top:c.top,bottom:c.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let l,a;if(!o||o==document.body&&getComputedStyle(o).position=="static")l=-pageXOffset,a=-pageYOffset;else{let c=o.getBoundingClientRect();l=c.left-o.scrollLeft,a=c.top-o.scrollTop}this.element.style.left=r.left-l+"px",this.element.style.top=r.top-a+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,l=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!l){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=Mm(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Tx=ct.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Ex(this.options)]}});class De extends se{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return De.valid(r)?new De(r):se.near(r)}content(){return V.empty}eq(e){return e instanceof De&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new De(e.resolve(t.pos))}getBookmark(){return new bc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Nx(e)||!Ox(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&De.valid(e))return e;let o=e.pos,l=null;for(let a=e.depth;;a--){let c=e.node(a);if(t>0?e.indexAfter(a)<c.childCount:e.index(a)>0){l=c.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;o+=t;let d=e.doc.resolve(o);if(De.valid(d))return d}for(;;){let a=t>0?l.firstChild:l.lastChild;if(!a){if(l.isAtom&&!l.isText&&!X.isSelectable(l)){e=e.doc.resolve(o+l.nodeSize*t),r=!1;continue e}break}l=a,o+=t;let c=e.doc.resolve(o);if(De.valid(c))return c}return null}}}De.prototype.visible=!1;De.findFrom=De.findGapCursorFrom;se.jsonID("gapcursor",De);class bc{constructor(e){this.pos=e}map(e){return new bc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return De.valid(t)?new De(t):se.near(t)}}function Nx(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Ox(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Dx(){return new wt({props:{decorations:Rx,createSelectionBetween(n,e,t){return e.pos==t.pos&&De.valid(t)?new De(t):null},handleClick:bx,handleKeyDown:Ax,handleDOMEvents:{beforeinput:Px}}})}const Ax=dg({ArrowLeft:Wo("horiz",-1),ArrowRight:Wo("horiz",1),ArrowUp:Wo("vert",-1),ArrowDown:Wo("vert",1)});function Wo(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,l){let a=r.selection,c=e>0?a.$to:a.$from,d=a.empty;if(a instanceof ne){if(!l.endOfTextblock(t)||c.depth==0)return!1;d=!1,c=r.doc.resolve(e>0?c.after():c.before())}let p=De.findGapCursorFrom(c,e,d);return p?(o&&o(r.tr.setSelection(new De(p))),!0):!1}}function bx(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!De.valid(r))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&X.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new De(r))),!0)}function Px(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof De))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let o=z.empty;for(let a=r.length-1;a>=0;a--)o=z.from(r[a].createAndFill(null,o));let l=n.state.tr.replace(t.pos,t.pos,new V(o,0,0));return l.setSelection(ne.near(l.doc.resolve(t.pos+1))),n.dispatch(l),!1}function Rx(n){if(!(n.selection instanceof De))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Le.create(n.doc,[Ft.widget(n.selection.head,e,{key:"gapcursor"})])}const Ix=ct.create({name:"gapCursor",addProseMirrorPlugins(){return[Dx()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=le(U(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),zx=vt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ut(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:l}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=r.extensionManager,d=l||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&d&&a){const y=d.filter(k=>c.includes(k.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Lx=vt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>ac({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var ul=200,He=function(){};He.prototype.append=function(e){return e.length?(e=He.from(e),!this.length&&e||e.length<ul&&this.leafAppend(e)||this.length<ul&&e.leafPrepend(this)||this.appendInner(e)):this};He.prototype.prepend=function(e){return e.length?He.from(e).append(this):this};He.prototype.appendInner=function(e){return new Bx(this,e)};He.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?He.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};He.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};He.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};He.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(l,a){return o.push(e(l,a))},t,r),o};He.from=function(e){return e instanceof He?e:e&&e.length?new Rg(e):He.empty};var Rg=function(n){function e(r){n.call(this),this.values=r}e.__proto__=n,e.prototype=Object.create(n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,l){return o==0&&l==this.length?this:new e(this.values.slice(o,l))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,l,a,c){for(var d=l;d<a;d++)if(o(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(o,l,a,c){for(var d=l-1;d>=a;d--)if(o(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=ul)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=ul)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(He);He.empty=new Rg([]);var Bx=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return e.__proto__=n,e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,l,a){var c=this.left.length;if(o<c&&this.left.forEachInner(r,o,Math.min(l,c),a)===!1||l>c&&this.right.forEachInner(r,Math.max(o-c,0),Math.min(this.length,l)-c,a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,l,a){var c=this.left.length;if(o>c&&this.right.forEachInvertedInner(r,o-c,Math.max(l,c)-c,a+c)===!1||l<c&&this.left.forEachInvertedInner(r,Math.min(o,c),l,a)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var l=this.left.length;return o<=l?this.left.slice(r,o):r>=l?this.right.slice(r-l,o-l):this.left.slice(r,l).append(this.right.slice(0,o-l))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(He);const _x=500;class Yt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,l;t&&(o=this.remapping(r,this.items.length),l=o.maps.length);let a=e.tr,c,d,p=[],g=[];return this.items.forEach((y,k)=>{if(!y.step){o||(o=this.remapping(r,k+1),l=o.maps.length),l--,g.push(y);return}if(o){g.push(new on(y.map));let v=y.step.map(o.slice(l)),w;v&&a.maybeStep(v).doc&&(w=a.mapping.maps[a.mapping.maps.length-1],p.push(new on(w,void 0,void 0,p.length+g.length))),l--,w&&o.appendMap(w,l)}else a.maybeStep(y.step);if(y.selection)return c=o?y.selection.map(o.slice(l)):y.selection,d=new Yt(this.items.slice(0,r).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:a,selection:c}}addTransform(e,t,r,o){let l=[],a=this.eventCount,c=this.items,d=!o&&c.length?c.get(c.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),k=new on(e.mapping.maps[g],y,t),v;(v=d&&d.merge(k))&&(k=v,g?l.pop():c=c.slice(0,c.length-1)),l.push(k),t&&(a++,t=void 0),o||(d=k)}let p=a-r.depth;return p>Vx&&(c=Fx(c,p),a-=p),new Yt(c.append(l),a)}remapping(e,t){let r=new ui;return this.items.forEach((o,l)=>{let a=o.mirrorOffset!=null&&l-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new Yt(this.items.append(e.map(t=>new on(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),l=e.mapping,a=e.steps.length,c=this.eventCount;this.items.forEach(k=>{k.selection&&c--},o);let d=t;this.items.forEach(k=>{let v=l.getMirror(--d);if(v==null)return;a=Math.min(a,v);let w=l.maps[v];if(k.step){let C=e.steps[v].invert(e.docs[v]),M=k.selection&&k.selection.map(l.slice(d+1,v));M&&c++,r.push(new on(w,C,M))}else r.push(new on(w))},o);let p=[];for(let k=t;k<a;k++)p.push(new on(l.maps[k]));let g=this.items.slice(0,o).append(p).append(r),y=new Yt(g,c);return y.emptyItemCount()>_x&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],l=0;return this.items.forEach((a,c)=>{if(c>=e)o.push(a),a.selection&&l++;else if(a.step){let d=a.step.map(t.slice(r)),p=d&&d.getMap();if(r--,p&&t.appendMap(p,r),d){let g=a.selection&&a.selection.map(t.slice(r));g&&l++;let y=new on(p.invert(),d,g),k,v=o.length-1;(k=o.length&&o[v].merge(y))?o[v]=k:o.push(y)}}else a.map&&r--},this.items.length,0),new Yt(He.from(o.reverse()),l)}}Yt.empty=new Yt(He.empty,0);function Fx(n,e){let t;return n.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),n.slice(t)}class on{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new on(t.getMap().invert(),t,this.selection)}}}class Un{constructor(e,t,r,o,l){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=l}}const Vx=20;function $x(n,e,t,r){let o=t.getMeta(Nr),l;if(o)return o.historyState;t.getMeta(Wx)&&(n=new Un(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Nr))return a.getMeta(Nr).redo?new Un(n.done.addTransform(t,void 0,r,Qo(e)),n.undone,Jp(t.mapping.maps),n.prevTime,n.prevComposition):new Un(n.done,n.undone.addTransform(t,void 0,r,Qo(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let c=t.getMeta("composition"),d=n.prevTime==0||!a&&n.prevComposition!=c&&(n.prevTime<(t.time||0)-r.newGroupDelay||!jx(t,n.prevRanges)),p=a?$u(n.prevRanges,t.mapping):Jp(t.mapping.maps);return new Un(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,Qo(e)),Yt.empty,p,t.time,c??n.prevComposition)}else return(l=t.getMeta("rebased"))?new Un(n.done.rebased(t,l),n.undone.rebased(t,l),$u(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Un(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),$u(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function jx(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,o)=>{for(let l=0;l<e.length;l+=2)r<=e[l+1]&&o>=e[l]&&(t=!0)}),t}function Jp(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,o,l,a)=>e.push(l,a));return e}function $u(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let o=e.map(n[r],1),l=e.map(n[r+1],-1);o<=l&&t.push(o,l)}return t}function Hx(n,e,t){let r=Qo(e),o=Nr.get(e).spec.config,l=(t?n.undone:n.done).popEvent(e,r);if(!l)return null;let a=l.selection.resolve(l.transform.doc),c=(t?n.done:n.undone).addTransform(l.transform,e.selection.getBookmark(),o,r),d=new Un(t?c:l.remaining,t?l.remaining:c,null,0,-1);return l.transform.setSelection(a).setMeta(Nr,{redo:t,historyState:d})}let ju=!1,qp=null;function Qo(n){let e=n.plugins;if(qp!=e){ju=!1,qp=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ju=!0;break}}return ju}const Nr=new cn("history"),Wx=new cn("closeHistory");function Ux(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new wt({key:Nr,state:{init(){return new Un(Yt.empty,Yt.empty,null,0,-1)},apply(e,t,r){return $x(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?zg:r=="historyRedo"?Lg:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function Ig(n,e){return(t,r)=>{let o=Nr.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(r){let l=Hx(o,t,n);l&&r(e?l.scrollIntoView():l)}return!0}}const zg=Ig(!1,!0),Lg=Ig(!0,!0),Kx=ct.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>zg(n,e),redo:()=>({state:n,dispatch:e})=>Lg(n,e)}},addProseMirrorPlugins(){return[Ux(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Jx=vt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",ut(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:o}=t,l=n();return r.parentOffset===0?l.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):ow(t)?l.insertContentAt(o.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({tr:a,dispatch:c})=>{var d;if(c){const{$to:p}=a.selection,g=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?a.setSelection(ne.create(a.doc,p.pos+1)):p.nodeAfter.isBlock?a.setSelection(X.create(a.doc,p.pos)):a.setSelection(ne.create(a.doc,p.pos));else{const y=(d=p.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();y&&(a.insert(g,y),a.setSelection(ne.create(a.doc,g+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Bw({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),qx=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Qx=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Gx=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Yx=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Xx=Cn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[yi({find:qx,type:this.type}),yi({find:Gx,type:this.type})]},addPasteRules(){return[ki({find:Qx,type:this.type}),ki({find:Yx,type:this.type})]}}),Zx=vt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ut(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),eC="listItem",Qp="textStyle",Gp=/^(\d+)\.\s$/,tC=vt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",ut(this.options.HTMLAttributes,t),0]:["ol",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(eC,this.editor.getAttributes(Qp)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=xs({find:Gp,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=xs({find:Gp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Qp)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),nC=vt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),rC=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,iC=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,sC=Cn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ut(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[yi({find:rC,type:this.type})]},addPasteRules(){return[ki({find:iC,type:this.type})]}}),oC=vt.create({name:"text",group:"inline"}),lC=ct.create({name:"starterKit",addExtensions(){var n,e,t,r,o,l,a,c,d,p,g,y,k,v,w,C,M,b;const _=[];return this.options.bold!==!1&&_.push(px.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&_.push(ux.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&_.push(gx.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&_.push(Sx.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(xx.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&_.push(Cx.configure((l=this.options)===null||l===void 0?void 0:l.document)),this.options.dropcursor!==!1&&_.push(Tx.configure((a=this.options)===null||a===void 0?void 0:a.dropcursor)),this.options.gapcursor!==!1&&_.push(Ix.configure((c=this.options)===null||c===void 0?void 0:c.gapcursor)),this.options.hardBreak!==!1&&_.push(zx.configure((d=this.options)===null||d===void 0?void 0:d.hardBreak)),this.options.heading!==!1&&_.push(Lx.configure((p=this.options)===null||p===void 0?void 0:p.heading)),this.options.history!==!1&&_.push(Kx.configure((g=this.options)===null||g===void 0?void 0:g.history)),this.options.horizontalRule!==!1&&_.push(Jx.configure((y=this.options)===null||y===void 0?void 0:y.horizontalRule)),this.options.italic!==!1&&_.push(Xx.configure((k=this.options)===null||k===void 0?void 0:k.italic)),this.options.listItem!==!1&&_.push(Zx.configure((v=this.options)===null||v===void 0?void 0:v.listItem)),this.options.orderedList!==!1&&_.push(tC.configure((w=this.options)===null||w===void 0?void 0:w.orderedList)),this.options.paragraph!==!1&&_.push(nC.configure((C=this.options)===null||C===void 0?void 0:C.paragraph)),this.options.strike!==!1&&_.push(sC.configure((M=this.options)===null||M===void 0?void 0:M.strike)),this.options.text!==!1&&_.push(oC.configure((b=this.options)===null||b===void 0?void 0:b.text)),_}}),aC=Cn.create({name:"highlight",addOptions(){return{color:"yellow"}},parseHTML(){return[{tag:'span[style="background-color: yellow"]'}]},renderHTML({mark:n}){return["span",{style:"background-color: yellow;",class:"highlight-mark"},0]},addCommands(){return{setHighlight:()=>({commands:n})=>n.toggleMark("highlight")}}}),uC=()=>{const n=ix({extensions:[lC,aC],content:"<p>Try highlighting and adding comments to this text!</p>"}),e=()=>{n&&n.chain().focus().setHighlight("yellow").run()},t=()=>{if(!n)return;n.isActive("highlight")&&n.chain().focus().toggleMark("highlight").run()};return Gt.jsxs("div",{className:"editor-container",children:[Gt.jsxs("div",{children:[Gt.jsx("button",{onClick:e,children:"Highlight in Yellow"}),Gt.jsx("button",{onClick:t,children:"Remove Highlight"})]}),Gt.jsx("div",{className:"tiptap-editor-content",children:Gt.jsx(Jw,{editor:n})})]})};function cC(){return Gt.jsxs("div",{className:"App",children:[Gt.jsx("h4",{children:"Tiptap Highlight and Comment Editor"}),Gt.jsx(uC,{})]})}F0.createRoot(document.getElementById("root")).render(Gt.jsx(kt.StrictMode,{children:Gt.jsx(cC,{})}));
